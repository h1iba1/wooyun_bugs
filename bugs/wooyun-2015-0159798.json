{"id": 78731, "wybug_id": "wooyun-2015-0159798", "wybug_title": "中国新闻周刊2处SQL注入", "wybug_corp": "inewsweek.cn", "wybug_author": "路人甲", "wybug_date": "2015-12-10 11:19", "wybug_open_date": "2015-12-15 11:20", "wybug_type": "SQL注射漏洞", "wybug_level": "高", "wybug_rank_0": "10", "wybug_status": "漏洞已经通知厂商但是厂商忽略漏洞", "wybug_from": "http://www.wooyun.org", "wybug_tags": ["注射技巧"], "wybug_detail": "漏洞详情 披露状态：   \t\t\t\t\t\t\t\t\t2015-12-10：\t细节已通知厂商并且等待厂商处理中\t\t\t\t\t\t\t\t\t2015-12-15：\t厂商已经主动忽略漏洞，细节向公众公开  简要描述： 中国新闻周刊从2012年开始就有各种漏洞问题。你不信百度去...本次为两处SQL注入，感觉可能是网站没有维护人员了....另外说一下，周刊不错哟... 详细说明：  先whois一下看看是谁的域名.\n\n不说废话直接上注入点...第一枚：\nhttp://finance.inewsweek.cn/baidu_siteapp_detail.php?id=70382\n注入方法为：\n\n判断数据库和系统：\n\n第二枚：\nhttp://politics.inewsweek.cn/ipad_content.php?id=85168\n注入方法为：\n\n判断数据库和系统：\n\n信息和whois的一样哟.   漏洞证明：  第一枚注入点信息：\n\n第二枚注入点信息：\n\n感觉是一个数据库,怪不得都有问题.呵呵~然后我进行拖库，发现果然是一个.一堆信息..\n\n\n\n遇到加密了.不知到怎么解密.不过相信有人会.然后准备把其他的库拖出来悄悄。悲剧了，数据太多了，只能等吧。\n\n\n\n网速太慢了，跑不动了...   修复方案：  早在2014年就有白帽子揭发了网站的SQL问题被忽略了。如果有某些人员一直执行查询操作，网站的数据库会拒绝服务，造成的损失应该比我们更清楚。这个问题，我们也只能从一个热心的角度建议解决。处理这样的问题，如果修改底层困难您可以选择添加WAF设备，也可以安装360网站检测。防御SQL注入：只是举个例子第一种：\n$sql = \"select count(*) as ctr from users where username    ='\".mysql_real_escape_string($username).\"' and     password='\". mysql_real_escape_string($pw).\"' limit 1\";\n第二种：\nfunction inject_check($sql_str) {         return eregi('select|insert|and|or|update|delete|\\'|\\/\\*|\\*|\\.\\.\\/|\\.\\/|union|into|load_file|outfile', $sql_str);    }          function verify_id($id=null) {         if(!$id) {            exit('没有提交参数！');         } elseif(inject_check($id)) {             exit('提交的参数非法！');        } elseif(!is_numeric($id)) {             exit('提交的参数非法！');         }         $id = intval($id);                  return $id;     }               function str_check( $str ) {         if(!get_magic_quotes_gpc()) {             $str = addslashes($str); // 进行过滤         }         $str = str_replace(\"_\", \"\\_\", $str);         $str = str_replace(\"%\", \"\\%\", $str);                 return $str;     }               function post_check($post) {         if(!get_magic_quotes_gpc()) {             $post = addslashes($post);        }         $post = str_replace(\"_\", \"\\_\", $post);         $post = str_replace(\"%\", \"\\%\", $post);         $post = nl2br($post);         $post = htmlspecialchars($post);                  return $post;     }\n   版权声明：转载请注明来源 路人甲@乌云\n ", "wybug_reply": "漏洞回应  厂商回应： 危害等级：无影响厂商忽略 忽略时间：2015-12-15 11:20 厂商回复：  漏洞Rank：4  (WooYun评价) 最新状态： 暂无  ", "replys": "漏洞评价：\n评价\n  \n\n\n", "wybug_level_fromcorp": "无影响厂商忽略", "wybug_rank_fromcorp": 0, "Ranks": null}