{"id": 16936, "wybug_id": "wooyun-2012-011730", "wybug_title": "百度某应用beidou（北斗）架构遍历！", "wybug_corp": "百度", "wybug_author": "shine", "wybug_date": "2012-09-04 13:12", "wybug_open_date": "2012-10-19 13:13", "wybug_type": "系统/服务运维配置不当", "wybug_level": "中", "wybug_rank_0": "10", "wybug_status": "厂商已经确认", "wybug_from": "http://www.wooyun.org", "wybug_tags": ["敏感信息泄漏", "敏感接口缺乏认证", "默认配置不当", "渗透测试思路", "内部敏感信息泄漏", "配置错误", "文件泄露", "管理员密码泄漏", "未授权访问"], "wybug_detail": "漏洞详情 披露状态：   \t\t\t\t\t\t\t\t\t2012-09-04：\t细节已通知厂商并且等待厂商处理中\t\t\t\t\t\t\t\t\t2012-09-04：\t厂商已经确认，细节仅向厂商公开\t\t\t\t\t\t\t\t\t2012-09-14：\t细节向核心白帽子及相关领域专家公开\t\t\t\t\t\t\t\t\t2012-09-24：\t细节向普通白帽子公开\t\t\t\t\t\t\t\t\t2012-10-04：\t细节向实习白帽子公开\t\t\t\t\t\t\t\t\t2012-10-19：\t细节向公众公开  简要描述：   原来百度的项目叫“北斗星计划”（北斗--大熊星座熊背和尾巴也。岂是百度大脚熊掌也？哈哈！）！ 详细说明：   \n百度现在的j2ee应用架构开始占主流了，又是典型的web服务器搭配配置失误所致：\n\n\n\n应该是做过处理了，只能读取.xml文件（如果是普通大型站点，到此就为止了，但百度的架构比较大！）。不过，源代码其实也没太多用处，j2ee应用的精华在于配置文件，j2ee另一特点：系统越大配置文件就越多！\n\n\n\n读取和猜解及整理xml，都用了两个多小时（累死人啊！）：\n\n\n\n不一一详细贴配置文件内容了（不厚道！另外确实做了技术架构的设计及维护策略，不像一些电商纯粹简单搭配使用开源框架（也不知道用不用的了！跟风啊！）。），说说百度j2ee的技术架构：  web服务器:Nginx + Tomcat（集群，可能上面还有更大一层分布式设计！）\n\n（如果是hibernate框架必须读去到DTO类文件；如果是ibatis需要读取对象配置文件；才能知道详细数据库结构（这里不知道百度好象没有使用ibatis框架，这样的分布式系统使用ibatis更好点！）。这样在如:手工sql注射时提供便利！）  数据层及开发框架：（memcached(内存对象缓存系统) + hibernate）\n\n（这里要看哪个框架占主导位置，因为关系到业务逻辑的配置，当然，我希望是Spring，那意味着系统结构更大！）发现业务及访问层，单纯靠Struts2是不够了，需要大量使用AOP及IOC，所以这里Spring在这里占主导：包括分布式系统配置（包括：JMS分布式系统消息组件！）\n\n\n\n\n\n\n\nMVC模式的struts2框架是可以遍历文件目录的（根据配置，好象也使用Spring MVC以及FreeMarker引擎 ）：\n\n首先，我们根据配置文件找到众多子应用配置：\n\n\n\n然后就知道每个子文件的配置目录了：\n\n\n\n另外，对jsp页面的访问用拦截器稍微做一下权限控制啊！\n\n\n   漏洞证明：   \n另附一个应用的两处(暂时没什么危害)：http://baidutv.baidu.com/WEB-INF/web.xmlhttp://123.125.114.155/WEB-INF/web.xml\n\n\n\n以及一处svn：http://f.baidu.com/fs/inquire/.svn/entries\n\n\n   修复方案：     敏感信息又让哥多了好多字典关键字及线索（我再仔细看看，先休息一下）！  百度发大脚公仔，熊掌！熊掌！   版权声明：转载请注明来源 shine@乌云\n ", "wybug_reply": "漏洞回应  厂商回应： 危害等级：高 漏洞Rank：14  确认时间：2012-09-04 13:43 厂商回复： 感谢你对百度安全的关注，我们马上安排处理。 最新状态： 暂无  ", "replys": "漏洞评价：\n评论\n          这些评论似乎很乌云~~~思密达          2012-11-12 10:43 |\t\t\t\t\tshine  \t\t\t( 普通白帽子  | \t\t\t\t\t\tRank:831 漏洞数:77\t\t\t| coder)\t\t\t\t\t\t\t\n  @testcvc 这个没有技巧的，需要熟悉j2ee的特点，问题就很简单了（不管是xml还是类文件，你会发现都有关联路径的；再一个就是开发时的习惯了）！其实，我想说的是java的一些设计在某些场景下的缺陷，并不完全是想说明渗透思路！    \n   \n \n     2012-09-04 13:42 |    \t\txsser  \t\t\t( 普通白帽子  |\t\t\t        Rank:254 漏洞数:18        | 当我又回首一切,这个世界会好吗?)\t\t \n  很精彩 很厉害    \n     2012-09-24 15:28 |    \t\tVty \t\t\t( 普通白帽子  |\t\t\t        Rank:199 漏洞数:37        )\t\t \n  @xsser 忽悠了7wb啊，苦逼了    \n     2012-10-19 13:19 |    \t\tse55i0n \t\t\t( 普通白帽子  |\t\t\t        Rank:1567 漏洞数:173        )\t\t \n  膜拜~    \n     2012-11-07 16:50 |    \t\ttestcvc \t\t\t( 路人 |\t\t\t        Rank:5 漏洞数:1        | test)\t\t \n  @shine 洞主，想知道如何读取和猜解的xml，求思路    \n     2012-11-12 10:43 |    \t\tshine  \t\t\t( 普通白帽子  |\t\t\t        Rank:831 漏洞数:77        | coder)\t\t \n  @testcvc 这个没有技巧的，需要熟悉j2ee的特点，问题就很简单了（不管是xml还是类文件，你会发现都有关联路径的；再一个就是开发时的习惯了）！其实，我想说的是java的一些设计在某些场景下的缺陷，并不完全是想说明渗透思路！    \n     2012-11-17 22:56 |    \t\ttestcvc \t\t\t( 路人 |\t\t\t        Rank:5 漏洞数:1        | test)\t\t \n  @最近临时攻读了几天J2EE，了解了些，多谢。    \n     2012-11-17 22:57 |    \t\ttestcvc \t\t\t( 路人 |\t\t\t        Rank:5 漏洞数:1        | test)\t\t \n  @shine 最近临时攻读了几天J2EE，了解了些，多谢。    \n     2013-10-22 16:43 |    \t\tluwikes \t\t\t( 普通白帽子  |\t\t\t        Rank:512 漏洞数:77        | 潜心学习~~~)\t\t \n  mark    \n     2014-04-11 15:27 |    \t\t小贱人 \t\t\t( 路人 |\t\t\t        Rank:4 漏洞数:3        | 资深菜鸟，)\t\t \n  牛逼啊    \n     2014-04-11 15:27 |    \t\t小贱人 \t\t\t( 路人 |\t\t\t        Rank:4 漏洞数:3        | 资深菜鸟，)\t\t \n  牛逼啊    \n  \n\n\n", "wybug_level_fromcorp": "高", "wybug_rank_fromcorp": 14, "Ranks": null}