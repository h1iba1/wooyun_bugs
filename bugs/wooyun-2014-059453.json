{"id": 3474, "wybug_id": "wooyun-2014-059453", "wybug_title": "职友集网可以任意修改用户资料信息", "wybug_corp": "职友集网", "wybug_author": "Rain", "wybug_date": "2014-05-05 12:48", "wybug_open_date": "2014-06-19 12:48", "wybug_type": "未授权访问/权限绕过", "wybug_level": "中", "wybug_rank_0": "6", "wybug_status": "厂商已经确认", "wybug_from": "http://www.wooyun.org", "wybug_tags": ["越权操作"], "wybug_detail": "漏洞详情 披露状态：   \t\t\t\t\t\t\t\t\t2014-05-05：\t细节已通知厂商并且等待厂商处理中\t\t\t\t\t\t\t\t\t2014-05-05：\t厂商已经确认，细节仅向厂商公开\t\t\t\t\t\t\t\t\t2014-05-15：\t细节向核心白帽子及相关领域专家公开\t\t\t\t\t\t\t\t\t2014-05-25：\t细节向普通白帽子公开\t\t\t\t\t\t\t\t\t2014-06-04：\t细节向实习白帽子公开\t\t\t\t\t\t\t\t\t2014-06-19：\t细节向公众公开  简要描述： 职友集网可以任意修改用户资料信息囧 详细说明：  职友集网可以任意修改用户资料信息囧   漏洞证明：  测试登录，登录成功后，访问下面的网址http://www.jobui.com/settings/people/profile/  可以看到大概如下的效果\n\n这是修改用户信息的，我们看看他的js代码实现吧\njQuery(\"#formsubmit\").submit(function(){\tvar $this = jQuery(this);\tvar $submit = jQuery(\"#formsubmit-submit\");\t\t$submit.attr(\"disabled\", \"disabled\").tipsBox(\"loading\", \"正在提交数据...\");\t\tjQuery.ajax({\t\ttype : 'post',\t\turl : '/process/',\t\tdata : $this.serialize(),\t\tdataType : 'json',\t\tsuccess : function(data) {\t\t\tif( data['result'] >0 ){\t\t\t\t$submit.removeAttr(\"disabled\").removeTipsBox().tipsBox(\"success\", \"修改成功\", function(){\t\t\t\t\twindow.location.href = data['param']['url'];\t\t\t\t});\t\t\t}else if( data['result'] == '-2' ){\t\t\t\t$submit.removeAttr(\"disabled\").removeTipsBox().tipsBox(\"failure\", \"只支持少于20位的字母或者字母和数字组合\");\t\t\t}else if( data['result'] == '-1' ){\t\t\t\t$submit.removeAttr(\"disabled\").removeTipsBox().tipsBox(\"failure\", \"修改失败，该域名已被使用\");\t\t\t}else {\t\t\t\t$submit.removeAttr(\"disabled\").removeTipsBox().tipsBox(\"failure\", \"修改失败！\");\t\t\t}\t\t}\t})\treturn false;});$('#domain').blur(function(){\tvar domain = $(this).val();\tvar userID = $(\"#userID\").val();\t$.ajax( {\t\ttype : 'post',\t\turl : '/process/',\t\tdata : {\t\t\tformAction : \"user_profile_personalDomain\",\t\t\tdomain : domain,\t\t\tuserID : userID\t\t},\t\tdataType : 'json',\t\tsuccess : function(data) {\t\t\tif( data['result'] > 0 ){\t\t\t\t$(\"#emailtips\").text(\"该域名已经被注册，请选择其它！\").css(\"color\",\"red\");\t\t\t}else if( data['result'] == '-2'){\t\t\t\t$(\"#emailtips\").text(\"域名不能为空\").css(\"color\",\"red\");\t\t\t}else if( data['result'] == '-3'){\t\t\t\t$(\"#emailtips\").text(\"只支持少于20位的字母或者字母和数字组合\").css(\"color\",\"red\");\t\t\t}else{\t\t\t\t$(\"#emailtips\").text(\"正确!\").css(\"color\",\"#999999\");\t\t\t}\t\t}\t});\t});\n可以看到关键在于它获取userid的方式var userID = $(\"#userID\").val();哈哈，居然直接取文本的，那不是作死吗，让我相信了一句话，不做死，不会死呀。我们来测试一下效果，具体截图如下首先任意访问一个用户的空间哦，任意选择，具体看截图\n\n可以看到，这个小帅哥id是13755   对不起了哦，我们来改改小帅哥资料吧\n\n我先改一下hidden的userid，这样我们提交到时候就是小帅哥的了\n\n好了，我们来update我们的资料吧\n\n\n\n下面我们继续访问刚刚小帅哥的主页网址，http://www.jobui.com/people/13755/\n\n发现访问不了了，囧，为什么呢？很简单，因为刚刚主页已经被我改了呀至于帅哥哥头像不改了了，留着吧   修复方案：  你懂得   版权声明：转载请注明来源 Rain@乌云\n ", "wybug_reply": "漏洞回应  厂商回应： 危害等级：高 漏洞Rank：15  确认时间：2014-05-05 14:07 厂商回复： 感谢白帽子专业的精神，我们会第一时间修复该漏洞，保护用户的资料，继续关注乌云的 最新状态： 暂无  ", "replys": "漏洞评价：\n评论\n  \n\n\n", "wybug_level_fromcorp": "高", "wybug_rank_fromcorp": 15, "Ranks": null}