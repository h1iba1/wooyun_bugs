{"id": 47735, "wybug_id": "wooyun-2014-085602", "wybug_title": "优酷某分站核心配置文件可读取 泄露大量敏感信息", "wybug_corp": "优酷", "wybug_author": "路人甲", "wybug_date": "2014-12-02 18:49", "wybug_open_date": "2015-01-16 18:50", "wybug_type": "敏感信息泄露", "wybug_level": "高", "wybug_rank_0": "15", "wybug_status": "厂商已经确认", "wybug_from": "http://www.wooyun.org", "wybug_tags": ["敏感信息泄露"], "wybug_detail": "漏洞详情 披露状态：   \t\t\t\t\t\t\t\t\t2014-12-02：\t细节已通知厂商并且等待厂商处理中\t\t\t\t\t\t\t\t\t2014-12-02：\t厂商已经确认，细节仅向厂商公开\t\t\t\t\t\t\t\t\t2014-12-12：\t细节向核心白帽子及相关领域专家公开\t\t\t\t\t\t\t\t\t2014-12-22：\t细节向普通白帽子公开\t\t\t\t\t\t\t\t\t2015-01-01：\t细节向实习白帽子公开\t\t\t\t\t\t\t\t\t2015-01-16：\t细节向公众公开  简要描述： 优酷某分站核心配置文件可读取 泄露大量敏感信息( 包含数据库信息 ) 详细说明：  http://manage.soku.com 这里是 SOKU 的后台\nhttp://211.151.146.96:81/WEB-INF/web.xml\n\nThis XML file does not appear to have any style information associated with it. The document tree is shown below.<web-app xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns=\"http://java.sun.com/xml/ns/javaee\" xmlns:web=\"http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd\" xsi:schemaLocation=\"http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd\" id=\"WebApp_ID\" version=\"2.5\"><display-name>yk_cas_demo</display-name><!-- Cas config start 详细的配置方法参见：https://wiki.jasig.org/display/CASC/CAS+Client+for+Java+3.1--><context-param><param-name>serverName</param-name><param-value>http://manage.soku.com</param-value></context-param><context-param><param-name>redirect_url</param-name><param-value>/Security_main.do</param-value><!--  这里配置的是你的服务器的信息  --></context-param><servlet><servlet-name>StartupServlet</servlet-name><servlet-class>com.youku.soku.InitServlet</servlet-class><init-param><param-name>config_home</param-name><param-value>WEB-INF/soku-conf/</param-value></init-param><init-param><param-name>torque</param-name><param-value>WEB-INF/soku-conf/Torque.properties</param-value></init-param><init-param><param-name>log4j</param-name><param-value>WEB-INF/soku-conf/log4j.xml</param-value></init-param><init-param><param-name>memcached</param-name><param-value>WEB-INF/soku-conf/memcached.properties</param-value></init-param><load-on-startup>1</load-on-startup></servlet><filter><filter-name>CAS_Authentication_Filter</filter-name><filter-class>org.jasig.cas.client.authentication.AuthenticationFilter</filter-class><init-param><param-name>casServerLoginUrl</param-name><param-value>http://211.151.146.96:8080/login</param-value><!--  这里是CAS服务器的登录地址，请使用wiki上写的登录地址  --></init-param></filter><filter><filter-name>CAS_Validation_Filter</filter-name><filter-class>org.jasig.cas.client.validation.Saml11TicketValidationFilter</filter-class><init-param><param-name>casServerUrlPrefix</param-name><param-value>http://10.103.51.107</param-value><!--  这里是CAS服务器前缀，请使用wiki上写的前缀  --></init-param></filter><filter><filter-name>CAS_HttpServletRequest_Wrapper_Filter</filter-name><filter-class>org.jasig.cas.client.util.HttpServletRequestWrapperFilter</filter-class></filter><!-- 注意3个Filter的顺序，不能变 --><filter-mapping><filter-name>CAS_Authentication_Filter</filter-name><url-pattern>*.do</url-pattern></filter-mapping><filter-mapping><filter-name>CAS_Validation_Filter</filter-name><url-pattern>*.do</url-pattern></filter-mapping><filter-mapping><filter-name>CAS_HttpServletRequest_Wrapper_Filter</filter-name><url-pattern>*.do</url-pattern></filter-mapping><filter><filter-name>Struts2</filter-name><filter-class>org.apache.struts2.dispatcher.FilterDispatcher</filter-class></filter><filter-mapping><filter-name>Struts2</filter-name><url-pattern>*.do</url-pattern></filter-mapping><!--  上面3个和下面的三个一样，只不过一个对应的是jsp，另一个是.do的URL类型  --><!--Single Sign Out start 登出配置，是指当用户从别的系统登出的时候，同时也能将你的系统的会话注销--><filter><filter-name>CAS_Single_Sign_Out_Filter</filter-name><filter-class>org.jasig.cas.client.session.SingleSignOutFilter</filter-class></filter><filter-mapping><filter-name>CAS_Single_Sign_Out_Filter</filter-name><url-pattern>/*</url-pattern></filter-mapping><listener><listener-class>org.jasig.cas.client.session.SingleSignOutHttpSessionListener</listener-class></listener><!-- Single Sign Out end --><!--  Cas config end --><welcome-file-list><welcome-file>Security_main.do</welcome-file></welcome-file-list></web-app>\n   漏洞证明：  \nhttp://211.151.146.96:81/WEB-INF/soku-conf/Torque.properties\n\ntorque.applicationRoot = .torque.defaults.pool.maxWait = 10000torque.database.default = sotorque.database.so.adapter = mysqltorque.dsfactory.so.factory = org.apache.torque.dsfactory.SharedPoolDataSourceFactorytorque.dsfactory.so.pool.maxIdle=50torque.dsfactory.so.pool.maxActive=100torque.dsfactory.so.connection.driver = com.mysql.jdbc.Drivertorque.dsfactory.so.pool.validationQuery=SELECT 1torque.dsfactory.so.connection.url = jdbc:mysql://10.103.8.10:3306/spider?autoReconnect=true&useUnicode=true&characterEncoding=UTF-8torque.dsfactory.so.connection.user = yoqootorque.dsfactory.so.connection.password = yoqootorque.dsfactory.scarab.datasource.logInterval = 1torque.idbroker.clever.quantity = falsetorque.idbroker.prefetch = truetorque.manager.useCache = truetorque.database.name =youkutorque.database.youku.adapter = mysqltorque.dsfactory.youku.factory = org.apache.torque.dsfactory.SharedPoolDataSourceFactorytorque.dsfactory.youku.pool.maxIdle=50torque.dsfactory.youku.pool.maxActive=100torque.dsfactory.youku.connection.driver = com.mysql.jdbc.Drivertorque.dsfactory.youku.pool.validationQuery=SELECT 1torque.dsfactory.youku.connection.url = jdbc:mysql://10.103.7.16:3306/yoqoo?useUnicode=true&characterEncoding=8859_1torque.dsfactory.youku.connection.user = yoqootorque.dsfactory.youku.connection.password = dswybs-yoqootorque.database.name =youkumaptorque.database.youkumap.adapter = mysqltorque.dsfactory.youkumap.factory = org.apache.torque.dsfactory.SharedPoolDataSourceFactorytorque.dsfactory.youkumap.pool.maxIdle=50torque.dsfactory.youkumap.pool.maxActive=100torque.dsfactory.youkumap.connection.driver = com.mysql.jdbc.Drivertorque.dsfactory.youkumap.pool.validationQuery=SELECT 1torque.dsfactory.youkumap.connection.url = jdbc:mysql://10.103.2.206:3306/yoqoo?useUnicode=true&characterEncoding=8859_1torque.dsfactory.youkumap.connection.user = roottorque.dsfactory.youkumap.connection.password = yhnji-db-yoqootorque.database.name = soku_librarytorque.database.soku_library.adapter = mysqltorque.dsfactory.soku_library.factory = org.apache.torque.dsfactory.SharedPoolDataSourceFactorytorque.dsfactory.soku_library.pool.maxIdle=100torque.dsfactory.soku_library.pool.maxActive=200torque.dsfactory.soku_library.connection.driver = com.mysql.jdbc.Drivertorque.dsfactory.soku_library.pool.validationQuery=SELECT 1torque.dsfactory.soku_library.connection.url = jdbc:mysql://10.103.8.9:3306/soku_odshow1?autoReconnect=true&useUnicode=true&characterEncoding=UTF-8&noDatetimeStringSync=true&&zeroDateTimeBehavior=convertToNulltorque.dsfactory.soku_library.connection.user = yoqootorque.dsfactory.soku_library.connection.password = yoqootorque.database.name = search_stattorque.database.search_stat.adapter = mysqltorque.dsfactory.search_stat.factory = org.apache.torque.dsfactory.SharedPoolDataSourceFactorytorque.dsfactory.search_stat.pool.maxIdle=50torque.dsfactory.search_stat.pool.maxActive=100torque.dsfactory.search_stat.connection.driver = com.mysql.jdbc.Drivertorque.dsfactory.search_stat.pool.validationQuery=SELECT 1torque.dsfactory.search_stat.connection.url = jdbc:mysql://10.100.56.14:3306/search_stat?useUnicode=true&characterEncoding=UTF-8torque.dsfactory.search_stat.connection.user = sokustat-systorque.dsfactory.search_stat.connection.password = SRXtc7etf5tpctorque.database.name = search_stat_sokutorque.database.search_stat_soku.adapter = mysqltorque.dsfactory.search_stat_soku.factory = org.apache.torque.dsfactory.SharedPoolDataSourceFactorytorque.dsfactory.search_stat_soku.pool.maxIdle=50torque.dsfactory.search_stat_soku.pool.maxActive=100torque.dsfactory.search_stat_soku.connection.driver = com.mysql.jdbc.Drivertorque.dsfactory.search_stat_soku.pool.validationQuery=SELECT 1torque.dsfactory.search_stat_soku.connection.url = jdbc:mysql://10.100.56.14:3306/search_stat_soku?useUnicode=true&characterEncoding=UTF-8torque.dsfactory.search_stat_soku.connection.user = sokustat-systorque.dsfactory.search_stat_soku.connection.password = SRXtc7etf5tpctorque.database.name = searchrecommendtorque.database.searchrecommend.adapter = mysqltorque.dsfactory.searchrecommend.factory = org.apache.torque.dsfactory.SharedPoolDataSourceFactorytorque.dsfactory.searchrecommend.pool.maxIdle=50torque.dsfactory.searchrecommend.pool.maxActive=100torque.dsfactory.searchrecommend.connection.driver = com.mysql.jdbc.Drivertorque.dsfactory.searchrecommend.pool.validationQuery=SELECT 1torque.dsfactory.searchrecommend.connection.url = jdbc:mysql://10.100.56.14:3306/search_recomend?useUnicode=true&characterEncoding=UTF-8torque.dsfactory.searchrecommend.connection.user = sokustat-systorque.dsfactory.searchrecommend.connection.password = SRXtc7etf5tpctorque.database.name = sokutorque.database.soku.adapter = mysqltorque.dsfactory.soku.factory = org.apache.torque.dsfactory.SharedPoolDataSourceFactorytorque.dsfactory.soku.pool.maxIdle=10torque.dsfactory.soku.pool.maxActive=20torque.dsfactory.soku.connection.driver = com.mysql.jdbc.Drivertorque.dsfactory.soku.pool.validationQuery=SELECT 1torque.dsfactory.soku.connection.url = jdbc:mysql://10.100.56.14:3306/soku?useUnicode=true&characterEncoding=UTF-8torque.dsfactory.soku.connection.user = sokustat-systorque.dsfactory.soku.connection.password = SRXtc7etf5tpctorque.database.name = searchteleplaytorque.database.searchteleplay.adapter = mysqltorque.dsfactory.searchteleplay.factory = org.apache.torque.dsfactory.SharedPoolDataSourceFactorytorque.dsfactory.searchteleplay.pool.maxIdle=50torque.dsfactory.searchteleplay.pool.maxActive=100torque.dsfactory.searchteleplay.connection.driver = com.mysql.jdbc.Drivertorque.dsfactory.searchteleplay.pool.validationQuery=SELECT 1torque.dsfactory.searchteleplay.connection.url = jdbc:mysql://10.100.56.14:3306/search_teleplay?useUnicode=true&characterEncoding=UTF-8torque.dsfactory.searchteleplay.connection.user = sokustat-systorque.dsfactory.searchteleplay.connection.password = SRXtc7etf5tpctorque.dsfactory.name = lib_datatorque.database.lib_data.adapter = mysqltorque.dsfactory.lib_data.factory = org.apache.torque.dsfactory.SharedPoolDataSourceFactorytorque.dsfactory.lib_data.pool.maxIdle=50torque.dsfactory.lib_data.pool.maxActive=100torque.dsfactory.lib_data.connection.driver = com.mysql.jdbc.Drivertorque.dsfactory.lib_data.pool.validationQuery=SELECT 1torque.dsfactory.lib_data.connection.url = jdbc:mysql://10.103.8.10:3306/zhidaspider?useUnicode=true&characterEncoding=UTF-8torque.dsfactory.lib_data.connection.user = yoqootorque.dsfactory.lib_data.connection.password = yoqootorque.dsfactory.scarab.datasource.logInterval = 1torque.database.name = categorytorque.database.category.adapter = mysqltorque.dsfactory.category.factory = org.apache.torque.dsfactory.SharedPoolDataSourceFactorytorque.dsfactory.category.pool.maxIdle=50torque.dsfactory.category.pool.maxActive=100# torque.dsfactory.category.connection.driver = org.gjt.mm.mysql.Drivertorque.dsfactory.category.connection.driver = com.mysql.jdbc.Drivertorque.dsfactory.category.pool.validationQuery=SELECT 1torque.dsfactory.category.connection.url = jdbc:mysql://10.103.2.206:3306/yoqoo?useUnicode=true&characterEncoding=8859_1torque.dsfactory.category.connection.user = roottorque.dsfactory.category.connection.password = yhnji-db-yoqootorque.database.name = query_parsetorque.database.query_parse.adapter = mysqltorque.dsfactory.query_parse.factory = org.apache.torque.dsfactory.SharedPoolDataSourceFactorytorque.dsfactory.query_parse.pool.maxIdle=10torque.dsfactory.query_parse.pool.maxActive=20torque.dsfactory.query_parse.connection.driver = com.mysql.jdbc.Drivertorque.dsfactory.query_parse.pool.validationQuery=SELECT 1torque.dsfactory.query_parse.connection.url = jdbc:mysql://10.100.56.14:3306/query_parse?useUnicode=true&characterEncoding=UTF-8torque.dsfactory.query_parse.connection.user = sokustat-systorque.dsfactory.query_parse.connection.password = SRXtc7etf5tpctorque.database.name = new_soku_toptorque.database.new_soku_top.adapter = mysqltorque.dsfactory.new_soku_top.factory = org.apache.torque.dsfactory.SharedPoolDataSourceFactorytorque.dsfactory.new_soku_top.pool.maxIdle=20torque.dsfactory.new_soku_top.pool.maxActive=100torque.dsfactory.new_soku_top.connection.driver = com.mysql.jdbc.Drivertorque.dsfactory.new_soku_top.pool.validationQuery=SELECT 1torque.dsfactory.new_soku_top.connection.url = jdbc:mysql://10.100.56.13:3306/new_soku_top?useUnicode=true&characterEncoding=UTF-8&noDatetimeStringSync=true&&zeroDateTimeBehavior=convertToNulltorque.dsfactory.new_soku_top.connection.user = soku-systorque.dsfactory.new_soku_top.connection.password = 2RStcXetf5tR2torque.database.name = surveytorque.database.survey.adapter = mysqltorque.dsfactory.survey.factory = org.apache.torque.dsfactory.SharedPoolDataSourceFactorytorque.dsfactory.survey.pool.maxIdle=100torque.dsfactory.survey.pool.maxActive=200torque.dsfactory.survey.connection.driver = com.mysql.jdbc.Drivertorque.dsfactory.survey.pool.validationQuery=SELECT 1torque.dsfactory.survey.connection.url = jdbc:mysql://10.103.8.9:3306/survey?autoReconnect=true&useUnicode=true&characterEncoding=UTF-8torque.dsfactory.survey.connection.user = yoqootorque.dsfactory.survey.connection.password = yoqootorque.database.name = youku_logtorque.database.youku_log.adapter = mysqltorque.dsfactory.youku_log.factory = org.apache.torque.dsfactory.SharedPoolDataSourceFactorytorque.dsfactory.youku_log.pool.maxIdle=20torque.dsfactory.youku_log.pool.maxActive=100torque.dsfactory.youku_log.connection.driver = com.mysql.jdbc.Drivertorque.dsfactory.youku_log.pool.validationQuery=SELECT 1torque.dsfactory.youku_log.connection.url = jdbc:mysql://10.100.56.14:3306/youku_log?autoReconnect=true&useUnicode=true&characterEncoding=UTF-8torque.dsfactory.youku_log.connection.user = sokustat-systorque.dsfactory.youku_log.connection.password = SRXtc7etf5tpctorque.database.name = soku_odshowtorque.database.soku_odshow.adapter = mysqltorque.dsfactory.soku_odshow.factory = org.apache.torque.dsfactory.SharedPoolDataSourceFactorytorque.dsfactory.soku_odshow.pool.maxIdle=100torque.dsfactory.soku_odshow.pool.maxActive=200torque.dsfactory.soku_odshow.connection.driver = com.mysql.jdbc.Drivertorque.dsfactory.soku_odshow.pool.validationQuery=SELECT 1torque.dsfactory.soku_odshow.connection.url = jdbc:mysql://10.100.55.25:3306/soku_odshow?autoReconnect=true&useUnicode=true&characterEncoding=UTF-8&noDatetimeStringSync=true&&zeroDateTimeBehavior=convertToNulltorque.dsfactory.soku_odshow.connection.user = soku-selecttorque.dsfactory.soku_odshow.connection.password = 1LYtSEXuf6cStorque.database.name = spider23torque.database.spider23.adapter = mysqltorque.dsfactory.spider23.factory = org.apache.torque.dsfactory.SharedPoolDataSourceFactorytorque.dsfactory.spider23.pool.maxIdle=20torque.dsfactory.spider23.pool.maxActive=100torque.dsfactory.spider23.connection.driver = com.mysql.jdbc.Drivertorque.dsfactory.spider23.pool.validationQuery=SELECT 1torque.dsfactory.spider23.connection.url = jdbc:mysql://10.12.0.23:3306/spider?autoReconnect=true&useUnicode=true&characterEncoding=UTF-8torque.dsfactory.spider23.connection.user = yoqootorque.dsfactory.spider23.connection.password = yoqoo\n   修复方案：  目录访问做限制   版权声明：转载请注明来源 路人甲@乌云\n ", "wybug_reply": "漏洞回应  厂商回应： 危害等级：高 漏洞Rank：15  确认时间：2014-12-02 19:01 厂商回复： 多谢提醒，马上修复。 最新状态： 暂无  ", "replys": "漏洞评价：\n评论\n     2014-12-02 22:36 |    \t\tpx1624 \t\t\t( 普通白帽子  |\t\t\t        Rank:1036 漏洞数:175        | px1624)\t\t \n  宝宝，你有匿名。。    \n     2014-12-02 22:45 |    \t\t瘦蛟舞  \t\t\t( 普通白帽子  |\t\t\t        Rank:687 漏洞数:78        | 铁甲依然在)\t\t \n  @px1624 大神如何看匿名？    \n     2014-12-02 22:47 |    \t\tpx1624 \t\t\t( 普通白帽子  |\t\t\t        Rank:1036 漏洞数:175        | px1624)\t\t \n  @瘦蛟舞 很简单，审核的时候他在群里让管理“求审核”，我看就是这个标题    \n     2014-12-02 22:57 |    \t\t瘦蛟舞  \t\t\t( 普通白帽子  |\t\t\t        Rank:687 漏洞数:78        | 铁甲依然在)\t\t \n  @px1624 机智    \n     2014-12-25 12:32 |    \t\twefgod \t\t\t( 普通白帽子  |\t\t\t        Rank:1807 漏洞数:179        | 力不从心)\t\t \n  @px1624 宝宝是哪个？XFK？还是    \n  \n\n\n", "wybug_level_fromcorp": "高", "wybug_rank_fromcorp": 15, "Ranks": null}