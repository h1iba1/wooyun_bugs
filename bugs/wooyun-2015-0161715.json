{"id": 77838, "wybug_id": "wooyun-2015-0161715", "wybug_title": "SQL注射漏洞", "wybug_corp": "深圳市银宝山新", "wybug_author": "路人甲", "wybug_date": "2015-12-16 12:31", "wybug_open_date": "2016-01-28 17:10", "wybug_type": "SQL注射漏洞", "wybug_level": "高", "wybug_rank_0": "20", "wybug_status": "未联系到厂商或者厂商积极忽略", "wybug_from": "http://www.wooyun.org", "wybug_tags": ["注射"], "wybug_detail": "漏洞详情 披露状态：   \t\t\t\t\t\t\t\t\t2015-12-16：\t积极联系厂商并且等待厂商认领中，细节不对外公开\t\t\t\t\t\t\t\t\t2016-01-28：\t厂商已经主动忽略漏洞，细节向公众公开  简要描述： RT 详细说明：  URL： http://www.basismold.com/page/newsinfo.aspx   漏洞证明：  ...<h2> <i>字符串 '' 后的引号不完整。</i> </h2></span><font face=\"Arial, Helvetica, Geneva, SunSans-Regular, sans-serif \"><b> Description: </b>An unhandled exception occurred during the execution of thecurrent web request. Please review the stack trace for more information about the error and whereit originated in the code.<br><br><b> Exception Details: </b>System.Data.SqlClient.SqlException: 字符串 '' 后的引号不完整。<br><br><b>Source Error:</b> <br><br><table width=100% bgcolor=\"#ffffcc\"><tr><td>\nAn unhandled exception was generated during the execution of the current web request. Informationregarding the origin and location of the exception can be identified using the exception stacktrace below.\n......<b>Stack Trace:</b> <br><br><table width=100% bgcolor=\"#ffffcc\"><tr><td><code><pre>[SqlException (0x80131904): 字符串 &#39;&#39; 后的引号不完整。]System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection,Action`1 wrapCloseInAction) +1787814System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, BooleanbreakConnection, Action`1 wrapCloseInAction) +5341674System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj,Boolean callerHasConnectionLock, Boolean asyncClose) +546System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler,SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler,...System.Data.SqlClient.SqlDataReader.TryConsumeMetaData() +61System.Data.SqlClient.SqlDataReader.get_MetaData() +90System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehaviorrunBehavior, String resetOptionsString) +377System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehaviorrunBehavior, Boolean returnStream, Boolean async, Int32 tim...System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehaviorrunBehavior, Boolean returnStream, String method, TaskCompleti...System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehaviorrunBehavior, Boolean returnStream, String method) +53System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method) +137System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior) +41System.Data.Common.DbCommand.System.Data.IDbCommand.ExecuteReader(CommandBehavior behavior)+10System.Data.Common.DbDataAdapter.FillInternal(DataSet dataset, DataTable[] datatables, Int32startRecord, Int32 maxRecords, String srcTable, IDbCommand command, CommandBehavior behavior)+140System.Data.Common.DbDataAdapter.Fill(DataSet dataSet, Int32 startRecord, Int32 maxRecords,String srcTable, IDbCommand command, CommandBehavior behavior) +316System.Data.Common.DbDataAdapter.Fill(DataSet dataSet) +88dbhelp.GetDataTable(String sql) +155news.getById(Int32 id, String type) +149page_NewsInfo.Page_Load(Object sender, EventArgs e) +78System.Web.Util.CalliEventHandlerDelegateProxy.Callback(Object sender, EventArgs e) +51System.Web.UI.Control.OnLoad(EventArgs e) +92......<b>Version Information:</b>&nbsp;Microsoft .NET Framework Version:4.0.30319; ASP.NETVersion:4.0.30319.34280</font></body></html><!--[SqlException]: 字符串 &#39;&#39; 后的引号不完整。at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, BooleanbreakConnection, Action`1 wrapCloseInAction)at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, BooleanbreakConnection, Action`1 wrapCloseInAction)at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj,Boolean callerHasConnectionLock, Boolean asyncClose)at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler,SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandl...at --be...   修复方案：  有多种减轻威胁的技巧：[1] 策略：库或框架使用不允许此弱点出现的经过审核的库或框架，或提供更容易避免此弱点的构造。[2] 策略：参数化如果可用，使用自动实施数据和代码之间的分离的结构化机制。这些机制也许能够自动提供相关引用、编码和验证，而不是依赖于开发者在生成输出的每一处提供此能力。[3] 策略：环境固化使用完成必要任务所需的最低特权来运行代码。[4] 策略：输出编码如果在有风险的情况下仍需要使用动态生成的查询字符串或命令，请对参数正确地加引号并将这些参数中的任何特殊字符转义。[5] 策略：输入验证假定所有输入都是恶意的。使用“接受已知善意”输入验证策略：严格遵守规范的可接受输入的白名单。拒绝任何没有严格遵守规范的输入，或者将其转换为遵守规范的内容。不要完全依赖于将恶意或格式错误的输入加入黑名单。但是，黑名单可帮助检测潜在攻击，或者确定哪些输入格式不正确，以致应当将其彻底拒绝。   版权声明：转载请注明来源 路人甲@乌云\n ", "wybug_reply": "漏洞回应  厂商回应： 未能联系到厂商或者厂商积极拒绝  ", "replys": "漏洞评价：\n评价\n  \n\n\n", "wybug_level_fromcorp": "无影响厂商忽略", "wybug_rank_fromcorp": 0, "Ranks": null}