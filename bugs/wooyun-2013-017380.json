{"id": 14308, "wybug_id": "wooyun-2013-017380", "wybug_title": "京东IM web客户端 的文件上传导致任意JS执行漏洞", "wybug_corp": "京东商城", "wybug_author": "Mr.L", "wybug_date": "2013-01-16 15:46", "wybug_open_date": "2013-03-02 15:47", "wybug_type": "xss跨站脚本攻击", "wybug_level": "中", "wybug_rank_0": "8", "wybug_status": "厂商已经确认", "wybug_from": "http://www.wooyun.org", "wybug_tags": "", "wybug_detail": "漏洞详情 披露状态：   \t\t\t\t\t\t\t\t\t2013-01-16：\t细节已通知厂商并且等待厂商处理中\t\t\t\t\t\t\t\t\t2013-01-16：\t厂商已经确认，细节仅向厂商公开\t\t\t\t\t\t\t\t\t2013-01-26：\t细节向核心白帽子及相关领域专家公开\t\t\t\t\t\t\t\t\t2013-02-05：\t细节向普通白帽子公开\t\t\t\t\t\t\t\t\t2013-02-15：\t细节向实习白帽子公开\t\t\t\t\t\t\t\t\t2013-03-02：\t细节向公众公开  简要描述： 在京东在线客服系统中，客服端页面可以执行客户编写的任意JS代码。 详细说明：  流程：1.客服接入。2.上传一个图片。3.由于京东的编辑器是一个contenteditable=true的div，所以我们能对其内容进行编辑。4.在图片上添加事件\n\n这里添加一个onload，内容是跳转到天猫。5.点击发送6.在network中我们检查请求内容，会看到一个message\n\n，将其转码后我们得到\n\n在这里，我们看到图片上的onload事件并没有被过滤掉，在客服端会直接执行。   漏洞证明：  客服端的工作人员证实了代码执行。\n\n再次发现问题，聊天记录竟然是存库的！在我的京东》消息精灵里，代码输出也没过滤\n\n   修复方案：  对于用户提交的内容进行更加严格的过滤，去除在一些媒体元素上的onload onerror等事件。   版权声明：转载请注明来源 Mr.L@乌云\n ", "wybug_reply": "漏洞回应  厂商回应： 危害等级：低 漏洞Rank：5  确认时间：2013-01-16 18:32 厂商回复： 非常感谢您对京东的关注，我们已开始修复！ 最新状态： 暂无  ", "replys": "漏洞评价：\n评论\n     2013-01-16 16:12 |    \t\t疯子 \t\t\t( 普通白帽子  |\t\t\t        Rank:242 漏洞数:42        | 世人笑我太疯癫，我笑世人看不穿~)\t\t \n  忽略之....    \n     2013-01-16 18:41 |    \t\txsser  \t\t\t( 普通白帽子  |\t\t\t        Rank:254 漏洞数:18        | 当我又回首一切,这个世界会好吗?)\t\t \n  @疯子 失策吧    \n     2013-02-05 23:54 |    \t\tnoah \t\t\t( 普通白帽子  |\t\t\t        Rank:384 漏洞数:40        )\t\t \n  吓到妹子了    \n  \n\n\n", "wybug_level_fromcorp": "低", "wybug_rank_fromcorp": 5, "Ranks": null}