{"id": 14921, "wybug_id": "wooyun-2012-015957", "wybug_title": "[腾讯实例教程] 那些年我们一起学XSS - 1. 什么都没过滤的入门情况", "wybug_corp": "腾讯", "wybug_author": "心伤的瘦子", "wybug_date": "2012-12-13 14:18", "wybug_open_date": "2013-01-27 14:19", "wybug_type": "xss跨站脚本攻击", "wybug_level": "低", "wybug_rank_0": "1", "wybug_status": "厂商已经确认", "wybug_from": "http://www.wooyun.org", "wybug_tags": ["反射型"], "wybug_detail": "漏洞详情 披露状态：   \t\t\t\t\t\t\t\t\t2012-12-13：\t细节已通知厂商并且等待厂商处理中\t\t\t\t\t\t\t\t\t2012-12-13：\t厂商已经确认，细节仅向厂商公开\t\t\t\t\t\t\t\t\t2012-12-23：\t细节向核心白帽子及相关领域专家公开\t\t\t\t\t\t\t\t\t2013-01-02：\t细节向普通白帽子公开\t\t\t\t\t\t\t\t\t2013-01-12：\t细节向实习白帽子公开\t\t\t\t\t\t\t\t\t2013-01-27：\t细节向公众公开  简要描述： 只是些反射型XSS，单单发出来没有什么意义。只是些反射型XSS，腾讯怎么修都修不完。只是些反射型XSS，我想让它变得更有价值。只是些反射型XSS，我拿他们做成了教程。 详细说明：  1. XSS的存在，一定是伴随着输入，与输出2个概念的。2. 要想过滤掉XSS，你可以在输入层面过滤，也可以在输出层面过滤。3. 如果输入和输出都没过滤。 那么漏洞将是显而易见的。4. 作为第一个最基础的例子， 我们拿出的是一个什么都没过滤（其实还是有些转义的，主要没过滤< ,  >）的例子。 这种例子出现在腾讯这种大网站的概率不是很高。 但是还是让我找到了一个。5. http://app.data.qq.com/?umod=commentsoutlet&act=count&siteid=3&libid=9&dataid=1480&score=1&func=haoping&_=13534752618866. 对于上面这个例子。我们可以看到什么是输入，什么是输出。\n\n7. 经过测试，我们发现，score这个【输入】参数，没有进行任何过滤， 即，输入是什么，输出就是什么？  通俗点就是“吃什么，拉什么”。。。如下图：\n\n网页中看到的效果如下：\n\n8. 既然可以直接输入 < > HTML标签，接下来的利用也就相对简单了。\nhttp://app.data.qq.com/?umod=commentsoutlet&act=count&siteid=3&libid=9&dataid=1480&score=<img src=1 onerror=alert(1);>&func=haoping&_=1353475261886\n效果如下：\n\n   漏洞证明：  见详情   修复方案：  这种XSS属于最基本的一类XSS,也最好防御。。它的模型是：<HTML标签></HTML标签>   [输出]<HTML标签></HTML标签>或<HTML标签>[输出]</HTML标签>a. 通常，我们只需要在输出前，将 < , > 过滤掉即可。b. 这类XSS在小型网站中比较常见，在大型网站中少见。 c. 这类XSS通常都被浏览器的XSS过滤器秒杀了，所以一般来说，威力较小。d. 对于普通用户来说，请使用IE8及以上版本（并开启XSS过滤器功能，默认开启），或chrome浏览器，将可以防御大部分此种类型的XSS攻击。   版权声明：转载请注明来源 心伤的瘦子@乌云\n ", "wybug_reply": "漏洞回应  厂商回应： 危害等级：低 漏洞Rank：5  确认时间：2012-12-13 14:36 厂商回复： 非常感谢您的报告。这个问题我们已经确认，正在与业务部门进行沟通制定解决方案。如有任何新的进展我们将会及时同步。 最新状态： 暂无  ", "replys": "漏洞评价：\n评论\n     2012-12-13 14:19 |    \t\txsser  \t\t\t( 普通白帽子  |\t\t\t        Rank:254 漏洞数:18        | 当我又回首一切,这个世界会好吗?)\t\t \n  这要不是马甲我不信 @心伤的胖子     \n     2012-12-13 14:22 |    \t\t百度(乌云厂商)\t\t \n  我信    \n     2012-12-13 14:22 |    \t\tRookie \t\t\t( 普通白帽子  |\t\t\t        Rank:288 漏洞数:78        | 123)\t\t \n  这要不是马甲我不信 @心伤的胖子 楼下跟上    \n     2012-12-13 14:23 |    \t\t卖切糕的 \t\t\t( 路人 |\t\t\t        Rank:5 漏洞数:1        | 我是卖切糕的)\t\t \n  你们这些人真不要脸，还搞马甲    \n     2012-12-13 14:26 |    \t\t低调的瘦子 \t\t\t( 普通白帽子  |\t\t\t        Rank:466 漏洞数:68        | loading……………………)\t\t \n  难道是我的马甲？    \n     2012-12-13 14:27 |    \t\tRookie \t\t\t( 普通白帽子  |\t\t\t        Rank:288 漏洞数:78        | 123)\t\t \n  鄙视 马甲帝.....    \n     2012-12-13 14:30 |    \t\tgoderci \t\t\t( 普通白帽子  |\t\t\t        Rank:542 漏洞数:47        | http://www.yunday.org)\t\t \n  ...    \n     2012-12-13 14:35 |    \t\tdyun \t\t\t( 普通白帽子  |\t\t\t        Rank:102 漏洞数:15        | [code][/code])\t\t \n  @心伤的胖子 我也当胖子...拉风的胖子    \n     2012-12-13 14:36 |    \t\t心伤的胖子 \t\t\t( 普通白帽子  |\t\t\t        Rank:308 漏洞数:29        | 因为心伤，所以胖子。)\t\t \n  回楼上各位，我信！    \n     2012-12-13 14:42 |    \t\t小胖胖要减肥  \t\t\t( 普通白帽子  |\t\t\t        Rank:686 漏洞数:101        )\t\t \n  @心伤的胖子 你可以跟他赌上不了10啊，之前wb有木有都给你    \n     2012-12-13 15:27 |    \t\tD＆G \t\t\t( 普通白帽子  |\t\t\t        Rank:523 漏洞数:103        | going)\t\t \n  这个 得跟上啊    \n     2012-12-13 15:33 |    \t\tp.z  \t\t\t( 普通白帽子  |\t\t\t        Rank:411 漏洞数:40        )\t\t \n  我坦白了吧，楼上除了百度，全是我马甲    \n     2012-12-13 15:41 |    \t\t鬼魅羊羔 \t\t\t( 普通白帽子  |\t\t\t        Rank:299 漏洞数:42        | (#‵′)凸(#‵′)凸(#‵′)凸(#‵′)凸(#‵...)\t\t \n  不抢马甲，因为我有板凳。。    \n     2012-12-13 16:35 |    \t\tFinger  \t\t\t( 普通白帽子  |\t\t\t        Rank:777 漏洞数:95        | 最近有人冒充该账号行骗，任何自称Finger并...)\t\t \n  绝对马甲 有几个没马甲的？    \n     2012-12-13 17:15 |    \t\thorseluke \t\t\t( 普通白帽子  |\t\t\t        Rank:116 漏洞数:18        | Realize the dream in earnest.)\t\t \n  心伤的瘦子...下次会不会是心伤的矮子....    \n     2012-12-13 17:19 |    \t\txsser  \t\t\t( 普通白帽子  |\t\t\t        Rank:254 漏洞数:18        | 当我又回首一切,这个世界会好吗?)\t\t \n  @horseluke 你刺激人啊？？？？    \n     2012-12-13 17:20 |    \t\tFinger  \t\t\t( 普通白帽子  |\t\t\t        Rank:777 漏洞数:95        | 最近有人冒充该账号行骗，任何自称Finger并...)\t\t \n  @下回俺再弄个心伤的妹子    \n     2012-12-13 17:20 |    \t\tFinger  \t\t\t( 普通白帽子  |\t\t\t        Rank:777 漏洞数:95        | 最近有人冒充该账号行骗，任何自称Finger并...)\t\t \n  @horseluke 下回俺再弄个心伤的妹子    \n     2012-12-14 16:16 |    \t\t偶尔透透气 \t\t\t( 路人 |\t\t\t        Rank:6 漏洞数:1        | 常常潜潜水,偶尔透透气.)\t\t \n  @心伤的胖子 @心伤的瘦子  尼玛  这世界 到底是肿了么?    \n     2012-12-19 17:51 |    \t\t冉冉升起 \t\t\t( 路人 |\t\t\t        Rank:12 漏洞数:6        | ...)\t\t \n  好牛逼，跟你混了！    \n     2012-12-19 18:00 |    \t\t鬼魅羊羔 \t\t\t( 普通白帽子  |\t\t\t        Rank:299 漏洞数:42        | (#‵′)凸(#‵′)凸(#‵′)凸(#‵′)凸(#‵...)\t\t \n  我就木有马甲。。    \n     2013-01-02 20:02 |    \t\t小胖胖要减肥  \t\t\t( 普通白帽子  |\t\t\t        Rank:686 漏洞数:101        )\t\t \n  @心伤的瘦子 瘦子有除了二哥那个以外的ie8的exp么，反射型的主要不通用是个问题啊    \n     2013-01-03 09:03 |    \t\t心伤的瘦子 \t\t\t( 普通白帽子  |\t\t\t        Rank:147 漏洞数:21        | 严肃点~此号为虚拟小号，并不存在实体...)\t\t \n  @小胖胖要减肥 暂时没有发现    \n     2013-01-03 11:11 |    \t\t0x00de \t\t\t( 路人 |\t\t\t        Rank:8 漏洞数:6        | 一个二逼，2到家了的小白。)\t\t \n  快公开了    \n     2013-01-03 11:29 |    \t\tO.o \t\t\t( 普通白帽子  |\t\t\t        Rank:105 漏洞数:12        | ส็็็็็็็็็็็็็็็็็็็...)\t\t \n  快了~~~    \n     2013-01-05 13:33 |    \t\tse55i0n \t\t\t( 普通白帽子  |\t\t\t        Rank:1567 漏洞数:173        )\t\t \n  @心伤的瘦子 老湿呀，终于看到你的作品了~    \n     2013-01-05 19:01 |    \t\twhitepig \t\t\t( 路人 |\t\t\t        Rank:0 漏洞数:1        | I'm a big big pig ... big big pig)\t\t \n  可怜我是实习帽子~    \n     2013-01-09 20:52 |    \t\t李白 \t\t\t( 普通白帽子  |\t\t\t        Rank:142 漏洞数:29        )\t\t \n  啥时候能到实习帽子啊~    \n     2013-01-10 21:11 |    \t\tcnrstar \t\t\t( 普通白帽子  |\t\t\t        Rank:157 漏洞数:23        | Be my personal best!)\t\t \n  提醒：级别足够但是无法查看 Rank 高于自己的白帽子漏洞 ( 可以等待进一步公开或者支付 3 个乌云币提前查看    \n     2013-01-11 01:36 |    \t\tgainover  \t\t\t( 核心白帽子 |\t\t\t        Rank:1710 漏洞数:93        | PKAV技术宅社区! -- gainover| 工具猫网络-...)\t\t \n  @cnrstar = = 骚年。。努力赚点RANK吧    \n     2013-01-11 11:17 |    \t\tcnrstar \t\t\t( 普通白帽子  |\t\t\t        Rank:157 漏洞数:23        | Be my personal best!)\t\t \n  @gainover 我也发现了，太被动了，好久没提交过漏洞了    \n     2013-01-11 11:31 |    \t\tpx1624 \t\t\t( 普通白帽子  |\t\t\t        Rank:1036 漏洞数:175        | px1624)\t\t \n  @gainover 。。。和瘦子还差50rank。。。    \n     2013-01-27 14:22 |    \t\timlonghao \t\t\t( 普通白帽子  |\t\t\t        Rank:730 漏洞数:74        )\t\t \n  开始逐渐公开了！    \n     2013-02-08 17:43 |    \t\t猫头鹰 \t\t\t( 路人 |\t\t\t        Rank:29 漏洞数:6        | 不解释)\t\t \n  @百度百度！！！！！！！！！！！！！！！！！！！！！！！！！！    \n     2013-02-15 12:59 |    \t\tmole3o \t\t\t( 路人 |\t\t\t        Rank:10 漏洞数:2        | 学生一枚，青春向上的白帽子。)\t\t \n  学习了。    \n     2013-12-28 00:26 |    \t\tApxar \t\t\t( 路人 |\t\t\t        Rank:2 漏洞数:2        | 黑墙爱好者~)\t\t \n  感谢~楼主跟xx有深仇大恨？    \n     2014-07-28 09:05 |    \t\tpx1624 \t\t\t( 普通白帽子  |\t\t\t        Rank:1036 漏洞数:175        | px1624)\t\t \n   我们拿出的是一个什么都没过滤（其实还是有些转义的，主要没过滤< , >）的例子  这里啥有转义？    \n     2014-08-04 23:41 |    \t\t大风对我说 \t\t\t( 路人 |\t\t\t        Rank:6 漏洞数:2        | 酱油党)\t\t \n  @px1624 大神求指导    \n  \n\n\n", "wybug_level_fromcorp": "低", "wybug_rank_fromcorp": 5, "Ranks": null}