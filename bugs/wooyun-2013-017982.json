{"id": 14028, "wybug_id": "wooyun-2013-017982", "wybug_title": "浙江电信某应用服务器爆JBoss配置漏洞", "wybug_corp": "中国电信", "wybug_author": "白加黑", "wybug_date": "2013-01-28 11:39", "wybug_open_date": "2013-03-14 11:40", "wybug_type": "系统/服务运维配置不当", "wybug_level": "高", "wybug_rank_0": "12", "wybug_status": "已交由第三方合作机构(cncert国家互联网应急中心)处理", "wybug_from": "http://www.wooyun.org", "wybug_tags": ["浙江电信", "路由器"], "wybug_detail": "漏洞详情 披露状态：   \t\t\t\t\t\t\t\t\t2013-01-28：\t细节已通知厂商并且等待厂商处理中\t\t\t\t\t\t\t\t\t2013-02-01：\t厂商已经确认，细节仅向厂商公开\t\t\t\t\t\t\t\t\t2013-02-11：\t细节向核心白帽子及相关领域专家公开\t\t\t\t\t\t\t\t\t2013-02-21：\t细节向普通白帽子公开\t\t\t\t\t\t\t\t\t2013-03-03：\t细节向实习白帽子公开\t\t\t\t\t\t\t\t\t2013-03-14：\t细节向公众公开  简要描述： 中国电信浙江公司某应用服务器爆出jboss配置漏洞，可以通过 IP/jmx-console访问，并远程挂马。本人闲来无事时google hacking，无意间发现该IP存在此漏洞，而且此时已经被挂了两个马~~，果断截图，删马~~~ 详细说明：  JBOSS默认配置会有一个后台漏洞，漏洞发生在jboss.deployment命名空间中的addURL()函数,该函数可以远程下载一个war压缩包并解压   漏洞证明：  某人某日某时某分，闲来无事，google hacking（不上图了）某页某条找到http://60.190.245.146:8082/jmx-console/，遂访问之~\n\n在某条选项中打开，发现已经有人先我一步（痛恨死Ta了）\n\n虽然成就感全无，但咱还是正义一把，把漏洞提交了吧，以免后患~~~\n\nJSP马已经上去了，具体能做什么，这个我就不再赘述了   修复方案：  先把别人挂的马删了（我已经代删）临时漏洞修补办法：给jmx-console加上访问密码1.在 ${jboss.server.home.dir}/deploy下面找到jmx-console.war目录编辑WEB-INF/web.xml文件 去掉 security-constraint 块的注释，使其起作用2.编辑WEB-INF/classes/jmx-console-users.properties或server/default/conf/props/jmx-console-users.properties (version >=4.0.2)和 WEB-INF/classes/jmx-console-roles.properties或server/default/conf/props/jmx-console-roles.properties(version >=4.0.2) 添加用户名密码3.编辑WEB-INF/jboss-web.xml去掉 security-domain 块的注释 ，security-domain值的映射文件为 login-config.xml （该文件定义了登录授权方式）   版权声明：转载请注明来源 白加黑@乌云\n ", "wybug_reply": "漏洞回应  厂商回应： 危害等级：中 漏洞Rank：10  确认时间：2013-02-01 00:28 厂商回复： 至31日，近几日测试均未复现，疑网站管理方已经关闭或着手在修复。根据图片可确认白帽子即时测试结果有效，按同类型漏洞进行参考评分，rank 10 最新状态： 暂无  ", "replys": "漏洞评价：\n评论\n     2013-01-28 11:46 |    \t\tLeadUrLife \t\t\t( 普通白帽子  |\t\t\t        Rank:103 漏洞数:14        | 好好学习 天天向上)\t\t \n  过来围观下这路由器jboss配置漏洞    \n     2013-01-28 11:47 |    \t\tO.o \t\t\t( 普通白帽子  |\t\t\t        Rank:105 漏洞数:12        | ส็็็็็็็็็็็็็็็็็็็...)\t\t \n  电信万人X啊    \n     2013-01-28 11:53 |    \t\txsser  \t\t\t( 普通白帽子  |\t\t\t        Rank:254 漏洞数:18        | 当我又回首一切,这个世界会好吗?)\t\t \n  @LeadUrLife 写错了吧    \n     2013-01-28 13:40 |    \t\tLeadUrLife \t\t\t( 普通白帽子  |\t\t\t        Rank:103 漏洞数:14        | 好好学习 天天向上)\t\t \n  @xsser 记得上午看到描述是“路由器jboss配置漏洞”，好奇之。难不成是我眼花了：）    \n     2013-01-28 15:17 |    \t\t白加黑 \t\t\t( 路人 |\t\t\t        Rank:20 漏洞数:8        )\t\t \n  @LeadUrLife 起初写的是路由器，可惜后来想想可能是路由器的端口映射，所以低调了一下，把路由器改成了应用服务器，哈哈，你怎么这么快就看到了啊？    \n     2013-01-28 17:34 |    \t\tLeadUrLife \t\t\t( 普通白帽子  |\t\t\t        Rank:103 漏洞数:14        | 好好学习 天天向上)\t\t \n  @白加黑 哈哈，原来如此啊 ：） 我本来是想看看电信是如何在路由器上配置jboss的     \n     2013-01-28 18:04 |    \t\txsser  \t\t\t( 普通白帽子  |\t\t\t        Rank:254 漏洞数:18        | 当我又回首一切,这个世界会好吗?)\t\t \n  @白加黑 麻痹的 是我改的    \n     2013-01-28 18:51 |    \t\tO.o \t\t\t( 普通白帽子  |\t\t\t        Rank:105 漏洞数:12        | ส็็็็็็็็็็็็็็็็็็็...)\t\t \n  @xsser =。=||    \n     2013-01-28 23:25 |    \t\t白加黑 \t\t\t( 路人 |\t\t\t        Rank:20 漏洞数:8        )\t\t \n  @xsser 什么情况？其实我应该把那张nmap图上上来让大家看看~~    \n  \n\n\n", "wybug_level_fromcorp": "中", "wybug_rank_fromcorp": 10, "Ranks": null}