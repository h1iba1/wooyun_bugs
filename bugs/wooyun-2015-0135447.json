{"id": 65541, "wybug_id": "wooyun-2015-0135447", "wybug_title": "警惕社交软件缺陷导致个人精确位置泄漏(美丽约任意用户精确定位)", "wybug_corp": "miliyo.com", "wybug_author": "子非海绵宝宝", "wybug_date": "2015-08-20 10:45", "wybug_open_date": "2015-10-04 12:22", "wybug_type": "设计缺陷/逻辑错误", "wybug_level": "高", "wybug_rank_0": "20", "wybug_status": "厂商已经确认", "wybug_from": "http://www.wooyun.org", "wybug_tags": "", "wybug_detail": "漏洞详情 披露状态：   \t\t\t\t\t\t\t\t\t2015-08-20：\t细节已通知厂商并且等待厂商处理中\t\t\t\t\t\t\t\t\t2015-08-20：\t厂商已经确认，细节仅向厂商公开\t\t\t\t\t\t\t\t\t2015-08-30：\t细节向核心白帽子及相关领域专家公开\t\t\t\t\t\t\t\t\t2015-09-09：\t细节向普通白帽子公开\t\t\t\t\t\t\t\t\t2015-09-19：\t细节向实习白帽子公开\t\t\t\t\t\t\t\t\t2015-10-04：\t细节向公众公开  简要描述： 现在的社交app越来越多,但是绝大多都会有个通病,会导致个人位置被精确定位,几乎市面上80%的社交app均存在这个问题.并且根据app算法不同,有的app定位精确到1米.此问题并非常见漏洞,只能说是风险控制做的不到位.以后和妹纸在APP上约会你可以直接看到妹纸是不是在宾馆等你.... 详细说明：  首先我们来看下一般设计APP都会有的一个功能\n\n我们看到,这个妹纸距离我们248.28km离我们这么远,但是到到底在哪呢这个时候就不得不提到一个叫做三角定位的东西了下面看示意图\n\n红点代表妹子 绿点代表汉子绿点是我们可以控制的我们像系统给出绿点坐标 系统会计算出绿点与红点的距离并反馈给我们那么下面再看\n\n当我把绿点的X轴坐标进行改变的时候由于三角的特性绿点的x轴和红点的x轴差距越小两者之间的距离也就越小,y轴同理.当我们移动x轴过头的时间由于三角的特行距离会变长,那么我们就知道过头了美丽约提交自己的位置\nhttp://mapi.miliyo.com/locations/update?_ua=i|8.3|0|30|appstore|9c60933948973dfe894d119f719f6294|1125|2001|1|cn|7969d3f0d4dc0d8d711af82c6832bf1dcarrier=中国移动&latitude=x&longitude=y&network=2&status=1&using_city=连云港\n其中x y就对应上面我说的2个轴 其实就是经纬度坐标然后再通过访问对应用户的主页\nhttp://mapi.miliyo.com/home/index/?uid=48347109&_ua=i%7C8.3%7C1%7C30%7Cappstore%7C9c60933948973dfe894d119f719f6294%7C1125%7C2001%7C1%7Ccn%7C7969d3f0d4dc0d8d711af82c6832bf1d\n用正则匹配出距离信息一般一个用户精确定位需要20秒左右当然这个和app的算法有关系 有的能精确到1米,美丽约这个只能精确到10米...不过也算很精确了基本上摸到家门口是没什么问题的   漏洞证明：  ID:48347109这个妹纸的精确坐标是120.627871,31.366281\n\n   修复方案：  限制上传位置数据次数决绝快速移动   版权声明：转载请注明来源 子非海绵宝宝@乌云\n ", "wybug_reply": "漏洞回应  厂商回应： 危害等级：低 漏洞Rank：1  确认时间：2015-08-20 12:20 厂商回复： 微信，陌陌都是这样设计的，拿着手机移动一定距离，刷新附近的人，距离都会改变，如果要过一段时间才变，那才是bug。 最新状态： 暂无  ", "replys": "漏洞评价：\n评论\n     2015-08-20 10:45 |    \t\t疯狗  \t\t\t( 实习白帽子  |\t\t\t        Rank:44 漏洞数:2        | 阅尽天下漏洞，心中自然无码。)\t\t \n  今天私自约的都小心啊    \n     2015-08-20 10:51 |    \t\tTon7BrEak \t\t\t( 普通白帽子  |\t\t\t        Rank:211 漏洞数:43        | 吃苦耐劳，我只会第一个！)\t\t \n  @疯狗 单身狗汪汪汪···    \n     2015-08-20 10:57 |    \t\tM4sk \t\t\t( 普通白帽子  |\t\t\t        Rank:1199 漏洞数:319        | 国内信息安全任重而道远，还需要厂商和白帽...)\t\t \n  以后和妹纸在APP上约会你可以直接看到妹纸是不是在宾馆等你..    \n     2015-08-20 11:04 |    \t\t疯狗  \t\t\t( 实习白帽子  |\t\t\t        Rank:44 漏洞数:2        | 阅尽天下漏洞，心中自然无码。)\t\t \n  这玩意还能做个记录吧，统计一周妹纸晚上的去向    \n     2015-08-20 11:14 |    \t\tM4sk \t\t\t( 普通白帽子  |\t\t\t        Rank:1199 漏洞数:319        | 国内信息安全任重而道远，还需要厂商和白帽...)\t\t \n  @疯狗 狗哥这是要晚上....此处省略一万字    \n     2015-08-20 11:21 |    \t\t子非海绵宝宝  \t\t\t( 核心白帽子 |\t\t\t        Rank:1064 漏洞数:108        | 发扬海绵宝宝的精神!你不是海绵宝宝,你怎...)\t\t \n  @疯狗 完全可以做到行动轨迹的记录 可以知道他去哪 停留多长时间    \n     2015-08-20 12:18 |    \t\tBMa \t\t\t( 普通白帽子  |\t\t\t        Rank:1796 漏洞数:201        )\t\t \n  泄露了他们的GPS地址？确实很多app存在这个问题    \n     2015-08-20 12:29 |    \t\t子非海绵宝宝  \t\t\t( 核心白帽子 |\t\t\t        Rank:1064 漏洞数:108        | 发扬海绵宝宝的精神!你不是海绵宝宝,你怎...)\t\t \n  @三叉戟 所以说这个是风险问题  例如超过1KM你可以显示 如果小于1km你可以显示在附近或者其他什么 来规避这种风险    \n     2015-08-20 14:48 |    \t\tComer \t\t\t( 普通白帽子  |\t\t\t        Rank:336 漏洞数:40        | 关注安全 | 关注智能漏洞挖掘)\t\t \n  三点定位？ 话说现在玩这些社交app的各种目的不纯。约p只是表像，诈骗/拐卖/贩卖器官，不开玩笑...这点的确需要从产品设计上去避免    \n     2015-08-22 23:31 |    \t\t提莫 \t\t\t( 普通白帽子  |\t\t\t        Rank:102 漏洞数:8        | 五杀提莫)\t\t \n  以后和妹纸在APP上约会你可以直接看到妹纸是不是在宾馆等你..    \n  \n\n\n", "wybug_level_fromcorp": "低", "wybug_rank_fromcorp": 1, "Ranks": null}