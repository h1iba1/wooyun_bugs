{"id": 85529, "wybug_id": "wooyun-2016-0172107", "wybug_title": "慧评网某处配置不当导致敏感信息泄露（近10W家酒店信息泄露）", "wybug_corp": "慧评网", "wybug_author": "niliu", "wybug_date": "2016-01-25 08:48", "wybug_open_date": "2016-03-08 21:29", "wybug_type": "系统/服务运维配置不当", "wybug_level": "高", "wybug_rank_0": "20", "wybug_status": "厂商已经确认", "wybug_from": "http://www.wooyun.org", "wybug_tags": ["敏感信息泄漏", "默认配置不当"], "wybug_detail": "漏洞详情 披露状态：   \t\t\t\t\t\t\t\t\t2016-01-25：\t细节已通知厂商并且等待厂商处理中\t\t\t\t\t\t\t\t\t2016-01-25：\t厂商已经确认，细节仅向厂商公开\t\t\t\t\t\t\t\t\t2016-02-04：\t细节向核心白帽子及相关领域专家公开\t\t\t\t\t\t\t\t\t2016-02-14：\t细节向普通白帽子公开\t\t\t\t\t\t\t\t\t2016-02-24：\t细节向实习白帽子公开\t\t\t\t\t\t\t\t\t2016-03-08：\t细节向公众公开  简要描述： 直接导致所有酒店账号密码泄露，涉及全国近10W家酒店数据信息泄露。 详细说明：  漏洞厂商：众芸 酒店智慧\nhttp://www.brandwisdom.cn\n上海益商网络科技有限公司版权所有通过漏洞可直接获取所有酒店账号密码 3W+可管理全国各地酒店近10W家可控内容包括酒店声誉管理，运营质检，收益管理，酒店名片，以及对集团下所有酒店管理\n\n   漏洞证明：  漏洞是通过一个mongodb未授权访问导致mysql数据库，邮箱等配置信息泄露\n42.62.79.115  27017  /* 0 */{    \"_id\" : ObjectId(\"55b58cc2a23488107c0e8445\"),    \"name\" : \"analyzer_url\",    \"account\" : {        \"socketTimeout\" : \"300000\",        \"connectTimeout\" : \"300000\",        \"reviewKey\" : \"Review\",        \"url\" : \"http://10.6.26.83:8088/analysis/aspect\"    },    \"description\" : \"分析服务url\"}/* 1 */{    \"_id\" : ObjectId(\"55b58ceda2348812406ba075\"),    \"name\" : \"bw_analysis_test\",    \"account\" : {        \"userName\" : \"bw_ana***is_test\",        \"accessToken\" : \"6bdb48￥￥￥10941681b76f1533265248\",        \"socketTimeout\" : \"300000\",        \"connectTimeout\" : \"300000\",        \"APIUrl\" : \"https://10.6.12.152/apis/h_reviews_infos/analysis\"    },    \"description\" : \"API提交统计账户\"}/* 2 */{    \"_id\" : ObjectId(\"55b58d1***4880f28a3fa77\"),    \"name\" : \"email_warning\",    \"account\" : {        \"emailTitle\" : \"storm分析程序预警邮件\",        \"receiver\" : \"ynli@jointwisdom.cn,lcheng@jointwisdom.cn\",        \"socketTimeout\" : \"300000\",        \"connectTimeout\" : \"300000\",        \"APIUrl\" : \"http://42.****/WarningEmail/\"    },    \"description\" : \"预警邮件账户\"}/* 3 */{    \"_id\" : ObjectId(\"55b6e12aa2348814fc0a4cd2\"),    \"name\" : \"mysql_config\",    \"account\" : {        \"driverName\" : \"com.mysql.jdbc.Driver\",        \"userName\" : \"bwprogram\",        \"accessToken\" : \"mys****r\",        \"maxActive\" : \"40\",        \"maxIdle\" : \"5\",        \"url\" : \"jdbc:mysql://42.62.79.115:4040/bw_hotel?useUnicode=true&characterEncoding=utf-8\"    },    \"description\" : \"mysql配置账户\"}\nmysql数据库允许外连直接导致多个数据库数据泄露\n\n得到数据库配置信息\n\n3W+账号密码\n\n涉及酒店近10W家\n\n随便登陆一个橘子酒店的测试下\n\n同时可对集团下所有酒店进行管理，数据分析\n\n\n\n这样基本涵盖了大部分酒店了。。。   修复方案：  mongodb访问控制Mysql密码修改，禁止外连   版权声明：转载请注明来源 niliu@乌云\n ", "wybug_reply": "漏洞回应  厂商回应： 危害等级：高 漏洞Rank：20  确认时间：2016-01-25 09:43 厂商回复： 给个联系方式吧！ 最新状态： 暂无  ", "replys": "漏洞评价：\n评价\n     2016-01-25 10:06 |    \t\tniliu  \t\t\t( 核心白帽子 |\t\t\t        Rank:1623 漏洞数:218        | 逆流而上)\t\t \n  @慧评网 已私信QQ~    \n  \n\n\n", "wybug_level_fromcorp": "高", "wybug_rank_fromcorp": 20, "Ranks": null}