{"id": 25248, "wybug_id": "wooyun-2015-0132205", "wybug_title": "SAE并发请求导致未实名账号创建云应用数量限制被突破", "wybug_corp": "新浪", "wybug_author": "我是小号", "wybug_date": "2015-08-07 10:25", "wybug_open_date": "2015-09-26 10:02", "wybug_type": "设计缺陷/逻辑错误", "wybug_level": "中", "wybug_rank_0": "6", "wybug_status": "厂商已经确认", "wybug_from": "http://www.wooyun.org", "wybug_tags": ["逻辑错误", "设计不当"], "wybug_detail": "漏洞详情 披露状态：   \t\t\t\t\t\t\t\t\t2015-08-07：\t细节已通知厂商并且等待厂商处理中\t\t\t\t\t\t\t\t\t2015-08-12：\t厂商已经确认，细节仅向厂商公开\t\t\t\t\t\t\t\t\t2015-08-22：\t细节向核心白帽子及相关领域专家公开\t\t\t\t\t\t\t\t\t2015-09-01：\t细节向普通白帽子公开\t\t\t\t\t\t\t\t\t2015-09-11：\t细节向实习白帽子公开\t\t\t\t\t\t\t\t\t2015-09-26：\t细节向公众公开  简要描述： SAE并发请求导致未实名账号创建云应用数量限制被突破（可能可以消耗SAE云资源） 详细说明：  起因是某天晚上着急创建一个新的SAE云应用（这个时候我已经有一个SAE云应用），进入创建应用界面后\nhttp://sae.sina.com.cn/?m=apps&a=create\n按照正常流程填写完了基本的应用资料，接着我非常愉快的点击“创建”，就在这个时候，我的网好像卡了，迟迟不跳转到SAE的首页去，于是我非常不耐烦的再次点击了“创建应用”跳转回SAE平台首页后神奇的事情发生了，SAE竟然给我创建了两个应用名和域名相同的应用，于是我删了其中一个，然后就神奇的发现，我竟然能创建第三个SAE云应用了。乌云上也曾有过并发请求导致业务处理异常的介绍和实例：http://drops.wooyun.org/papers/831 WooYun: 乌云某处刷人民币漏洞成功套现 所以，猜测在SAE创建云应用的简化下来流程是（当然实际情况肯定比这个复杂）：\n\nSAE在创建云应用的时候出现的卡顿是SAE后台正在给我新建的应用分配云端资源，这个时候并没有更新计数器，而我在分配资源的时候又发起了一起分配资源的请求，导致云端创建了两个相同的云应用，这时候分配资源的流程走完，服务器后端开始更新云应用的计数器，因为并发请求导致这个时候计数器只+1。所以当我返回SAE首页删掉一个重复的应用时，计数器被-1，也就是说SAE以为现在我只有一个云应用（其实我已经拥有两个云应用了），导致我可以再创建一个云应用。   漏洞证明：  从SAE应用列表可以看出我目前实际上拥有3个SAE云应用，再次创建一个新的应用，就会提示未实名的用户之恩那个创建2个，所以多出来的那一个就是因为并发请求实现的\n\n漏洞利用的话，如果未实名的用户这么干，数量多的话，可以消耗SAE云资源。   修复方案：  用下面这样的逻辑就应该不会有问题了\n\n   版权声明：转载请注明来源 我是小号@乌云\n ", "wybug_reply": "漏洞回应  厂商回应： 危害等级：低 漏洞Rank：3  确认时间：2015-08-12 10:01 厂商回复： 感谢对新浪安全的支持，已经通知业务整改 最新状态： 暂无  ", "replys": "漏洞评价：\n评论\n     2015-08-07 10:39 |    \t\t浮萍 \t\t\t( 普通白帽子  |\t\t\t        Rank:555 漏洞数:118        | 默默潜水)\t\t \n  并发    \n  \n\n\n", "wybug_level_fromcorp": "低", "wybug_rank_fromcorp": 3, "Ranks": null}