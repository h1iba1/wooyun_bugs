{"id": 733, "wybug_id": "wooyun-2014-074224", "wybug_title": "利用QQ空间黄钻被挡访客获取网站访客QQ号码", "wybug_corp": "腾讯", "wybug_author": "路人甲", "wybug_date": "2014-08-29 10:42", "wybug_open_date": "2014-10-13 10:46", "wybug_type": "xss跨站脚本攻击", "wybug_level": "中", "wybug_rank_0": "7", "wybug_status": "厂商已经确认", "wybug_from": "http://www.wooyun.org", "wybug_tags": ["空间"], "wybug_detail": "漏洞详情 披露状态：   \t\t\t\t\t\t\t\t\t2014-08-29：\t细节已通知厂商并且等待厂商处理中\t\t\t\t\t\t\t\t\t2014-09-01：\t厂商已经确认，细节仅向厂商公开\t\t\t\t\t\t\t\t\t2014-09-11：\t细节向核心白帽子及相关领域专家公开\t\t\t\t\t\t\t\t\t2014-09-21：\t细节向普通白帽子公开\t\t\t\t\t\t\t\t\t2014-10-01：\t细节向实习白帽子公开\t\t\t\t\t\t\t\t\t2014-10-13：\t细节向公众公开  简要描述： 过去的一段时间，获取QQ号码大多数接口已经被封，这是最新的了。严重侵犯用户隐私。 详细说明：  原理很简单：访问网站后，首先用js判断qq是否登录，确定登录后，在iframe里加载qq父母论坛或者其他qq旗下的论坛。论坛帖子里早就发表了一篇回复，包含代码:\n[img=http://***.qzone.qq.com]\n因为QQ空间是无法嵌入iframe的，也qq以外的域名也无法使用img。所以使用了qq旗下的网站。最后使用php获取被挡访客号码。   漏洞证明：  \n\n   修复方案：  腾讯旗下网站禁止被嵌入iframe即可。   版权声明：转载请注明来源 路人甲@乌云\n ", "wybug_reply": "漏洞回应  厂商回应： 危害等级：低 漏洞Rank：5  确认时间：2014-09-01 10:18 厂商回复： 非常感谢您的报告，问题已着手处理，感谢大家对腾讯业务安全的关注。如果您有任何疑问，欢迎反馈，我们会有专人跟进处理。 最新状态： 暂无  ", "replys": "漏洞评价：\n评论\n     2014-09-01 10:53 |    \t\t命运 \t\t\t( 路人 |\t\t\t        Rank:2 漏洞数:1        | 我是来乌云秀智商下限的~~)\t\t \n  hao yd de silu    \n     2014-09-02 13:42 |    \t\t落叶 \t\t\t( 路人 |\t\t\t        Rank:1 漏洞数:2        | xxxx)\t\t \n  又一个2B ..    \n     2014-09-02 15:41 |    \t\tAofa \t\t\t( 路人 |\t\t\t        Rank:0 漏洞数:1        | check it out yo)\t\t \n  目测是这个论坛：http://mama.kid.qq.com/t-16555-1.htm在回帖里面添加一个图片，图片地址写QQ空间的地址。目标网址加载这个论坛网址时，会加载QQ空间，QQ空间开通黄钻，并设置为禁止所有人访问。服务器php写一段获取QQ空间黄钻访客获取的代码即可提取出来。黄钻被挡访客地址：http://g.qzone.qq.com/cgi-bin/friendshow/cgi_get_visitor_simple?uin=123456&mask=2&clear=1&mod=8&fupdate=1&random=0.06438945889024505&g_tk=330841729论坛上面的img代码<img id=\"aimg_k50kU\" onclick=\"zoom(this, this.src, 0, 0, 0)\" class=\"zoom\" src=\"http://user.qzone.qq.com/2424169162\" onmouseover=\"img_onmouseoverfunc(this)\" onload=\"thumbImg(this)\" alt=\"\" border=\"0\">    \n     2014-10-13 10:54 |    \t\txx123 \t\t\t( 路人 |\t\t\t        Rank:1 漏洞数:1        | 雷锋)\t\t \n  我擦，这个还算个漏洞啊。。一年前我就看到了    \n     2015-06-04 18:06 |    \t\t昌维 \t\t\t( 路人 |\t\t\t        Rank:2 漏洞数:3        | QQ：867597730，百度贴吧ID：昌维001)\t\t \n  这也能叫漏洞啊？而且这漏洞分类也搞错了吧这应该是属于点击劫持啊！    \n  \n\n\n", "wybug_level_fromcorp": "低", "wybug_rank_fromcorp": 5, "Ranks": null}