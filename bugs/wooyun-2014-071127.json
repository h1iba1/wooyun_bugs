{"id": 52471, "wybug_id": "wooyun-2014-071127", "wybug_title": "某高校内网多台服务器权限、大量用户数据泄露隐患", "wybug_corp": "某大学", "wybug_author": "iaalm", "wybug_date": "2014-08-05 17:11", "wybug_open_date": "2014-09-19 17:12", "wybug_type": "成功的入侵事件", "wybug_level": "高", "wybug_rank_0": "15", "wybug_status": "已交由第三方合作机构(CCERT教育网应急响应组)处理", "wybug_from": "http://www.wooyun.org", "wybug_tags": ["安全意识不足"], "wybug_detail": "漏洞详情 披露状态：   \t\t\t\t\t\t\t\t\t2014-08-05：\t细节已通知厂商并且等待厂商处理中\t\t\t\t\t\t\t\t\t2014-08-08：\t厂商已经确认，细节仅向厂商公开\t\t\t\t\t\t\t\t\t2014-08-18：\t细节向核心白帽子及相关领域专家公开\t\t\t\t\t\t\t\t\t2014-08-28：\t细节向普通白帽子公开\t\t\t\t\t\t\t\t\t2014-09-07：\t细节向实习白帽子公开\t\t\t\t\t\t\t\t\t2014-09-19：\t细节向公众公开  简要描述： 一台服务器MySQL弱密码，导致多个系统被破解，大量用户数据泄露 详细说明：  一台服务器（xk2.***.edu.cn）mysql的root用户密码为空，且允许远程登陆，登录之后没什么有用的数据，看起来是一个实验性或者临时性的站点，当时通过UDF提权（这个网上遍地都是），可以获得操作系统权限。系统中有不少ssh和rdp自动保存的密码，虽然都有编码，但是网上都可以找到方法破解，因而获得了大约5台服务器和交换机的登录权限，大多是root其中有三台是学校网关的服务器，通过看网关系统的源代码，可以获得数据库的连接字符串主动连接数据库，发现其中保存了全校网关系统的用户名，密码，余额，身份证号等信息，其中密码是明文和MD5密文都保存的（不知道都保存时什么心态。。。），而且没有加salt，因为学校使用的是统一身份认证，这套用户名密码可以进很多系统，包括邮件系统。能进入邮箱能做的事情就太多了，随便看一些老师、领导的邮件，就可以获取到各种重要的信息。这些重要信息包括，学校一些中重要的设备的登录用户名密码，网络拓扑图等。   漏洞证明：  数据库连接后的数据，很多数据不是网关系统必须的，都集中存放在这里\n\n一些\n\n网络拓扑图\n\n想想看全校数万学生加教职工，而且很多老师帮公用的就是这个邮箱，想想看能泄露的信息由多么多！   修复方案：  首先是密码密文存放，最好加salt各个应用系统之间尽量分开，在同一台服务器上，也应该使用不同的身份认证，不要多个系统共用一套表虽然远程的数据库连接不可避免，但是应当对接入的Ip进行严格的过滤从入侵后的成果来看，学校里个关键系统的密码都还是挺强的，但是，很多人直接把密码存放在了电脑或者邮箱里，或者保存在一些非常容易被破解的地方（比如rdp文件），这就产生了非常严重的漏洞需要一些入侵检测的机制最重要的一句话，明文或弱编码保存密码害死人阿   版权声明：转载请注明来源 iaalm@乌云\n ", "wybug_reply": "漏洞回应  厂商回应： 危害等级：高 漏洞Rank：15  确认时间：2014-08-08 10:18 厂商回复： 正在通知相关学校处理 最新状态： 暂无  ", "replys": "漏洞评价：\n评论\n     2015-03-02 18:29 |    \t\tBeenQuiver \t\t\t( 普通白帽子  |\t\t\t        Rank:101 漏洞数:26        | 专注而高效，坚持好的习惯千万不要放弃)\t\t \n  网络拓扑图你自己画的吗？    \n  \n\n\n", "wybug_level_fromcorp": "高", "wybug_rank_fromcorp": 15, "Ranks": null}