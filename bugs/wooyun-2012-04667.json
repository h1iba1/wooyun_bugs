{"id": 21299, "wybug_id": "wooyun-2012-04667", "wybug_title": "人人网照片评论的表结构泄漏", "wybug_corp": "人人网", "wybug_author": "ch0psticks", "wybug_date": "2012-02-20 13:28", "wybug_open_date": "2012-02-25 13:29", "wybug_type": "敏感信息泄露", "wybug_level": "低", "wybug_rank_0": "5", "wybug_status": "漏洞已经通知厂商但是厂商忽略漏洞", "wybug_from": "http://www.wooyun.org", "wybug_tags": "", "wybug_detail": "漏洞详情 披露状态：   \t\t\t\t\t\t\t\t\t2012-02-20：\t细节已通知厂商并且等待厂商处理中\t\t\t\t\t\t\t\t\t2012-02-25：\t厂商已经主动忽略漏洞，细节向公众公开  简要描述： 用户评论照片时，输入特定字符可导致服务器返回未经处理的异常信息，其中包括数据库中相关表结构 详细说明：  在评论照片时，mac osx下safari中，输入mac自带表情符号时，导致服务器返回异常信息，其中包括了图片评论的表结构，具体如下：\nPreparedStatementCallback; uncategorized SQLException for SQL [insert into photo_comment_39(id, owner, photo, author, name, head_url, body, time) values (?, ?, ?, ?, ?, ?, ?, ?)]; SQL state [HY000]; error code [1366]; Incorrect string value: '\\xF0\\x9F\\x98\\x84\\xE5\\x93...' for column 'body' at row 1; nested exception is java.sql.SQLException: Incorrect string value: '\\xF0\\x9F\\x98\\x84\\xE5\\x93...' for column 'body' at row 1\n   漏洞证明：  \n\n   修复方案：  对异常信息就行处理，或修改表的定义，支持mac输入法自带的表情符号等字符   版权声明：转载请注明来源 ch0psticks@乌云\n ", "wybug_reply": "漏洞回应  厂商回应： 危害等级：无影响厂商忽略 忽略时间：2012-02-25 13:29 厂商回复：  最新状态： 暂无  ", "replys": "漏洞评价：\n评论\n     2012-02-20 13:32 |    \t\tshine  \t\t\t( 普通白帽子  |\t\t\t        Rank:831 漏洞数:77        | coder)\t\t \n  标题 + 漏洞类型,读懂意思了！^_^    \n     2012-02-20 14:03 |    \t\t凤凰 \t\t\t( 路人 |\t\t\t        Rank:15 漏洞数:6        | 涅磐)\t\t \n  @shine 请教：appscan有时候会扫描出高危漏洞“数据库错误消息”，请问如何修复呢？谢谢！    \n     2012-02-20 14:14 |    \t\tshine  \t\t\t( 普通白帽子  |\t\t\t        Rank:831 漏洞数:77        | coder)\t\t \n  @凤凰 想问一下：这句话，是说appscan自身问题？还是指数据库问题？    \n     2012-02-20 14:30 |    \t\tshine  \t\t\t( 普通白帽子  |\t\t\t        Rank:831 漏洞数:77        | coder)\t\t \n  @shine 如果是上面两种情况，我基本无法修复（也不了解你所述场景）；如果是说所部署的应用，使用appscan扫描出暴露数据库错误信息（工具评级只能作为参考吧！主要靠自己评估一下该漏洞是否影响到正常业务应用。如果影响不大，可以使用异常机制来忽略掉，避免体验及信息泄露。）。；再其他方面的理解，我还没想到..    \n     2012-02-20 15:19 |    \t\txsser  \t\t\t( 普通白帽子  |\t\t\t        Rank:254 漏洞数:18        | 当我又回首一切,这个世界会好吗?)\t\t \n  楼上你@ 错了    \n     2012-02-20 15:22 |    \t\tshine  \t\t\t( 普通白帽子  |\t\t\t        Rank:831 漏洞数:77        | coder)\t\t \n  @xsser 求指引！    \n     2012-02-20 15:31 |    \t\tshine  \t\t\t( 普通白帽子  |\t\t\t        Rank:831 漏洞数:77        | coder)\t\t \n  @xsser 没有贬低tools在实际测试之中价值的意思，主要是想说根本原因在于应用实现的代码质量问题！    \n     2012-02-20 15:34 |    \t\txsser  \t\t\t( 普通白帽子  |\t\t\t        Rank:254 漏洞数:18        | 当我又回首一切,这个世界会好吗?)\t\t \n  不是 我是说你用@ 功能的时候 @ 到你自己了～～    \n     2012-02-20 15:36 |    \t\tshine  \t\t\t( 普通白帽子  |\t\t\t        Rank:831 漏洞数:77        | coder)\t\t \n  @xsser 哈哈！我这是对我自己补充的说明！如必要，可以在回复中去掉对自己的“回复”的功能！    \n     2012-02-20 15:38 |    \t\tshine  \t\t\t( 普通白帽子  |\t\t\t        Rank:831 漏洞数:77        | coder)\t\t \n  @xsser 谢谢提醒！    \n     2012-02-20 16:55 |    \t\t凤凰 \t\t\t( 路人 |\t\t\t        Rank:15 漏洞数:6        | 涅磐)\t\t \n  @shine 嗯，我就是指部署的应用被扫除了暴露数据库错误信息。异常机制是指应用本身的吧？数据库方面应该没什么可以做的吧？谢谢同@xsser    \n     2012-02-20 17:24 |    \t\tshine  \t\t\t( 普通白帽子  |\t\t\t        Rank:831 漏洞数:77        | coder)\t\t \n  @凤凰 我不知道这些“数据库错误信息”具体指是什么，能举例部分内容看看不？如果仅是工具结果显示为高危而应用本身没什么问题而言，所有扫描的规则都是appscan制定的（安全漏洞评级的统一规范还没跟上的结果，每个公司都可能有自己的一套标准，这也是个问题！）。如果是敏感信息显示在页面影响的应用安全，可以应用本身做些处理，没有安全绝对嘛！可能你太在乎工具扫描给出的结果了！具体信息不明，不好随便发言！有时间再交流！^-^    \n  \n\n\n", "wybug_level_fromcorp": "无影响厂商忽略", "wybug_rank_fromcorp": 0, "Ranks": null}