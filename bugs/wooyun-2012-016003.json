{"id": 14903, "wybug_id": "wooyun-2012-016003", "wybug_title": "[腾讯实例教程] 那些年我们一起学XSS - 6. 换行符复仇记", "wybug_corp": "腾讯", "wybug_author": "心伤的瘦子", "wybug_date": "2012-12-14 11:19", "wybug_open_date": "2013-01-28 11:20", "wybug_type": "xss跨站脚本攻击", "wybug_level": "低", "wybug_rank_0": "1", "wybug_status": "厂商已经确认", "wybug_from": "http://www.wooyun.org", "wybug_tags": ["反射型", "利用技巧"], "wybug_detail": "漏洞详情 披露状态：   \t\t\t\t\t\t\t\t\t2012-12-14：\t细节已通知厂商并且等待厂商处理中\t\t\t\t\t\t\t\t\t2012-12-17：\t厂商已经确认，细节仅向厂商公开\t\t\t\t\t\t\t\t\t2012-12-27：\t细节向核心白帽子及相关领域专家公开\t\t\t\t\t\t\t\t\t2013-01-06：\t细节向普通白帽子公开\t\t\t\t\t\t\t\t\t2013-01-16：\t细节向实习白帽子公开\t\t\t\t\t\t\t\t\t2013-01-28：\t细节向公众公开  简要描述： 还是在<script>之间的场景，某些情况下，我们仅仅需要的只是一个换行符，就可以绕过过滤了。 它让双引号，尖括号知道了“它们不是一个符号在战斗”。 详细说明：  1.实际场景是下面这个例子。\nhttp://datalib.games.qq.com/cgi-bin/search?libid=178&FilterAttrAND=3602&FilterValueAND=aaaaaaaaaa\n对应的，我们可以看到我们的输入aaaaaaaaa 会在页面的哪些输出点出现呢？\n\n2. 不错，一共有5处，有在HTML标签之间的（教程1），也有在<script>..</script>之间的。但是呢，该过滤的，< , > 过滤掉了， 该过滤的 \" ，也过滤掉了。。\n\n3. 也就是说传统的已经不行啦，我们继续看5处的其他地方。呀，竟然还有一大段注释里，也出现了我们的【输出】\n\n4. 嗯，这样一来，是否会想到这样一个用法呢？\n//我是注释，我爱洗澡，哦～哦～哦～ [我是输出]\n如果可以使用换行符的话。\n//我是注释，我爱洗澡，哦～哦～哦～ [我是输出  换行符 alert(1);//我是输出]\n这样alert(1); 就会被成功执行。5. 恩，带着这样一个想法，我们不难构造出以下利用。\nhttp://datalib.games.qq.com/cgi-bin/search?libid=178&FilterAttrAND=3602&FilterValueAND=%0aalert(1);//\n看下输出。嘿，果然没过滤。\n\n6. 这样，这一次我们的换行符立功了， 它不是一个符号在战斗！   漏洞证明：  \n\n   修复方案：  尽量不要在JS的注释里输出内容。还挺危险的。   版权声明：转载请注明来源 心伤的瘦子@乌云\n ", "wybug_reply": "漏洞回应  厂商回应： 危害等级：低 漏洞Rank：5  确认时间：2012-12-17 15:02 厂商回复： 非常感谢您的报告。这个问题我们已经确认，正在与业务部门进行沟通制定解决方案。如有任何新的进展我们将会及时同步。 最新状态： 暂无  ", "replys": "漏洞评价：\n评论\n     2012-12-14 11:23 |    \t\t风萧萧  \t\t\t( 核心白帽子 |\t\t\t        Rank:1020 漏洞数:76        | 人这一辈子总要动真格的爱上什么人)\t\t \n  慢点来撒    \n     2012-12-14 11:24 |    \t\txsser  \t\t\t( 普通白帽子  |\t\t\t        Rank:254 漏洞数:18        | 当我又回首一切,这个世界会好吗?)\t\t \n  @风萧萧 这个月的头牌 一个爱疯估计能得到了    \n     2012-12-14 11:31 |    \t\t风萧萧  \t\t\t( 核心白帽子 |\t\t\t        Rank:1020 漏洞数:76        | 人这一辈子总要动真格的爱上什么人)\t\t \n  @xsser 靠，还以为是奥迪！    \n     2012-12-14 11:31 |    \t\t疯狗  \t\t\t( 实习白帽子  |\t\t\t        Rank:44 漏洞数:2        | 阅尽天下漏洞，心中自然无码。)\t\t \n  @风萧萧 迪奥    \n     2012-12-14 11:35 |    \t\tJannock  \t\t\t( 核心白帽子 |\t\t\t        Rank:2278 漏洞数:204        | 关注技术与网络安全（招人中，有兴趣请私信...)\t\t \n  迪奥    \n     2012-12-14 11:41 |    \t\t鬼魅羊羔 \t\t\t( 普通白帽子  |\t\t\t        Rank:299 漏洞数:42        | (#‵′)凸(#‵′)凸(#‵′)凸(#‵′)凸(#‵...)\t\t \n  各种复仇啊。。。屌丝的逆袭。。。    \n     2012-12-14 12:20 |    \t\t逝情 \t\t\t( 实习白帽子  |\t\t\t        Rank:36 漏洞数:11        | 自己选择的路，就算跪着也要走完~!)\t\t \n  目测会火~    \n     2012-12-14 12:30 |    \t\tD＆G \t\t\t( 普通白帽子  |\t\t\t        Rank:523 漏洞数:103        | going)\t\t \n  来晚了~    \n     2012-12-14 12:49 |    \t\t乌帽子 \t\t\t( 路人 |\t\t\t        Rank:29 漏洞数:3        | 学习黑客哪家强 | 中国山东找蓝翔 | sql...)\t\t \n  又出系列了    \n     2012-12-14 13:29 |    \t\t心伤的瘦子 \t\t\t( 普通白帽子  |\t\t\t        Rank:147 漏洞数:21        | 严肃点~此号为虚拟小号，并不存在实体...)\t\t \n  @鬼魅羊羔 是啊，可惜没女神可逆。    \n     2012-12-14 13:45 |    \t\t纷纭 \t\t\t( 路人 |\t\t\t        Rank:19 漏洞数:8        | 学习者。)\t\t \n  @风萧萧 碰到某个站过滤script这个字符都改成<d>script</d> 这样的，求助大神有什么办法？    \n     2012-12-14 14:00 |    \t\t纷纭 \t\t\t( 路人 |\t\t\t        Rank:19 漏洞数:8        | 学习者。)\t\t \n  @心伤的瘦子 碰到某个站过滤script这个字符都改成<d>script</d> 这样的，求助大神有什么办法？    \n     2013-01-16 22:07 |    \t\tHackPanda \t\t\t( 普通白帽子  |\t\t\t        Rank:113 漏洞数:15        | Talk is cheap,show me the shell.)\t\t \n  这个思路好NB- -膜拜了    \n     2013-01-19 15:07 |    \t\t蓝风 \t\t\t( 普通白帽子  |\t\t\t        Rank:125 漏洞数:25        | 崬汸慾哓 嗼檤焄垳皁 沓猵圊屾亾沬荖 颩憬...)\t\t \n  不科学啊，被注释了，变量怎么还有值    \n     2013-01-27 16:06 |    \t\ttheduyao \t\t\t( 路人 |\t\t\t        Rank:12 漏洞数:2        | I'm here!)\t\t \n  @蓝风 不科学啊，被注释了，变量怎么还有值 //什么情况啊    \n     2013-01-27 22:13 |    \t\tKaier \t\t\t( 路人 |\t\t\t        Rank:11 漏洞数:1        )\t\t \n  又一次被复仇。。。    \n     2013-02-17 14:13 |    \t\tsaber \t\t\t( 路人 |\t\t\t        Rank:8 漏洞数:2        | 我只是一个人走了太久，久到习惯了一个人。)\t\t \n  @蓝风 。。难道是忘了抹掉？    \n     2013-03-14 17:32 |    \t\tBlack World \t\t\t( 路人 |\t\t\t        Rank:0 漏洞数:1        | 无孔不入)\t\t \n  @蓝风 同理，求解释    \n     2013-05-19 22:21 |    \t\tAntBean \t\t\t( 路人 |\t\t\t        Rank:6 漏洞数:2        | 01d day)\t\t \n  这也行。。。    \n     2013-12-29 12:00 |    \t\tApxar \t\t\t( 路人 |\t\t\t        Rank:2 漏洞数:2        | 黑墙爱好者~)\t\t \n  牛X    \n  \n\n\n", "wybug_level_fromcorp": "低", "wybug_rank_fromcorp": 5, "Ranks": null}