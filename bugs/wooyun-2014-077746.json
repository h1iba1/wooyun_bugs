{"id": 50469, "wybug_id": "wooyun-2014-077746", "wybug_title": "TCL系列4：某分站SVN信息泄漏（包含多个DB连接密码）", "wybug_corp": "TCL官方网上商城", "wybug_author": "Eoh", "wybug_date": "2014-09-29 11:50", "wybug_open_date": "2014-11-13 11:54", "wybug_type": "系统/服务运维配置不当", "wybug_level": "高", "wybug_rank_0": "15", "wybug_status": "厂商已经确认", "wybug_from": "http://www.wooyun.org", "wybug_tags": "", "wybug_detail": "漏洞详情 披露状态：   \t\t\t\t\t\t\t\t\t2014-09-29：\t细节已通知厂商并且等待厂商处理中\t\t\t\t\t\t\t\t\t2014-09-29：\t厂商已经确认，细节仅向厂商公开\t\t\t\t\t\t\t\t\t2014-10-09：\t细节向核心白帽子及相关领域专家公开\t\t\t\t\t\t\t\t\t2014-10-19：\t细节向普通白帽子公开\t\t\t\t\t\t\t\t\t2014-10-29：\t细节向实习白帽子公开\t\t\t\t\t\t\t\t\t2014-11-13：\t细节向公众公开  简要描述：  详细说明：  整站源代码可查看，漫游内网就留给年轻人吧。   漏洞证明：  \nhttp://voice.tcl.com/.svn/entries.bowerrcpackage.jsonphpdoc.phpbower.json<dir> api/<dir> protected/index-dev.phpGruntfile.js.htaccessREADME.md...\n\nconst.php<?phpdefine(\"LIB_ASSETS_VERSION\", \"1.7.3\");define(\"MOBILE_ASSETS_VERSION\", \"8db87140bb12cfa1a524\");define(\"GAME_ASSETS_VERSION\", \"f0eb69319f6f92242342\");define(\"HEADLINE_ASSETS_VERSION\", \"623fb12ed50767ff7833\");define(\"MAIN_ASSETS_VERSION\", \"8f5c1ab1f112ccda57b0\");//define('UC_CONNECT', '');//define('UC_DBHOST', '10.4.22.74');//define('UC_DBUSER', 'testadmin');//define('UC_DBPW', '12345678');//define('UC_DBNAME', 't-fans-test');//define('UC_DBCHARSET', 'utf8');//define('UC_DBTABLEPRE', '`t-fans-test`.pre_ucenter_');//define('UC_DBCONNECT', '0');//define('UC_KEY', '111111');//define('UC_API', 'http://www.t-fans.net/uc_server');//define('UC_CHARSET', 'utf-8');//define('UC_IP', '');//define('UC_APPID', '4');//define('UC_PPP', '20');//define('UC_CONNECT', '');//define('UC_DBHOST', 'localhost');//define('UC_DBUSER', 'root');//define('UC_DBPW', 'root');//define('UC_DBNAME', 'ultrax');//define('UC_DBCHARSET', 'utf8');//define('UC_DBTABLEPRE', '`ultrax`.pre_ucenter_');//define('UC_DBCONNECT', '0');//define('UC_KEY', 'FrDqZWQvLwiuBlQo');//define('UC_API', 'http://192.168.1.110/dz/uc_server');//define('UC_CHARSET', 'utf-8');//define('UC_IP', '');//define('UC_APPID', '2');//define('UC_PPP', '20');//ONLINEdefine('UC_CONNECT', '');define('UC_DBHOST', '10.4.22.74');define('UC_DBUSER', 'tfans_admin');define('UC_DBPW', 'kuyu@123@adsl');define('UC_DBNAME', 't-fans');define('UC_DBCHARSET', 'utf8');define('UC_DBTABLEPRE', '`t-fans`.pre_ucenter_');define('UC_DBCONNECT', '0');define('UC_KEY', 'FrDqZWQvLwiuBlQo');define('UC_API', 'http://fans.tcl.com/uc_server');define('UC_CHARSET', 'utf-8');define('UC_IP', '');define('UC_APPID', '3');define('UC_PPP', '20');\n\nmain.php<?phprequire(dirname(__FILE__) . DIRECTORY_SEPARATOR . 'const.php');return array(\t'basePath' => dirname(__FILE__) . DIRECTORY_SEPARATOR . '..',\t'name' => '娱乐TV+ 中国好声音',\t'timeZone' => 'Asia/Chongqing',\t'language' => 'zh_cn',\t'preload' => array('log'),\t'import' => array(\t\t'application.models.*',\t\t'application.components.*',\t\t'application.helpers.*',\t\t'application.services.*',\t\t'zii.behaviors.CTimestampBehavior'\t),\t'modules' => array(\t\t'mobile' => array(\t\t\t'defaultController' => 'site'\t\t),\t\t'headline' => array(\t\t\t'defaultController' => 'site'\t\t),\t\t'wish' => array(\t\t\t'defaultController' => 'site'\t\t),\t\t'admin',\t\t'api'\t),\t'components' => array(\t\t'cache' => array(\t\t\t'class'=>'CMemCache',\t\t\t'servers'=>array(\t\t\t\tarray(\t\t\t\t\t'host' => '10.131.188.78',\t\t\t\t\t'port' => 11211,\t\t\t\t\t'weight' => 100,\t\t\t\t),\t\t\t),\t\t),\t\t'session' => array (\t\t\t\t'class'=> 'CCacheHttpSession',\t\t\t\t'cookieMode' => 'only',\t\t\t\t'timeout' => 3600*2\t\t),\t\t'db' => array(\t\t\t'connectionString' => 'mysql:host=10.131.188.78;dbname=voice',\t\t\t'emulatePrepare' => true,\t\t\t'username' => 'voice',\t\t\t'password' => 'FrDqZWQvLwiuBlQo',\t\t\t'charset' => 'utf8',\t\t\t'tablePrefix' => 'voice_'\t\t),\t\t'errorHandler' => array(\t\t\t'errorAction' => 'site/error',\t\t),\t\t'urlManager' => array(\t\t\t'class' => 'UrlManager',\t\t\t'urlFormat' => 'path',\t\t\t'showScriptName' => false,\t\t\t'matchValue' => true,\t\t\t'rules' => array(\t\t\t\t'/' => 'site/index',\t\t\t\t'/home' => 'site/want',\t\t\t\t'm' => 'mobile/site/index',\t\t\t\t'm/<controller:\\w+>' => 'mobile/<controller>/index',\t\t\t\t'm/<controller:\\w+>/<action:\\w+>' => 'mobile/<controller>/<action>'\t\t\t)\t\t),\t\t'log' => array(\t\t\t'class' => 'CLogRouter',\t\t\t'routes' => array(\t\t\t\tarray(\t\t\t\t\t'class' => 'CDbLogRoute',\t\t\t\t\t'levels' => join(', ', array(CLogger::LEVEL_ERROR, CLogger::LEVEL_WARNING)),\t\t\t\t\t'connectionID' => 'db',\t\t\t\t\t'filter' => 'CLogFilter',\t\t\t\t\t'autoCreateLogTable' => true,\t\t\t\t\t'logTableName' => 'voice_log'\t\t\t\t)\t\t\t),\t\t),\t\t'request' => array(\t\t\t'class' => 'Request'\t\t),\t\t'user' => array(\t\t\t'class' => 'WebUser',\t\t\t'allowAutoLogin' => true,\t\t\t'stateKeyPrefix'=> 'tuan_site',\t\t\t'returnUrl' => array('site/index'),\t\t\t'loginUrl' => array('user/login')\t\t)\t),\t'params' => array(\t\t'version' => '20140928',\t\t'keywords' => '',\t\t'description' => '',\t\t'defaultAvatar' => '',\t\t'changeMobile' => array(\t\t\t'' => 'm',\t\t\t'#star' => '/m/constellation',\t\t\t'#guess' => 'm/team',\t\t\t'#guess' => 'm/guess',\t\t\t'#poem' => 'm/poetry',\t\t\t'#draw' => 'm/draw',\t\t\t'dream/index' => 'm/dream/index',\t\t\t'dream' => 'm/dream',\t\t\t'user/index' => 'm/user/index',\t\t\t'user' => 'm/user',\t\t),\t\t'LINK_URL' => 'http://voice.tcl.com/site/redirect?url=http://shop.tcl.com',\t\t'CURRENT_RO' => '16',\t\t'QINIU'=>array(\t\t\t'AK'=>'5eKzSGsXWY3A6-nN5lSg5a-v2UIHcucs4WB4SRlJ',\t\t\t'SK'=>'3bT2RhA2LQ_xO61kNYbczJLe_6HVC9fgsazFE_2G',\t\t\t'BUCKET'=>'vassets'\t\t),\t\t'SCHOOL_VOTE'=>'2014-09-18 23:59:59'\t));\n\ndevelopment.php<?phpreturn CMap::mergeArray(require(dirname(__FILE__) . '/main.php'),\tarray(\t\t\t'components' => array(\t\t\t\t\t'cache' => null,\t\t\t\t\t'log' => null,\t\t\t),\t),\tarray(\t\t'modules' => array(\t\t\t'gii' => array(\t\t\t\t'class' => 'system.gii.GiiModule',\t\t\t\t'password' => '111111',\t\t\t\t'ipFilters' => array(\t\t\t\t\t'127.0.0.1',\t\t\t\t\t'::1'\t\t\t\t)\t\t\t)\t\t),\t\t'components' => array(\t\t\t'db' => array(\t\t\t\t'connectionString' => 'mysql:host=192.168.1.10;dbname=voice',\t\t\t\t'username' => 'root',\t\t\t\t'password' => '111111',\t\t\t\t'enableProfiling' => true,\t\t\t\t'enableParamLogging' => true,\t\t\t\t'tablePrefix'=>'voice_'\t\t\t),\t\t\t'cache' => array(\t\t\t\t'class'=>'CFileCache',\t\t\t\t/*'servers'=>array(\t\t\t\t\tarray(\t\t\t\t\t\t\t'host' => '192.168.1.10',\t\t\t\t\t\t\t'port' => 11211,\t\t\t\t\t\t\t'weight' => 100,\t\t\t\t\t),\t\t\t\t),*/\t\t\t),\t\t\t'log' => array(\t\t\t\t'class' => 'CLogRouter',\t\t\t\t'routes' => array(\t\t\t\t\tarray(\t\t\t\t\t\t'class' => 'CFileLogRoute',\t\t\t\t\t\t'filter' => 'CLogFilter',\t\t\t\t\t\t'levels' => join(', ', array(CLogger::LEVEL_ERROR, CLogger::LEVEL_WARNING, CLogger::LEVEL_INFO)),\t\t\t\t\t),\t\t\t\t)\t\t\t)\t\t)\t));\n\nconsole.php<?php// This is the configuration for yiic console application.// Any writable CConsoleApplication properties can be configured here.return array(\t'basePath' => dirname(__FILE__) . DIRECTORY_SEPARATOR . '..',\t'name' => 'My Console Application',\t// preloading 'log' component\t'preload' => array('log'),\t'import' => array(\t\t'application.models.*',\t\t'application.components.*',\t\t'application.services.*'\t),\t// application components\t'components' => array(\t\t'db' => array(\t\t\t'connectionString' => 'mysql:host=localhost;dbname=voice',\t\t\t'emulatePrepare' => true,\t\t\t'username' => 'voice',\t\t\t'password' => 'FrDqZWQvLwiuBlQo',\t\t\t'charset' => 'utf8',\t\t\t'tablePrefix' => 'voice_'\t\t),\t\t/*'db' => array(\t\t\t'connectionString' => 'mysql:host=192.168.1.10;dbname=voice',\t\t\t'emulatePrepare' => true,\t\t\t'username' => 'root',\t\t\t'password' => '111111',\t\t\t'charset' => 'utf8',\t\t\t'tablePrefix' => 'voice_'\t\t),*/\t\t'log' => array(\t\t\t'class' => 'CLogRouter',\t\t\t'routes' => array(\t\t\t\tarray(\t\t\t\t\t'class' => 'CFileLogRoute',\t\t\t\t\t'levels' => 'error, warning',\t\t\t\t),\t\t\t),\t\t),\t\t'cache' => array(\t\t\t'class' => 'CMemCache',\t\t\t'servers' => array(\t\t\t\tarray(\t\t\t\t\t'host' => '10.131.188.78',\t\t\t\t\t'port' => 11211,\t\t\t\t\t'weight' => 100,\t\t\t\t),\t\t\t),\t\t),\t),);\n   修复方案：  删除.svn目录   版权声明：转载请注明来源 Eoh@乌云\n ", "wybug_reply": "漏洞回应  厂商回应： 危害等级：中 漏洞Rank：10  确认时间：2014-09-29 12:27 厂商回复： 感谢 最新状态： 暂无  ", "replys": "漏洞评价：\n评论\n  \n\n\n", "wybug_level_fromcorp": "中", "wybug_rank_fromcorp": 10, "Ranks": null}