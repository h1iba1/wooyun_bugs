{"id": 874, "wybug_id": "wooyun-2014-073513", "wybug_title": "北斗卫星LBS位置服务平台getshell+信息泄露", "wybug_corp": "北斗卫星LBS位置服务平台", "wybug_author": "CoffeeSafe", "wybug_date": "2014-08-23 15:05", "wybug_open_date": "2014-10-07 15:06", "wybug_type": "命令执行", "wybug_level": "高", "wybug_rank_0": "20", "wybug_status": "已交由第三方合作机构(cncert国家互联网应急中心)处理", "wybug_from": "http://www.wooyun.org", "wybug_tags": ["第三方框架", "补丁不及时"], "wybug_detail": "漏洞详情 披露状态：   \t\t\t\t\t\t\t\t\t2014-08-23：\t细节已通知厂商并且等待厂商处理中\t\t\t\t\t\t\t\t\t2014-08-28：\t厂商已经确认，细节仅向厂商公开\t\t\t\t\t\t\t\t\t2014-09-07：\t细节向核心白帽子及相关领域专家公开\t\t\t\t\t\t\t\t\t2014-09-17：\t细节向普通白帽子公开\t\t\t\t\t\t\t\t\t2014-09-27：\t细节向实习白帽子公开\t\t\t\t\t\t\t\t\t2014-10-07：\t细节向公众公开  简要描述：     LBS 基于位置的服务，它是通过电信移动运营商的无线电通讯网络（如GSM网、CDMA网）或外部定位方式(如GPS)获取移动终端用户的位置信息（地理坐标，或大地坐标），在地理信息系统     北斗的那个什么。也没乱动，遵守白帽子的规则，希望尽快修复。 详细说明：  北斗卫星LBS位置服务平台getshell+信息泄露地址：http://221.194.128.113:8095/BdlbsManager/贵站点存在struts漏洞，直接导致getshell\n\n信息泄露：\n<!--LBS用户连接 dbcp连接池   org.apache.commons.dbcp.BasicDataSource\"-->\t  <bean id=\"dataSourceQuanJu\"  class=\"com.mchange.v2.c3p0.ComboPooledDataSource\" destroy-method=\"close\" lazy-init=\"true\">\t\t\t\t\t\t<!-- 42数据库连接地址 -->\t\t\t<!--<property name=\"driverClass\" value=\"oracle.jdbc.driver.OracleDriver\" ></property>\t\t\t<property name=\"jdbcUrl\"   value=\"jdbc:oracle:thin:@10.0.18.42:1521:bddb\"></property> \t\t\t<property name=\"user\" value=\"qjdb\"></property>\t\t\t<property name=\"password\" value=\"qj2013\"></property>-->\t\t\t\t\t\t\t\t\t<!-- 113数据库连接地址 -->\t\t       <!--                    \t<property name=\"driverClass\" value=\"oracle.jdbc.driver.OracleDriver\" ></property>\t\t\t<property name=\"jdbcUrl\" value=\"jdbc:oracle:thin:@221.194.128.113:1538:bddb\"></property>\t\t\t<property name=\"user\" value=\"qjdb\"></property>\t\t\t<property name=\"password\" value=\"qj07031804qj\"></property>\t\t\t-->\t\t\t\t\t\t<!-- 114数据库连接地址 -->\t\t\t<!--<property name=\"driverClass\" value=\"oracle.jdbc.driver.OracleDriver\" ></property>\t\t\t<property name=\"jdbcUrl\" value=\"jdbc:oracle:thin:@221.194.128.114:1539:ykdb\"></property>\t\t\t<property name=\"user\" value=\"qjdb\"></property>\t\t\t<property name=\"password\" value=\"ykdbqj\"></property>-->\t\t\t\t\t\t<property name=\"driverClass\" value=\"oracle.jdbc.driver.OracleDriver\" ></property>                        <property name=\"jdbcUrl\" value=\"jdbc:oracle:thin:@123.125.16.139:1540:zxdb\"></property>                        <property name=\"user\" value=\"qjdb\"></property>                        <property name=\"password\" value=\"qj07031804qj\"></property>\n   漏洞证明：  \n--><!--测试用的demo例子 开始  -->\t<bean id=\"qjTbTermincardinfoDAO\" class=\"com.sos.lbs.dao.impl.QjTbTermincardinfoDAO\">\t    <property name=\"sessionFactory\">\t       <ref bean=\"sessionFactoryQuanJu\"/>\t    </property>\t</bean>\t<bean id=\"qjTbTermincardinfoService\" class=\"com.sos.lbs.service.impl.QjTbTermincardinfoService\">\t   <property name=\"iqjTbTermincardinfoDAO\" ref=\"qjTbTermincardinfoDAO\"></property>\t   <property name=\"iqjTbTermincardidDAO\" ref=\"qjTbTermincardidDAO\"></property>\t</bean>\t<bean id=\"TerminCardAction\" class=\"com.sos.lbs.action.QjTbTermincardinfoAction\" >\t   <property name=\"iqjTbTermincardinfoService\" ref=\"qjTbTermincardinfoService\"></property>\t   <property name=\"ilbsTbUserService\" ref=\"lbsTbUserService\"></property>\t   <property name=\"iqjTbTermincardidService\" ref=\"qjTbTermincardidService\"></property>\t</bean>\t<!--测试用的demo例子 结束 -->\t\t<!-- 判断该终端是否为有屏机 开始 -->\t<bean id=\"qjVwTermincardinfoDAO\" class=\"com.sos.lbs.dao.impl.QjVwTermincardinfoDAO\">\t   <property name=\"sessionFactory\">\t      <ref bean=\"sessionFactoryQuanJu\"/>\t   </property>\t</bean>\t<bean id=\"qjVwTermincardinfoService\" class=\"com.sos.lbs.service.impl.QjVwTermincardinfoService\">\t    <property name=\"iqjVwTermincardinfoDAO\" ref=\"qjVwTermincardinfoDAO\"></property>\t</bean>\t<bean id=\"QjVwTinfoAction\" class=\"com.sos.lbs.action.QjVwTermincardinfoAction\">\t   <property name=\"iqjVwTermincardinfoService\" ref=\"qjVwTermincardinfoService\"></property>\t</bean>\t<!-- 判断该终端是否为有屏机 结束 -->\t\t<!-- 查询终端所有的运营商信息 -->\t<bean id=\"qjTbTerminfactoryDAO\" class=\"com.sos.lbs.dao.impl.QjTbTerminfactoryDAO\">\t   <property name=\"sessionFactory\">\t      <ref bean=\"sessionFactoryQuanJu\"/>\t   </property>\t</bean>\t<bean id=\"qjTbTerminfactoryService\" class=\"com.sos.lbs.service.impl.QjTbTerminfactoryService\">\t   <property name=\"iqjTbTerminfactoryDAO\" ref=\"qjTbTerminfactoryDAO\"></property>\t</bean>\t\t<bean id=\"qjTbTerminfactoryAction\" class=\"com.sos.lbs.action.QjTbTerminfactoryAction\">\t   <property name=\"iqjTbTerminfactoryService\" ref=\"qjTbTerminfactoryService\"></property>\t</bean>\t\t<!-- 所有的运营商信息列表 开始 -->\t<bean id=\"qjTbOperatorDAO\" class=\"com.sos.lbs.dao.impl.QjTbOperatorDAO\">\t  <property name=\"sessionFactory\">\t    <ref bean=\"sessionFactoryQuanJu\"/>\t  </property>\t</bean>    <bean id=\"qjTbOperatorService\" class=\"com.sos.lbs.service.impl.QjTbOperatorService\">      <property name=\"iqjTbOperatorDAO\" ref=\"qjTbOperatorDAO\"></property>    </bean>\t     <bean id=\"qjTbOperatorAction\" class=\"com.sos.lbs.action.QjTbOperatorAction\">       <property name=\"iqjTbOperatorService\" ref=\"qjTbOperatorService\"></property>    </bean>\t<!-- 所有的运营商信息列表 结束 -->\t\t\t<!-- 终端卡信息开始  2014-3-25 -->\t<bean id=\"qjTbTermincardidDAO\" class=\"com.sos.lbs.dao.impl.QjTbTermincardidDAO\">\t   <property name=\"sessionFactory\" ref=\"sessionFactoryQuanJu\"></property>\t</bean>\t<bean id=\"qjTbTermincardidService\" class=\"com.sos.lbs.service.impl.QjTbTermincardidService\">\t   <property name=\"iqjTbTermincardidDAO\" ref=\"qjTbTermincardidDAO\"></property>\t</bean>\t<bean id=\"qjTbTermincardidAction\" class=\"com.sos.lbs.action.QjTbTermincardidAction\">\t   <property name=\"iqjTbTermincardidService\" ref=\"qjTbTermincardidService\"></property>\t</bean>\t<!-- 终端卡信息结束  2014-3-25 -->\t\t\t<!-- 终端卡详细信息备份表开始  2014-3-25 -->\t<bean id=\"qjTbTermincardinfoHistoryDAO\" class=\"com.sos.lbs.dao.impl.QjTbTermincardinfoHistoryDAO\">\t   <property name=\"sessionFactory\" ref=\"sessionFactoryQuanJu\"></property>\t</bean>\t<bean id=\"qjTbTermincardinfoHistoryService\" class=\"com.sos.lbs.service.impl.QjTbTermincardinfoHistoryService\">\t   <property name=\"iqjTbTermincardinfoHistoryDAO\" ref=\"qjTbTermincardinfoHistoryDAO\"></property>\t</bean>\t<!-- 终端卡详细信息备份表结束  2014-3-25 -->\t\t\t</beans>\n\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>  <beans      xmlns=\"http://www.springframework.org/schema/beans\"      xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"      xsi:schemaLocation=\"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.0.xsd\">       \t  <!--LBS用户连接 dbcp连接池 <bean id=\"dataSource\"org.apache.commons.dbcp.BasicDataSource\"  class=\"com.mchange.v2.c3p0.ComboPooledDataSource\"> -->\t     <bean id=\"dataSource\"  class=\"com.mchange.v2.c3p0.ComboPooledDataSource\" destroy-method=\"close\" lazy-init=\"true\">\t\t\t\t\t\t\t\t\t<!-- 42连接地址 -->\t\t\t<!--<property name=\"driverClass\" value=\"oracle.jdbc.driver.OracleDriver\" ></property>\t\t    <property name=\"jdbcUrl\"   value=\"jdbc:oracle:thin:@10.0.18.42:1521:bddb\"></property>\t\t    <property name=\"user\" value=\"lbsdb001\"></property>\t\t\t<property name=\"password\" value=\"lbs2013\"></property>\t\t\t\t\t\t\t\t\t--><!-- 113连接地址 -->\t<!--\t\t<property name=\"driverClass\" value=\"oracle.jdbc.driver.OracleDriver\" ></property>\t\t\t<property name=\"jdbcUrl\" value=\"jdbc:oracle:thin:@221.194.128.113:1538:bddb\"></property> \t\t\t<property name=\"user\" value=\"lbsdb001\"></property>\t\t    <property name=\"password\" value=\"lbs07031804lbs\"></property>\t  -->\t\t\t\t\t\t\t\t<!-- 114连接地址 -->\t\t\t<!--<property name=\"driverClass\" value=\"oracle.jdbc.driver.OracleDriver\" ></property>\t\t\t<property name=\"jdbcUrl\" value=\"jdbc:oracle:thin:@221.194.128.114:1539:ykdb\"></property> \t\t\t<property name=\"user\" value=\"lbsdb001\"></property>\t\t    <property name=\"password\" value=\"ykdblbs\"></property>-->\t\t\t\t\t\t                 \t<property name=\"driverClass\" value=\"oracle.jdbc.driver.OracleDriver\" ></property>                        <property name=\"jdbcUrl\" value=\"jdbc:oracle:thin:@123.125.16.139:1540:zxdb\"></property>                        <property name=\"user\" value=\"lbsdb001\"></property>                        <property name=\"password\" value=\"lbs07031804lbs\"></property>\t\t\t\t\t\t\t    \t\t\t\t\t\t\t\t    <!--连接池中保留的最小连接数。-->\t        <property name=\"minPoolSize\" value=\"3\"></property>\t        <!--连接池中保留的最大连接数。Default: 15 -->            <property name=\"maxPoolSize\" value=\"100\" />            <!--初始化时获取的连接数，取值应在minPoolSize与maxPoolSize之间。Default: 3 -->             <property name=\"initialPoolSize\" value=\"5\" />             <!--最大空闲时间,60秒内未使用则连接被丢弃。若为0则永不丢弃。Default: 0 -->              <property name=\"maxIdleTime\" value=\"180\" />            <!--当连接池中的连接耗尽的时候c3p0一次同时获取的连接数。Default: 3 -->              <property name=\"acquireIncrement\" value=\"5\" />                       <!--每60秒检查所有连接池中的空闲连接。Default: 0 -->  \t\t\t<property name=\"idleConnectionTestPeriod\" value=\"180\" /> \t\t\t<!--定义在从数据库获取新连接失败后重复尝试的次数。Default: 30 --> \t\t\t<property name=\"acquireRetryAttempts\" value=\"30\" /> \t\t\t\t\t\t <!--连接关闭时默认将所有未提交的操作回滚。Default: false -->            <property name=\"autoCommitOnClose\" value=\"true\"></property>\t\t\t<!-- <property name=\"preferredTestQuery\" value=\"select count(*) from dual\"></property> -->\t\t\t\t\t\t\t\t\t\t<!-- 新加  2014-03-17-->\t\t\t<property name=\"checkoutTimeout\" value=\"5000\"></property>\t\t\t<property name=\"maxStatements\" value=\"0\"></property>\t\t\t\t  </bean>\t\t    <!-- \t\t    dataSource: 要连接的 datasource (通常我们不会定义在 server.xml)\t\t\tdefaultAutoCommit: 对于事务是否 autoCommit, 默认值为 true\t\t\tdefaultReadOnly: 对于数据库是否只能读取, 默认值为 false\t\t\tdriverClassName:连接数据库所用的 JDBC Driver Class,\t\t\tmaxActive: 可以从对象池中取出的对象最大个数，为0则表示没有限制，默认为8\t\t\tmaxIdle: 最大等待连接中的数量,设 0 为没有限制 （对象池中对象最大个数）\t\t\tminIdle：对象池中对象最小个数\t\t\tmaxWait: 最大等待秒数, 单位为 ms, 超过时间会?出错误信息\t\t\tpassword: 登陆数据库所用的密码\t\t\turl: 连接数据库的 URL\t\t\tusername: 登陆数据库所用的帐号\t\t\tvalidationQuery: 验证连接是否成功, SQL SELECT 指令至少要返回一行\t\t\tremoveAbandoned: 是否自我中断, 默认是 false\t\t\tremoveAbandonedTimeout: 几秒后会自我中断, removeAbandoned 必须为 true\t\t\tlogAbandoned: 是否记录中断事件, 默认为 false\t\t\tminEvictableIdleTimeMillis：大于0 ，进行连接空闲时间判断，或为0，对空闲的连接不进行验证；默认30分钟\t\t\ttimeBetweenEvictionRunsMillis：失效检查线程运行时间间隔，如果小于等于0，不会启动检查线程，默认-1\t\t\ttestOnBorrow：取得对象时是否进行验证，检查对象是否有效，默认为false\t\t\ttestOnReturn：返回对象时是否进行验证，检查对象是否有效，默认为false\t\t\ttestWhileIdle：空闲时是否进行验证，检查对象是否有效，默认为false\t\t\t? 在使用DBCP的时候，如果使用默认值，则数据库连接因为某种原因断掉后，再从连接池中取得连接又不进行验证，这时取得的连接实际上就会是无效的数据库连接。因此为了防止获得的数据库连接失效，在使用的时候最好保证：\t\t\tusername: 登陆数据库所用的帐号\t\t\tvalidationQuery：SELECT COUNT(*) FROM DUAL\t\t\ttestOnBorrow、testOnReturn、testWhileIdle：最好都设为true\t\t\tminEvictableIdleTimeMillis：大于0 ，进行连接空闲时间判断，或为0，对空闲的连接不进行验证\t\t\ttimeBetweenEvictionRunsMillis：失效检查线程运行时间间隔，如果小于等于0，不会启动检查线程\t\t   <property name=\"\"></property>\t\t     -->\t\t     \t<bean id=\"sessionFactory\"\t\tclass=\"org.springframework.orm.hibernate3.LocalSessionFactoryBean\">\t\t<property name=\"dataSource\">\t\t\t<ref local=\"dataSource\" />\t\t</property>\t\t<property name=\"hibernateProperties\">\t\t\t<props>\t\t\t\t<prop key=\"hibernate.dialect\">\t\t\t\t\torg.hibernate.dialect.Oracle9Dialect\t\t\t\t</prop>\t\t\t\t<prop key=\"hibernate.show_sql\">true</prop>\t\t\t\t<!--\t\t\t\t 20140319   新添加内容 \t\t\t\t<prop key=\"hibernate.format_sql\">true</prop>                  --><prop key=\"hibernate.generate_statistics\">true</prop>                  <prop key=\"hibernate.autoReconnect\">true</prop>                  <prop key=\"hibernate.max_fech_depth\">5</prop>                  <prop key=\"hibernate.jdbc.batch_size\">50</prop>                  <prop key=\"hibernate.jdbc.fetch_size\">100</prop>  \t\t\t\t\t\t\t\t<!--\t\t\t\t<prop key=\"hibernate.generate_statistics\">true</prop>\t\t\t\t<prop key=\"hibernate.connection.release_mode\">auto</prop>\t\t\t\t<prop key=\"hibernate.autoReconnect\">true</prop>\t\t\t--></props>\t\t</property>\t\t<property name=\"mappingResources\">\t\t   <list> \t\t      <value>com/sos/lbs/pojo/LbsTbAuthority.hbm.xml</value>\t\t      <value>com/sos/lbs/pojo/LbsTbSendtext.hbm.xml</value>\t\t      <value>com/sos/lbs/pojo/LbsTbUser.hbm.xml</value>\t\t      <value>com/sos/lbs/pojo/LbsTbUsertermin.hbm.xml</value>\t\t      <value>com/sos/lbs/pojo/LbsTbReceivetext.hbm.xml</value>\t\t      <value>com/sos/lbs/pojo/LbsTbUsergroup.hbm.xml</value>\t\t      <value>com/sos/lbs/pojo/LbsTbFence.hbm.xml</value>\t\t   </list>\t\t</property>\t</bean>\t\t<!--<bean id=\"transactionManager\" class=\"org.springframework.orm.hibernate3.HibernateTransactionManager\">\t    <property name=\"sessionFactory\" ref=\"sessionFactoryQuanJu\"></property>\t</bean>\t--><!-- <bean id=\"andyWEB\" class=\"com.sos.lbs.util.TestTask\" init-method=\"taskTime\"/>  --> \t\t\t<!--测试用的demo例子 开始  -->\t<bean id=\"LbsAuthDAO\" class=\"com.sos.lbs.dao.impl.LbsTbAuthorityDAO\">\t    <property name=\"sessionFactory\">\t       <ref bean=\"sessionFactory\"/>\t    </property>\t</bean>\t<bean id=\"LbsService\" class=\"com.sos.lbs.service.impl.LbsTbAuthorityService\">\t   <property name=\"lbsAutoDAO\" ref=\"LbsAuthDAO\"></property>\t</bean>\t<bean id=\"LbsAaction\" class=\"com.sos.lbs.action.LbsTbAuthorityAction\" >\t   <property name=\"lbsService\" ref=\"LbsService\"></property>\t</bean>\t<!--测试用的demo例子 结束 -->\t\t<bean id=\"lbsTbSendtextDAO\" class=\"com.sos.lbs.dao.impl.LbsTbSendtextDAO\">\t   <property name=\"sessionFactory\">\t      <ref bean=\"sessionFactory\"/>\t   </property>\t</bean>\t<bean id=\"lbsTbSendtextService\" class=\"com.sos.lbs.service.impl.LbsTbSendtextService\">\t   <property name=\"tbSendtextDAO\" ref=\"lbsTbSendtextDAO\"></property>\t</bean>\t\t<!-- 用户登陆页面初始化 开始-->\t <bean id=\"lbsTbUserDAO\" class=\"com.sos.lbs.dao.impl.LbsTbUserDAO\">         <property name=\"sessionFactory\">            <ref bean=\"sessionFactory\"/>         </property>\t \t </bean>\t <bean id=\"lbsTbUserService\" class=\"com.sos.lbs.service.impl.LbsTbUserService\">\t     <property name=\"ilbsTbUserDAO\" ref=\"lbsTbUserDAO\"></property>\t </bean>\t <bean id=\"lbsTbUserAction\" class=\"com.sos.lbs.action.LbsTbUserAction\">\t     <property name=\"ilbsTbUserService\" ref=\"lbsTbUserService\"></property>\t     <property name=\"ilbsTbUserterminService\" ref=\"lbsTbUserterminService\"></property>\t     <property name=\"iqjVwTermincardinfoService\" ref=\"qjVwTermincardinfoService\"></property>\t     <property name=\"ilbsTbReceivetextService\" ref=\"lbsTbReceivetextService\"></property>\t     <property name=\"ilbsTbUsergroupService\" ref=\"lbsTbUsergroupService\"></property>\t </bean>\t<!-- 用户登陆页面初始化 结束-->\t\t\t\t<!-- 用户登陆 开始-->\t<bean id=\"lbsTbUserterminDAO\" class=\"com.sos.lbs.dao.impl.LbsTbUserterminDAO\">\t   <property name=\"sessionFactory\">\t     <ref bean=\"sessionFactory\"/>\t   </property>\t</bean>\t<bean id=\"lbsTbUserterminService\" class=\"com.sos.lbs.service.impl.LbsTbUserterminService\">\t    <property name=\"ilbsTbUserterminDAO\" ref=\"lbsTbUserterminDAO\"></property>\t</bean>\t<!-- 用户登陆 结束-->\t\t<!--查询用户已经接收到的短信信息 开始-->\t<bean id=\"lbsTbReceivetextDAO\" class=\"com.sos.lbs.dao.impl.LbsTbReceivetextDAO\">\t   <property name=\"sessionFactory\">\t      <ref bean=\"sessionFactory\"/>\t   </property>\t</bean>\t<bean id=\"lbsTbReceivetextService\" class=\"com.sos.lbs.service.impl.LbsTbReceivetextService\">\t   <property name=\"ilbsTbReceivetextDAO\" ref=\"lbsTbReceivetextDAO\"></property>\t</bean>\t<!--查询用户已经接收到的短信信息 结束-->\t\t<!--用户分组  开始 -->\t<bean id=\"lbsTbUsergroupDAO\" class=\"com.sos.lbs.dao.impl.LbsTbUsergroupDAO\">\t    <property name=\"sessionFactory\">\t       <ref bean=\"sessionFactory\"/>\t    </property>\t</bean>\t<bean id=\"lbsTbUsergroupService\" class=\"com.sos.lbs.service.impl.LbsTbUsergroupService\">\t    <property name=\"ilbsTbUsergroupDAO\" ref=\"lbsTbUsergroupDAO\"></property>\t</bean>\t<!--用户分组 结束  -->\t\t\t<!-- 电子围栏 开始 -->\t<bean id=\"ilbsTbFenceDAO\" class=\"com.sos.lbs.dao.impl.LbsTbFenceDAO\">\t   <property name=\"sessionFactory\">\t      <ref bean=\"sessionFactory\"/>\t   </property>\t</bean>\t<bean id=\"ilbsTbFenceService\" class=\"com.sos.lbs.service.impl.LbsTbFenceService\">\t   <property name=\"ilbsTbFenceDAO\" ref=\"ilbsTbFenceDAO\"></property>\t</bean>\t<bean id=\"lbsTbFenceAction\" class=\"com.sos.lbs.action.LbsTbFenceAction\">\t   <property name=\"ilbsTbFenceService\" ref=\"ilbsTbFenceService\"></property>\t</bean>\t<!-- 电子围栏 结束  -->\t\t\t</beans>\n\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>  <beans      xmlns=\"http://www.springframework.org/schema/beans\"      xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"      xsi:schemaLocation=\"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.0.xsd\">    \t<!--终端用户连接  proxool连接池  开发库 开始-->\t  <bean id=\"dataSourceUser\"  class=\"com.mchange.v2.c3p0.ComboPooledDataSource\" destroy-method=\"close\" lazy-init=\"true\" >\t\t\t\t\t\t\t\t\t<!-- 42数据库连接地址 -->\t\t\t<!--<property name=\"driverClass\" value=\"oracle.jdbc.driver.OracleDriver\" ></property>\t\t\t<property name=\"jdbcUrl\"   value=\"jdbc:oracle:thin:@10.0.18.42:1521:bddb\"></property>\t\t\t<property name=\"user\" value=\"bddb001\"></property>\t\t\t<property name=\"password\" value=\"bd2013\"></property>\t\t\t\t\t\t\t\t\t--><!-- 113数据库连接地址 -->\t\t   <!--\t<property name=\"driverClass\" value=\"oracle.jdbc.driver.OracleDriver\" ></property>\t\t\t<property name=\"jdbcUrl\" value=\"jdbc:oracle:thin:@221.194.128.113:1538:bddb\"></property>\t\t\t<property name=\"user\" value=\"bddb001\"></property>\t\t\t<property name=\"password\" value=\"bd07031804bd\"></property>\t\t\t-->\t\t\t\t\t\t<!-- 114数据库连接地址 -->\t\t\t<!--<property name=\"driverClass\" value=\"oracle.jdbc.driver.OracleDriver\" ></property>\t\t\t<property name=\"jdbcUrl\" value=\"jdbc:oracle:thin:@221.194.128.114:1539:ykdb\"></property>\t\t\t<property name=\"user\" value=\"bddb001\"></property>\t\t\t<property name=\"password\" value=\"ykdbbd\"></property>-->\t\t\t<property name=\"driverClass\" value=\"oracle.jdbc.driver.OracleDriver\" ></property>                        <property name=\"jdbcUrl\" value=\"jdbc:oracle:thin:@123.125.16.139:1540:zxdb\"></property>                        <property name=\"user\" value=\"bddb001\"></property>                        <property name=\"password\" value=\"bd07031804bd\"></property>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<!--连接池中保留的最小连接数。-->\t        <property name=\"minPoolSize\" value=\"3\"></property>\t       <!--连接池中保留的最大连接数。Default: 15 -->            <property name=\"maxPoolSize\" value=\"300\" />            <!--初始化时获取的连接数，取值应在minPoolSize与maxPoolSize之间。Default: 3 -->             <property name=\"initialPoolSize\" value=\"5\" />             <!--最大空闲时间,60秒内未使用则连接被丢弃。若为0则永不丢弃。Default: 0 -->                          <property name=\"maxIdleTime\" value=\"180\" />            <!--当连接池中的连接耗尽的时候c3p0一次同时获取的连接数。Default: 3 -->              <property name=\"acquireIncrement\" value=\"5\" />                       <!--每60秒检查所有连接池中的空闲连接。Default: 0 -->  \t\t\t<property name=\"idleConnectionTestPeriod\" value=\"180\" /> \t\t\t<!--定义在从数据库获取新连接失败后重复尝试的次数。Default: 30 --> \t\t\t<property name=\"acquireRetryAttempts\" value=\"30\" /> \t\t\t\t\t\t <!--连接关闭时默认将所有未提交的操作回滚。Default: false -->            <property name=\"autoCommitOnClose\" value=\"true\"></property>\t\t\t<!-- <property name=\"preferredTestQuery\" value=\"select count(*) from dual\"></property> -->\t\t\t\t\t\t\t\t\t\t<!-- 新加  2014-03-17-->\t\t\t<property name=\"checkoutTimeout\" value=\"5000\"></property>\t\t\t<property name=\"maxStatements\" value=\"0\"></property>\t  </bean>\t  <!--终端用户连接  dbcp连接池  测试库 结束 -->\t  \t<bean id=\"sessionFactoryUser\"\t\tclass=\"org.springframework.orm.hibernate3.LocalSessionFactoryBean\">\t\t<property name=\"dataSource\">\t\t\t<ref local=\"dataSourceUser\" />\t\t</property>\t\t<property name=\"hibernateProperties\">\t\t\t<props>\t\t\t\t<prop key=\"hibernate.dialect\">\t\t\t\t\torg.hibernate.dialect.Oracle9Dialect\t\t\t\t</prop>\t\t\t\t<prop key=\"hibernate.show_sql\">true</prop>\t\t\t\t <!--20140319   新添加内容 \t\t\t\t<prop key=\"hibernate.format_sql\">true</prop>                  --><prop key=\"hibernate.generate_statistics\">true</prop>                  <prop key=\"hibernate.autoReconnect\">true</prop>                  <prop key=\"hibernate.max_fech_depth\">5</prop>                  <prop key=\"hibernate.jdbc.batch_size\">50</prop>                  <prop key=\"hibernate.jdbc.fetch_size\">100</prop>  \t\t\t\t\t\t\t\t\t\t\t\t<!--\t\t\t\t<prop key=\"hibernate.generate_statistics\">true</prop>\t\t\t\t<prop key=\"hibernate.connection.release_mode\">auto</prop>\t\t\t\t<prop key=\"hibernate.autoReconnect\">true</prop>\t\t\t--></props>\t\t</property>\t\t\t\t<property name=\"mappingResources\">\t\t   <list> \t\t      <value>com/sos/lbs/pojo/BdTbFootprint.hbm.xml</value>\t\t      <value>com/sos/lbs/pojo/BdTbHistorystatus.hbm.xml</value>\t\t      <value>com/sos/lbs/pojo/BdTbTextnumber.hbm.xml</value>\t\t      <value>com/sos/lbs/pojo/BdTbWaitsendtermin.hbm.xml</value>\t\t      <value>com/sos/lbs/pojo/BdTbSendtext.hbm.xml</value>\t\t      <value>com/sos/lbs/pojo/BdTbReceivetext.hbm.xml</value>\t\t      <value>com/sos/lbs/pojo/BdTbMobilesendtext.hbm.xml</value>\t\t      <value>com/sos/lbs/pojo/BdTbReceiveraw.hbm.xml</value>\t\t   </list>\t\t</property>\t</bean>\t\t\t<!--<bean id=\"transactionManager\" class=\"org.springframework.orm.hibernate3.HibernateTransactionManager\">\t      <property name=\"sessionFactory\" ref=\"sessionFactoryQuanJu\"></property>\t</bean>\t\t\t--><!--历史足迹信息查询 开始  -->\t<bean id=\"bdTbFootprintDAO\" class=\"com.sos.lbs.dao.impl.BdTbFootprintDAO\">\t    <property name=\"sessionFactory\">\t       <ref bean=\"sessionFactoryUser\"/>\t    </property>\t</bean>\t<bean id=\"bdTbFootprintService\" class=\"com.sos.lbs.service.impl.BdTbFootprintService\">\t   <property name=\"ibdTbFootprintDAO\" ref=\"bdTbFootprintDAO\"></property>\t</bean>\t<bean id=\"dbFootAction\" class=\"com.sos.lbs.action.BdTbFootprintAction\" >\t   <property name=\"ibdTbFootprintService\" ref=\"bdTbFootprintService\"></property>\t   <property name=\"iqjVwTermincardinfoService\" ref=\"qjVwTermincardinfoService\"></property>\t   <property name=\"ilbsRecevetTextService\" ref=\"lbsTbReceivetextService\"></property>\t   <property name=\"ilbsUserService\" ref=\"lbsTbUserService\"></property>\t</bean>\t<!--历史足迹信息查询 结束 -->\t\t\t\t<!--非正常历史足迹信息查询 开始 -->\t<bean id=\"bdTbHistorystatusDAO\" class=\"com.sos.lbs.dao.impl.BdTbHistorystatusDAO\">\t    <property name=\"sessionFactory\">\t       <ref bean=\"sessionFactoryUser\"/>\t    </property>\t</bean>\t<bean id=\"bdTbHistorystatusService\" class=\"com.sos.lbs.service.impl.BdTbHistorystatusService\">\t   <property name=\"iddTbHistorystatusDAO\" ref=\"bdTbHistorystatusDAO\"></property>\t</bean>\t<bean id=\"HistorystateAction\" class=\"com.sos.lbs.action.BdTbHistorystatusAction\" >\t   <property name=\"ibdTbHistorystatusService\" ref=\"bdTbHistorystatusService\"></property>\t</bean>\t<!--非正常历史足迹信息查询 结束 -->\t\t\t\t\t<!--用户发送信息 开始 -->    <bean id=\"isendMessageSerivces\" class=\"com.sos.lbs.service.impl.SendMessageService\">       <property name=\"ilbsTbSendtextService\" ref=\"lbsTbSendtextService\"></property>       <property name=\"textNumberservice\" ref=\"bdTbTextnumberService\"></property>       <property name=\"ibdTbWaitsendterminService\" ref=\"bdTbWaitsendterminService\"></property>       <property name=\"qjVwTermincardinfoService\" ref=\"qjVwTermincardinfoService\"></property>       <property name=\"ilbsTbReceivetextService\" ref=\"lbsTbReceivetextService\"></property>       <property name=\"ibdTbReceivetextService\" ref=\"bdTbReceivetextService\"></property>       <property name=\"ibdTbSendtextService\" ref=\"bdTbSendtextService\"></property>    </bean>         \t<bean id=\"SendMessageAction\" class=\"com.sos.lbs.action.SendMessageAction\">\t    <property name=\"isMessageService\" ref=\"isendMessageSerivces\"></property>\t</bean>\t<!--用户发送信息 结束 -->\t\t\t\t<!-- 短信编号 开始 -->\t<bean id=\"bdTbTextnumberDAO\" class=\"com.sos.lbs.dao.impl.BdTbTextnumberDAO\">\t    <property name=\"sessionFactory\">\t       <ref bean=\"sessionFactoryUser\"/>\t    </property>\t</bean>\t<bean id=\"bdTbTextnumberService\" class=\"com.sos.lbs.service.impl.BdTbTextnumberService\">\t    <property name=\"iddTbTextnumberDAO\" ref=\"bdTbTextnumberDAO\"></property>\t</bean>\t<!-- 短信编号 结束 -->\t<!-- 待发送表 开始 -->\t<bean id=\"bdTbWaitsendterminDAO\" class=\"com.sos.lbs.dao.impl.BdTbWaitsendterminDAO\">\t  <property name=\"sessionFactory\">\t     <ref bean=\"sessionFactoryUser\"/>\t  </property>\t</bean>\t<bean id=\"bdTbWaitsendterminService\" class=\"com.sos.lbs.service.impl.BdTbWaitsendterminService\">\t   <property name=\"ibdTbWaitsendterminDAO\" ref=\"bdTbWaitsendterminDAO\"></property>\t</bean>\t<!-- 待发送表 结束 -->\t\t<!-- 终端已发送表 开始 -->\t<bean id=\"bdTbSendtextDAO\" class=\"com.sos.lbs.dao.impl.BdTbSendtextDAO\">\t   <property name=\"sessionFactory\">\t      <ref bean=\"sessionFactoryUser\"/>\t   </property>\t</bean>\t<bean id=\"bdTbSendtextService\" class=\"com.sos.lbs.service.impl.BdTbSendtextService\">\t   <property name=\"ibdTbSendtextDAO\" ref=\"bdTbSendtextDAO\"></property>\t</bean>\t<!-- 终端已发送表 结束 -->\t\t<!-- 终端已接收表 开始 -->\t<bean id=\"bdTbReceivetextDAO\" class=\"com.sos.lbs.dao.impl.BdTbReceivetextDAO\">\t <property name=\"sessionFactory\">\t    <ref bean=\"sessionFactoryUser\"/>\t </property>\t</bean>\t<bean id=\"bdTbReceivetextService\" class=\"com.sos.lbs.service.impl.BdTbReceivetextService\">\t<property name=\"ibdTbReceivetextDAO\" ref=\"bdTbReceivetextDAO\"></property>\t</bean>\t<!-- 终端已接收表 结束 -->\t\t\t<!-- 待发送到终端的手机短信箱  开始-->\t<bean id=\"bdTbMobilesendtextDAO\" class=\"com.sos.lbs.dao.impl.BdTbMobilesendtextDAO\">\t  <property name=\"sessionFactory\" >\t     <ref bean=\"sessionFactoryUser\"/>\t  </property>\t</bean>\t<bean id=\"bdTbMobilesendtextService\" class=\"com.sos.lbs.service.impl.BdTbMobilesendtextService\">\t  <property name=\"ibdTbMobilesendtextDAO\" ref=\"bdTbMobilesendtextDAO\"></property>\t</bean>\t<bean id=\"bdTbMobilesendtextAction\" class=\"com.sos.lbs.action.BdTbMobilesendtextAction\">\t   <property name=\"ibdTbMobilesendtextService\" ref=\"bdTbMobilesendtextService\"></property>\t</bean>\t<!-- 待发送到终端的手机短信箱  结束-->\t\t<!-- 转换百度坐标处理  开始\t<bean id=\"bdTbFootprintBaiDAO\" class=\"com.sos.lbs.dao.impl.BdTbFootprintBaiDAO\">\t   <property name=\"sessionFactory\">\t      <ref bean=\"sessionFactoryUser\"/>\t   </property>\t</bean>    <bean id=\"bdTbFootprintBaiService\" class=\"com.sos.lbs.service.impl.BdTbFootprintBaiService\">       <property name=\"ibdTbFootprintBaiDAO\" ref=\"bdTbFootprintBaiDAO\"></property>    </bean>\t 转换百度坐标处理  结束-->\t\t\t<!-- 查询指挥机原始数据包  开始-->\t<bean id=\"bdTbReceiverawDAO\" class=\"com.sos.lbs.dao.impl.BdTbReceiverawDAO\">   \t  <property name=\"sessionFactory\">   \t      <ref bean=\"sessionFactoryUser\"/>   \t  </property>\t</bean>\t<bean id=\"bdTbReceiverawServer\" class=\"com.sos.lbs.service.impl.BdTbReceiverawServer\">\t      <property name=\"ibdTbReceiverawDAO\" ref=\"bdTbReceiverawDAO\"></property>\t</bean>\t<bean id=\"bdTbReceiverawAction\" class=\"com.sos.lbs.action.BdTbReceiverawAction\">\t      <property name=\"ibdTbReceiverawServer\" ref=\"bdTbReceiverawServer\"></property>\t</bean>\t<!-- 查询指挥机原始数据包  结束-->\t</beans>\n\n\n   修复方案：  1-漏洞涉及较广泛2-涉及多个数据库3-希望尽快修复吧升级+配置等。作为白帽子，这是我应该做的。关注WEB安全，关注互联网风险。   版权声明：转载请注明来源 CoffeeSafe@乌云\n ", "wybug_reply": "漏洞回应  厂商回应： 危害等级：中 漏洞Rank：10  确认时间：2014-08-28 09:20 厂商回复： CNVD确认所述情况，但未建立与网站管理单位的直接处置渠道（网站管理方为商业公司），至27日，网站已经无法直接打开。待处置。 最新状态： 暂无  ", "replys": "漏洞评价：\n评论\n     2014-08-23 15:22 |    \t\t1fn0 \t\t\t( 路人 |\t\t\t        Rank:21 漏洞数:7        | 我是运维 不要开除我)\t\t \n  前排    \n     2014-08-23 15:36 |    \t\tscanf \t\t\t( 核心白帽子 |\t\t\t        Rank:1232 漏洞数:186        | 。)\t\t \n  能从太空看到人吗？    \n     2014-08-23 15:36 |    \t\tCoffeeSafe \t\t\t( 普通白帽子  |\t\t\t        Rank:142 漏洞数:37        )\t\t \n  @scanf 能看到鳖 哈哈    \n     2014-08-23 15:49 |    \t\t袋鼠妈妈 \t\t\t( 普通白帽子  |\t\t\t        Rank:449 漏洞数:61        | 故乡的原风景.MP3)\t\t \n  能看到太空人吗？    \n     2014-08-23 17:22 |    \t\tDloveJ \t\t\t( 普通白帽子  |\t\t\t        Rank:1107 漏洞数:200        | <a href=javascrip:alert('xss')>s</a> 点...)\t\t \n  坐等上电视。。    \n     2014-08-23 17:22 |    \t\tCoffeeSafe \t\t\t( 普通白帽子  |\t\t\t        Rank:142 漏洞数:37        )\t\t \n  @DloveJ 有那么夸张。    \n     2014-08-23 17:25 |    \t\tDloveJ \t\t\t( 普通白帽子  |\t\t\t        Rank:1107 漏洞数:200        | <a href=javascrip:alert('xss')>s</a> 点...)\t\t \n  @CoffeeSafe 都有卫星的事了，怎么会夸张，不会的。。    \n     2014-08-23 18:08 |    \t\t        Jn·  \t\t\t( 路人 |\t\t\t        Rank:30 漏洞数:14        | 本小菜很可爱，如果不服你TM来打我啊--哎呀...)\t\t \n  搞上卫星了,吓坏了    \n     2014-08-23 18:15 |    \t\tHeartOfOcean \t\t\t( 路人 |\t\t\t        Rank:2 漏洞数:3        )\t\t \n  能看到外星人吗？    \n     2014-08-23 18:51 |    \t\tJumbo \t\t\t( 普通白帽子  |\t\t\t        Rank:111 漏洞数:29        | 猫 - http://www.chinabaiker.com)\t\t \n  能看到太空人吗？    \n     2014-08-23 18:57 |    \t\t无敌L.t.H \t\t\t( 路人 |\t\t\t        Rank:21 漏洞数:4        | ‮……肉肉捉活，亭长放解)\t\t \n  坐等新华网无良小编    \n     2014-08-23 19:01 |    \t\tAndy_ \t\t\t( 路人 |\t\t\t        Rank:25 漏洞数:7        | 中行打酱油第一人！！)\t\t \n  当我挖着洞洞看到这条消息的时候，我的小伙伴们都消失了。。。    \n     2014-08-23 19:49 |    \t\t黑吃黑 \t\t\t( 普通白帽子  |\t\t\t        Rank:139 漏洞数:29        | 倚楼听风雨，淡看江湖路...)\t\t \n  当我挖着洞洞看到这条消息的时候，我和我的的小伙伴们都消失了    \n     2014-08-23 20:35 |    \t\tabcdlzy \t\t\t( 实习白帽子  |\t\t\t        Rank:79 漏洞数:14        | 好好学习，天天向上。)\t\t \n  万一火了呢。。。留个名    \n     2014-08-23 21:22 |    \t\t兔兔侠 \t\t\t( 路人 |\t\t\t        Rank:2 漏洞数:1        )\t\t \n  哇！要日天啊！    \n     2014-08-23 21:32 |    \t\tBlackeagle \t\t\t( 实习白帽子  |\t\t\t        Rank:62 漏洞数:10        | 向WooYun致敬)\t\t \n      \n     2014-08-23 22:43 |    \t\tHUC缘生 \t\t\t( 路人 |\t\t\t        Rank:28 漏洞数:29        | 小白求罩~~~~)\t\t \n  前排留名    \n     2014-08-24 01:18 |    \t\t风花雪月 \t\t\t( 实习白帽子  |\t\t\t        Rank:55 漏洞数:44        | []+[]|[]-[][][][][]%[][]|[]\\[]%[][]|[]\\[...)\t\t \n  。。。18楼路过留名    \n     2014-08-24 07:15 |    \t\t马化腾 \t\t\t( 路人 |\t\t\t        Rank:14 漏洞数:2        | 动词大呲咚呲哒呲)\t\t \n  能从太空看到人吗？    \n     2014-08-26 15:38 |    \t\tHonker红颜 \t\t\t( 普通白帽子  |\t\t\t        Rank:156 漏洞数:51        | 皖南人士,90后宅男,自学成才,天朝教育失败....)\t\t \n  能看到外星人 UFO吗？带我涨姿势哦！    \n     2014-08-26 15:40 |    \t\t喷嚏 \t\t\t( 路人 |\t\t\t        Rank:4 漏洞数:2        | 成与败;是与否,一切归功于自己!)\t\t \n  这么高端。。Mark    \n     2014-08-26 21:12 |    \t\tGsAn \t\t\t( 路人 |\t\t\t        Rank:8 漏洞数:7        | Whoami)\t\t \n  混脸熟！！    \n     2014-09-29 23:03 |    \t\talong \t\t\t( 实习白帽子  |\t\t\t        Rank:45 漏洞数:7        | 关注信息安全，阿龙)\t\t \n  该站struts2漏洞截至29日依然存在啊    \n     2014-09-30 21:51 |    \t\tCoffeeSafe \t\t\t( 普通白帽子  |\t\t\t        Rank:142 漏洞数:37        )\t\t \n  @疯狗 该站struts2漏洞截至29日依然存在啊     \n     2014-10-07 15:26 |    \t\t小卖部部长 \t\t\t( 路人 |\t\t\t        Rank:24 漏洞数:3        | 别拿部长不当干部！)\t\t \n  该洞 截止10月7日，仍存在~~    \n     2014-10-07 15:42 |    \t\tzph \t\t\t( 普通白帽子  |\t\t\t        Rank:235 漏洞数:43        )\t\t \n  作为白帽子，这是我应该做的。关注WEB安全，关注互联网风险。 说得好！    \n     2014-10-08 10:23 |    \t\tsysALong \t\t\t( 路人 |\t\t\t        Rank:19 漏洞数:5        | 电脑里的AV片 永远 和 电脑旁的卫生纸 成 ...)\t\t \n  为什么我是路人呢？？ 我记得我是  实习包帽子啊    \n     2014-10-09 15:53 |    \t\t疯狗  \t\t\t( 实习白帽子  |\t\t\t        Rank:44 漏洞数:2        | 阅尽天下漏洞，心中自然无码。)\t\t \n  @CoffeeSafe @cncert国家互联网应急中心 应该是进行了通报，企业方面不知什么情况    \n  \n\n\n", "wybug_level_fromcorp": "中", "wybug_rank_fromcorp": 10, "Ranks": null}