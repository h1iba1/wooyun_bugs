{"id": 8465, "wybug_id": "wooyun-2013-033837", "wybug_title": "腾讯所有版本都存在的一个拒绝服务bug详细分析", "wybug_corp": "腾讯", "wybug_author": "n0bele", "wybug_date": "2013-08-08 15:10", "wybug_open_date": "2013-11-03 15:11", "wybug_type": "拒绝服务", "wybug_level": "低", "wybug_rank_0": "5", "wybug_status": "漏洞已经通知厂商但是厂商忽略漏洞", "wybug_from": "http://www.wooyun.org", "wybug_tags": ["分析"], "wybug_detail": "漏洞详情 披露状态：   \t\t\t\t\t\t\t\t\t2013-08-08：\t细节已通知厂商并且等待厂商处理中\t\t\t\t\t\t\t\t\t2013-08-08：\t厂商主动忽略漏洞，细节向第三方安全合作伙伴开放\t\t\t\t\t\t\t\t\t2013-10-02：\t细节向核心白帽子及相关领域专家公开\t\t\t\t\t\t\t\t\t2013-10-12：\t细节向普通白帽子公开\t\t\t\t\t\t\t\t\t2013-10-22：\t细节向实习白帽子公开\t\t\t\t\t\t\t\t\t2013-11-03：\t细节向公众公开  简要描述： QQ“莫名其妙”的崩溃问题分析，不对之处还望指出 详细说明：  据说QQ老有崩溃问题，好不容易被我逮到一次岂能错过。问题是都崩溃这么久了为啥这个bug还不改掉？我很困惑。最近脚本玩惯了，windbg快生锈了，就用用吧！先把dump拷贝出来\n\n打开dump\n\n引用了一个空指针导致的崩溃.看看堆栈。\n\n问题出在PreloginLogic.dll里,edi为空啊.\n\n看到这里初步断定这是一个自动更新校验的线程,在校验的时候挂掉了.QQVIP调用PreloginLogic.dll里的函数CreateDRCSProcessor,传了3个结构,而CreateDRCSProcessor又调用了Common.dll的若干函数同一个场景发生的事:\n\n看来可能是TerminateThread或SuspendThread引起的问题了.而一般靠dump”确定”这类问题真的很不靠谱.当我们不清楚自己线程(事实上也很难清楚)在干嘛的时候请不要TerminateThread、SuspendThread请使用同步对象. 当应用程序希望关闭线程时，只要设置这个同步对象，等待线程退出。之后，线程把这个同步对象作为它周期性监测的一部分，定期检查，或者如果这个同步对象的状态改变的话，就可以执行清理操作并退出了.   漏洞证明：  不能传dmp文件，需要的站内短信   修复方案：  他们懂   版权声明：转载请注明来源 n0bele@乌云\n ", "wybug_reply": "漏洞回应  厂商回应： 危害等级：无影响厂商忽略 忽略时间：2013-11-03 15:11 厂商回复： 这是个多线程逻辑bug，已在最新版本中修复，可到im.qq.com上下载最新版，非常感谢您的反馈。 最新状态： 暂无  ", "replys": "漏洞评价：\n评论\n     2013-08-08 15:12 |    \t\tVIP \t\t\t( 普通白帽子  |\t\t\t        Rank:759 漏洞数:100        )\t\t \n  mark    \n     2013-08-08 15:19 |    \t\t有妹子送上 \t\t\t( 实习白帽子  |\t\t\t        Rank:89 漏洞数:28        | 杭州最帅的男人)\t\t \n  mark    \n     2013-08-08 15:42 |    \t\t╰╃清風 \t\t\t( 实习白帽子  |\t\t\t        Rank:89 漏洞数:9        | 这家伙很懒，什么都没有留下)\t\t \n  mark     \n     2013-08-08 16:37 |    \t\tn0bele \t\t\t( 普通白帽子  |\t\t\t        Rank:220 漏洞数:45        | 无耻最寂寞)\t\t \n  秒过就行了，上次发的一句代码打造永久驻留进程带POC的被否了我很难过.其实那个问题出来很久但真实在利用的还没怎么见.    \n  \n\n\n", "wybug_level_fromcorp": "无影响厂商忽略", "wybug_rank_fromcorp": 0, "Ranks": null}