{"id": 28348, "wybug_id": "wooyun-2015-0122793", "wybug_title": "记一次有趣的复旦大学内网安全测试", "wybug_corp": "复旦大学", "wybug_author": "安全小飞侠", "wybug_date": "2015-06-26 11:01", "wybug_open_date": "2015-08-11 14:16", "wybug_type": "命令执行", "wybug_level": "高", "wybug_rank_0": "20", "wybug_status": "已交由第三方合作机构(CCERT教育网应急响应组)处理", "wybug_from": "http://www.wooyun.org", "wybug_tags": ["远程命令执行", "补丁不及时"], "wybug_detail": "漏洞详情 披露状态：   \t\t\t\t\t\t\t\t\t2015-06-26：\t细节已通知厂商并且等待厂商处理中\t\t\t\t\t\t\t\t\t2015-06-27：\t厂商已经确认，细节仅向厂商公开\t\t\t\t\t\t\t\t\t2015-07-07：\t细节向核心白帽子及相关领域专家公开\t\t\t\t\t\t\t\t\t2015-07-17：\t细节向普通白帽子公开\t\t\t\t\t\t\t\t\t2015-07-27：\t细节向实习白帽子公开\t\t\t\t\t\t\t\t\t2015-08-11：\t细节向公众公开  简要描述： 高考刚结束表妹打电话跟我说她想报考复旦，我靠，我等屌丝哪里上过此类高大上的大学，只能上网帮其查查。无意中发现此站点，一时脑热就多看了两眼，于是有了下面的故事...... 详细说明：  \nhttp://www.mse.fudan.edu.cn/\n哦！这竟然是一个复旦大学的软件工程和计算机工程硕士的网站，按照常理应该问（有）题（点）不（打）大（脸）。\n\n既然这样，那就随便看看吧，看看有没有可以玩的地方，简单扫描一下吧。What！竟然是struct2的网站，而且漏洞还未修补，不禁小激动了一下，看来可以玩了。果断上传一个webshell用菜刀削一下看看，果然顺利getshell。\n\n看看数据库的链接信息吧。\n\n看来是本地的mysql数据库啊，查查端口看看喽，默认端口3306。\n\n好哒，看看能不能用拿到的数据库账号和密码链接这个本地数据库，很遗憾，这次没有成功！（算了，点到即止，就不深入了）\n\n既然这条路走不通，那就看看本地的数据库文件都在哪。简单看了一下，数据可以查看但是就不贴图了（放心，看完已删啦O(∩_∩)O）。\n\n接下来，咱来试试加个管理员账户吧（截图后，也已删）。哦也，果断成功！现在我是管理员啦！\n\n\n\n现在看看服务器的基本信息吧。\n\n好像这个服务器，没什么好玩的了。那么，我们看看能不能在内网里有没有什么发现。上传一个扫描脚本扫扫看（Just for test，已删除啦）\n\n感觉效果还不错，不少复旦大学的其他内网服务器和网络设备被找到了。\n\n好了，今天就到此为止了。PS：以上添加的管理员账户，以及扫描脚本和webshell都在测试后被删除了。尽管这个网站本身也没什么特别敏感的信息，但是向来安全保护就是水桶原理，永远不要忽略任何一块短板的危害。   漏洞证明：  \nhttp://www.mse.fudan.edu.cn/\n哦！这竟然是一个复旦大学的软件工程和计算机工程硕士的网站，按照常理应该问（有）题（点）不（打）大（脸）。\n\n既然这样，那就随便看看吧，看看有没有可以玩的地方，简单扫描一下吧。What！竟然是struct2的网站，而且漏洞还未修补，不禁小激动了一下，看来可以玩了。果断上传一个webshell用菜刀削一下看看，果然顺利getshell。\n\n看看数据库的链接信息吧。\n\n看来是本地的mysql数据库啊，查查端口看看喽，默认端口3306。\n\n好哒，看看能不能用拿到的数据库账号和密码链接这个本地数据库，很遗憾，这次没有成功！（算了，点到即止，就不深入了）\n\n既然这条路走不通，那就看看本地的数据库文件都在哪。简单看了一下，数据可以查看但是就不贴图了（放心，看完已删啦O(∩_∩)O）。\n\n接下来，咱来试试加个管理员账户吧（截图后，也已删）。哦也，果断成功！现在我是管理员啦！\n\n\n\n现在看看服务器的基本信息吧。\n\n好像这个服务器，没什么好玩的了。那么，我们看看能不能在内网里有没有什么发现。上传一个扫描脚本扫扫看（Just for test，已删除啦）\n\n感觉效果还不错，不少复旦大学的其他内网服务器和网络设备被找到了。\n\n好了，今天就到此为止了。PS：以上添加的管理员账户，以及扫描脚本和webshell都在测试后被删除了。   修复方案：  赶紧升级structs到最新版本吧。怎么说也是计算机学院的站点，这么打脸，还是不妥吧。   版权声明：转载请注明来源 安全小飞侠@乌云\n ", "wybug_reply": "漏洞回应  厂商回应： 危害等级：中 漏洞Rank：6  确认时间：2015-06-27 14:14 厂商回复： 通知处理中 最新状态： 暂无  ", "replys": "漏洞评价：\n评论\n     2015-06-27 15:12 |    \t\t安全小飞侠 \t\t\t( 实习白帽子  |\t\t\t        Rank:75 漏洞数:12        | 安全小飞侠就是我，我就是安全小飞侠！)\t\t \n  @xsser 这里给的rank是6，消息显示是2呢？    \n     2015-08-15 14:49 |    \t\tBeenQuiver \t\t\t( 普通白帽子  |\t\t\t        Rank:101 漏洞数:26        | 专注而高效，坚持好的习惯千万不要放弃)\t\t \n  @安全小飞侠 too younghttp://wooyun.org/captcha.php?0.9887084527872503    \n  \n\n\n", "wybug_level_fromcorp": "中", "wybug_rank_fromcorp": 6, "Ranks": null}